<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Logging</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Logging</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="about-cluster-logging">About cluster logging and OpenShift Enterprise</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As an OpenShift Enterprise cluster administrator, you can deploy cluster logging to aggregate logs for a range of OpenShift Enterprise services.</p>
</div>
<div class="sect2">
<h3 id="efk-logging-about-efk-logging">About cluster logging in OpenShift Enterprise</h3>
<div class="paragraph">
<p>As an OpenShift Enterprise cluster administrator, you can deploy cluster logging to
aggregate logs for a range of OpenShift Enterprise services.</p>
</div>
<div class="paragraph">
<p>The cluster logging components are based upon Elasticsearch, Fluentd, and Kibana (EFK).
The collector, <a href="http://www.fluentd.org/architecture">Fluentd</a>, is deployed to each node in the OpenShift Enterprise cluster.
It collects all node and container logs and writes them to <a href="https://www.elastic.co/products/elasticsearch">Elasticsearch</a> (ES).
<a href="https://www.elastic.co/guide/en/kibana/current/introduction.html">Kibana</a> is the centralized, web UI
where users and administrators can create rich visualizations and dashboards with the aggregated data.</p>
</div>
<div class="paragraph">
<p>OpenShift Enterprise cluster administrators can deploy cluster logging by creating a subscription from the console
in the 'openshift-logging' project. Creating the subscription deploys the Cluster Logging Operator, the Elasticsearch Operator, and the
other resources necessary to support the deployment of cluster logging. The operators are responsible for deploying, upgrading,
and maintaining cluster logging.</p>
</div>
<div class="paragraph">
<p>You can configure cluster logging by modifying the Cluster Logging Custom Resource (CR), named <code>instance</code>.
The CR defines a complete cluster logging deployment that includes all the components
of the logging stack to collect, store and visualize logs.  The Cluster Logging Operator watches the <code>ClusterLogging</code>
Custom Resource and adjusts the logging deployment accordingly.</p>
</div>
<div class="paragraph">
<p>Administrators and application developers can view the logs of the projects for which they have view access.</p>
</div>
<div class="sect3">
<h4 id="efk-logging-about-components-efk-logging">About cluster logging components</h4>
<div class="paragraph">
<p>There are currently 4 different types of cluster logging components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>logStore - This is where the logs will be stored. The current implementation is Elasticsearch.</p>
</li>
<li>
<p>collection - This is the component that collects logs from the node, formats them, and stores them in the logStore. The current implementation is Fluentd.</p>
</li>
<li>
<p>visualization - This is the UI component used to view logs, graphs, charts, and so forth. The current implementation is Kibana.</p>
</li>
<li>
<p>curation - This is the component that trims logs by age. The current implementation is Curator.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this document, we may refer to logStore or Elasticsearch, visualization or Kibana, curation or Curator, collection or Fluentd, interchangeably, except where noted.</p>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-about-elasticsearch-efk-logging">About Elasticsearch in OpenShift Enterprise</h4>
<div class="paragraph">
<p>OpenShift Enterprise uses <a href="https://www.elastic.co/products/elasticsearch">Elasticsearch (ES)</a> to organize the log data from Fluentd into datastores, or <em>indices</em>.</p>
</div>
<div class="paragraph">
<p>Elasticsearch subdivides each index into multiple pieces called <em>shards</em>, which it spreads across a set of Elasticsearch nodes in an Elasticsearch cluster.
You can configure Elasticsearch to make copies of the shards, called <em>replicas</em>. Elasticsearch also spreads these replicas across
the Elasticsearch nodes. The <strong>ClusterLogging</strong> Custom Resource allows you to specify the replication policy in the Custom Resource Definition (CRD) to provide data redundancy and resilience to failure.</p>
</div>
<div class="paragraph">
<p>The Cluster Logging Operator and companion Elasticsearch Operator ensure that each Elasticsearch node is deployed using a unique Deployment that includes its own storage volume.
You can use a Cluster Logging Custom Resource (CR) to increase the number of Elasticsearch nodes.
Refer to
<a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/hardware.html">Elastic&#8217;s
documentation</a> for considerations involved in choosing storage and
network location as directed below.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A highly-available Elasticsearch environment requires at least three Elasticsearch nodes,
each on a different host.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://www.elastic.co/products/elasticsearch">Elasticsearch (ES)</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-about-fluentd-efk-logging">About Fluentd in OpenShift Enterprise</h4>
<div class="paragraph">
<p>OpenShift Enterprise uses Fluentd to collect data about your cluster.</p>
</div>
<div class="paragraph">
<p>Fluentd is deployed as a DaemonSet in OpenShift Enterprise that deploys nodes to each OpenShift node.</p>
</div>
<div class="paragraph">
<p>Fluentd uses <code>journald</code> as the system log source. These are log messages from
the operating system, the container runtime, and OpenShift Enterprise.</p>
</div>
<div class="paragraph">
<p>The container runtimes provide minimal information to identify the source of log messages: project, pod name,
and container id. This is not sufficient to uniquely identify the source of the logs. If a pod with a given name
and project is deleted before the log collector begins processing its logs, information from the API server, such as labels and annotations,
is not be available. There might not be a way to distinguish the log messages from a similarly named pod and project or trace the logs to their source.
This limitation means log collection and normalization is considered <strong>best effort</strong>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The available container runtimes provide minimal information to identify the
source of log messages and do not guarantee unique individual log
messages or that these messages can be traced to their source.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information, see <a href="http://www.fluentd.org/architecture">Fluentd</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-about-kibana-efk-logging">About Kibana in OpenShift Enterprise</h4>
<div class="paragraph">
<p>OpenShift Enterprise uses Kibana to display the log data collected by Fluentd and indexed by Elasticsearch.</p>
</div>
<div class="paragraph">
<p>Kibana is a browser-based console interface to query, discover, and visualize your Elasticsearch data through
histograms, line graphs, pie charts, heat maps, built-in geospatial support, and other visualizations.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://www.elastic.co/guide/en/kibana/current/introduction.html">Kibana</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-about-curator-efk-logging">About Curator in OpenShift Enterprise</h4>
<div class="paragraph">
<p>The Elasticsearch Curator tool performs scheduled maintenance operations on a per-project basis. Curator performs actions daily based on its configuration. Only one Curator Pod is
recommended per Elasticsearch cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">spec:
  curation:
  type: "curator"
  resources:
  curator:
    schedule: "30 3 * * *" <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the Curator schedule in the <a href="//en.wikipedia.org/wiki/Cron">cron format</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://www.elastic.co/guide/en/elasticsearch/client/curator/current/about.html">Curator</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-about-eventrouter-efk-logging">About Event Router in OpenShift Enterprise</h4>
<div class="paragraph">
<p>The Event Router is a pod that forwards OpenShift Enterprise events to cluster logging.
You must manually deploy Event Router.</p>
</div>
<div class="paragraph">
<p>The Event Router collects events and converts them into JSON format, which takes
those events and pushes them to <code>STDOUT</code>. Fluentd indexes the events to the
<code>.operations</code> index.</p>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-configuring-crd-efk-logging">About the Cluster logging CRD</h4>
<div class="paragraph">
<p>The Cluster Logging Operator Custom Resource Definition (CRD) defines a complete cluster logging deployment
that includes all the components of the logging stack to collect, store and visualize logs.</p>
</div>
<div class="paragraph">
<p>You should never need to modify this CRD. To make changes to your deployment, create and modify a specific Custom Resource (CR).
Instructions for creating or modifying a CR are provided in this documentation as appropriate.</p>
</div>
<div class="paragraph">
<p>The following is an example of a typical Custom Resource Definition for cluster logging.</p>
</div>
<div id="efk-logging-configuring-about-sample-efk-logging" class="listingblock">
<div class="title">Sample ClusterLogging CRD</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
nodeSpec:
  image: openshift/origin-logging-elasticsearch5
  resources: {}
spec:
  managementState: "Managed"
  logStore:
    type: "elasticsearch"
    elasticsearch:
      resources:
        limits:
          cpu:
          memory:
        requests:
          cpu:
          memory:
      nodeCount: 1
      nodeSelector:
          node-type: infra
          cluster-logging-component: es
      storage:
        storageClass:
          name: "gp2"
          size: "200G"
      redundancyPolicy: "SingleRedundancy"
  visualization:
    type: "kibana"
    kibana:
      replicas: 1
      resources:
      proxy:
        resources:
          limits:
            cpu:
            memory:
          requests:
            cpu:
            memory:
  collection:
    logs:
      type: "fluentd"
      fluentd:
        resources:
          limits:
            cpu:
            memory:
          requests:
            cpu:
            memory:
  curation:
    type: "curator"
    curator:
      schedule: "30 3 * * *"
nodes:
  nodeSpec:
     resources: {}
  replicas: 1
  roles:
  - client
  - data
  - master
storage:
  emptyDir: {}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="about-deploying-cluster-logging">About deploying cluster logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before installing cluster logging into your cluster, review the following sections.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Procedures in this topic require your cluster to be in an unmanaged state. For more information, see <em>Changing the cluster logging management state</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="efk-logging-deploying-about-efk-logging-deploying-about">About deploying and configuring cluster logging</h3>
<div class="paragraph">
<p>OpenShift Enterprise cluster logging is designed to be used with the default configuration, which is tuned for small to medium sized OpenShift Enterprise clusters.</p>
</div>
<div class="paragraph">
<p>The installation instructions that follow include a sample Cluster Logging Custom Resource (CR), which you can use to create a cluster logging instance
and configure your cluster logging deployment.</p>
</div>
<div class="paragraph">
<p>If you want to use the default cluster logging install, you can use the sample CR directly.</p>
</div>
<div class="paragraph">
<p>If you want to customize your deployment, make changes to the sample CR as needed. The following describes the configurations you can make when installing your cluster logging instance or modify after installtion. See the Configuring sections for more information on working with each component, including modifications you can make outside of the Cluster Logging Custom Resource.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you change the default Cluster Logging Custom Resource, you must set your Cluster Logging Custom Resource to <code>Unmanaged</code>. In an unmanaged deployment the Cluster Logging Operator does not respond to changes in the CR after installation and does not receive updates until the cluster logging is placed back into a managed state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="efk-logging-deploy-about-config-efk-logging-deploying-about">Configuring and Tuning Cluster Logging</h4>
<div class="paragraph">
<p>You can configure your cluster logging environment by modifying the Cluster Logging Custom Resource deployed
in the <code>openshift-logging</code> project.</p>
</div>
<div class="paragraph">
<p>You can modify any of the following components upon install or after install</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Management state</dt>
<dd>
<p>Cluster logging is managed by the Cluster Logging Operator. You can place the Cluster Logging Operator into an <em>unmanaged</em> state allowing an administrator to assume full control of individual
component configurations and upgrades by changing the <code>managementState</code> from <code>Managed</code> to <code>Unmanaged</code>.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  spec:
    managementState: "Managed"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>An unmanaged deployment will not receive updates until the <code>ClusterLogging</code> custom resource is placed back into a managed state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Memory and CPU</dt>
<dd>
<p>You can adjust both the CPU and memory limits for each component by modifying the <code>resources</code>
block with valid memory and CPU values:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">spec:
  logStore:
    elasticsearch:
      resources:
        limits:
          cpu:
          memory:
        requests:
          cpu: 1
          memory: 16Gi
      type: "elasticsearch"
  collection:
    logs:
      fluentd:
        resources:
          limits:
            cpu:
            memory:
          requests:
            cpu:
            memory:
        type: "fluentd"
  visualization:
    kibana:
      resources:
        limits:
          cpu:
          memory:
        requests:
          cpu:
          memory:
     type: kibana
  curation:
    curator:
      resources:
        limits:
          memory: 200Mi
        requests:
          cpu: 200m
          memory: 200Mi
      type: "curator"</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Elasticsearch storage</dt>
<dd>
<p>You can configure a persistent storage class and size for the Elasticsearch cluster using the <code>storageClass</code> <code>name</code> and <code>size</code> parameters. The Cluster Logging Operator creates a <code>PersistentVolumeClaim</code> for each data node in the Elasticsearch cluster based on these parameters.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  spec:
    logStore:
      type: "elasticsearch"
      elasticsearch:
        nodeCount: 3
        storage:
          storageClass:
            name: "gp2"
            size: "200G"</pre>
</div>
</div>
<div class="paragraph">
<p>This example specifies each data node in the cluster will be bound to a <code>PersistentVolumeClaim</code> that
requests "200G" of "gp2" storage.  Each primary shard will be backed by a single replica.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Omitting the <code>storage</code> block results in a deployment that includes ephemeral storage only.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  spec:
    logStore:
      type: "elasticsearch"
      elasticsearch:
        nodeCount: 3
        storage: {}</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Elasticsearch replication policy</dt>
<dd>
<p>You can set the policy that defines how Elasticsearch shards are replicated across data nodes in the cluster:</p>
<div class="ulist">
<ul>
<li>
<p><code>FullRedundancy</code>. The shards for each index are fully replicated to every data node.</p>
</li>
<li>
<p><code>MultipleRedundancy</code>. The shards for each index are spread over half of the data nodes.</p>
</li>
<li>
<p><code>SingleRedundancy</code>. A single copy of each shard. Logs are always available and recoverable as long as at least two data nodes exist.</p>
</li>
<li>
<p><code>ZeroRedundancy</code>. No copies of any shards.  Logs may be unavailable (or lost) in the event a node is down or fails.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Curator schedule</dt>
<dd>
<p>You specify the schedule for Curator in the [cron format](<a href="https://en.wikipedia.org/wiki/Cron" class="bare">https://en.wikipedia.org/wiki/Cron</a>).</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  spec:
    curation:
    type: "curator"
    resources:
    curator:
      schedule: "30 3 * * *"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-deploy-about-sample-efk-logging-deploying-about">Sample modified Cluster Logging Custom Resource</h4>
<div class="paragraph">
<p>The following is an example of a Cluster Logging Custom Resource modified using the options previously described.</p>
</div>
<div class="listingblock">
<div class="title">Sample modified Cluster Logging Custom Resource</div>
<div class="content">
<pre class="nowrap">apiVersion: "logging.openshift.io/v1alpha1"
kind: "ClusterLogging"
metadata:
  name: "instance"
  namespace: "openshift-logging"
spec:
  managementState: "Managed"
  logStore:
    type: "elasticsearch"
    elasticsearch:
      nodeCount: 2
      resources:
        limits:
          memory: 2Gi
        requests:
          cpu: 200m
          memory: 2Gi
      storage: {}
      redundancyPolicy: "SingleRedundancy"
  visualization:
    type: "kibana"
    kibana:
      resources:
        limits:
          memory: 1Gi
        requests:
          cpu: 500m
          memory: 1Gi
      replicas: 1
  curation:
    type: "curator"
    curator:
      resources:
        limits:
          memory: 200Mi
        requests:
          cpu: 200m
          memory: 200Mi
      schedule: "*/5 * * * *"
  collection:
    logs:
      type: "fluentd"
      fluentd:
        resources:
          limits:
            memory: 1Gi
          requests:
            cpu: 200m
            memory: 1Gi</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="efk-logging-deploy-storage-considerations-efk-logging-deploying-about">Storage considerations for cluster logging and OpenShift Enterprise</h3>
<div class="paragraph">
<p>A persistent volume is required for each Elasticsearch deployment to have one data volume per data node. On OpenShift Enterprise this is achieved using
Persistent Volume Claims.</p>
</div>
<div class="paragraph">
<p>The Elasticsearch Operator names the PVCs using the Elasticsearch resource name. Refer to
Persistent Elasticsearch Storage for more details.</p>
</div>
<div class="paragraph">
<p>Fluentd ships any logs from <strong>systemd journal</strong> and <strong>/var/log/containers/</strong> to Elasticsearch.</p>
</div>
<div class="paragraph">
<p>Therefore, consider how much data you need in advance and that you are
aggregating application log data. Some Elasticsearch users have found that it
is necessary to
<a href="https://signalfx.com/blog/how-we-monitor-and-run-elasticsearch-at-scale/">keep
absolute storage consumption around 50% and below 70% at all times</a>. This
helps to avoid Elasticsearch becoming unresponsive during large merge
operations.</p>
</div>
<div class="paragraph">
<p>By default, at 85% Elasticsearch stops allocating new data to the node, at 90% Elasticsearch attempts to relocate
existing shards from that node to other nodes if possible. But if no nodes have free capacity below 85%, Elasticsearch effectively rejects creating new indices
and becomes RED.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>These low and high watermark values are Elasticsearch defaults in the current release. You can modify these values,
but you will also need to apply any modifications to the alerts also. The alerts are based
on these defaults.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_additional-resources">Additional resources</h3>
<div class="paragraph">
<p>For more information on installing operators,see <a href="https://access.redhat.com/documentation/en-us/openshift_enterprise/4.0/html-single/applications/#olm-installing-operators-from-operatorhub-olm-adding-operators-to-a-cluster">Installing Operators from the OperatorHub</a>.</p>
</div>
<div class="paragraph">
<p>For information on scaling your Elasticsearch cluster, see <a href="#efk-logging-elasticsearch-add-remove-efk-logging-elasticsearch">Scaling your Elasticsearch cluster</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-cluster-logging">Deploying cluster logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The process for deploying cluster Logging to {prouct-title} involves:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Review the installation options in <a href="#about-deploying-cluster-logging">About deploying cluster logging</a>.</p>
</li>
<li>
<p>Review the <a href="#efk-logging-deploy-storage-considerations-efk-logging-deploying-about">cluster logging storage considerations</a>.</p>
</li>
<li>
<p>Install the Cluster Logging subscription using the web console.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="efk-logging-deploy-subscription-efk-logging-deploying">Installing the Cluster Logging and Elasticsearch Operators</h3>
<div class="paragraph">
<p>You can use the OpenShift Enterprise console to install cluster logging, by deploying,
the Cluster Logging and Elasticsearch Operators.  The Cluster Logging Operator
creates and manages the components of the logging stack.  The Elasticsearch Operator
creates and manages the Elasticsearch cluster used by cluster logging.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The OpenShift Enterprise cluster logging solution requires that you install both the
Cluster Logging Operator and Elasticsearch Operator. There is no use case
in OpenShift Enterprise for installing the operators individually.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Prerequisites</div>
<ol class="arabic">
<li>
<p>Ensure that you have the necessary persistent storage for Elasticsearch. Note that each Elasticsearch node
requires its own storage volume.</p>
<div class="paragraph">
<p>Elasticsearch is a memory-intensive application. Each Elasticsearch node needs 16G of memory for both memory requests and CPU limits.
The initial set of OpenShift Enterprise nodes might not be large enough to support the Elasticsearch cluster. You must add additional nodes to the
OpenShift Enterprise cluster to run with the recommended or higher memory. Each Elasticsearch node can operate with a lower
memory setting though this is not recommended for production deployments.</p>
</div>
</li>
<li>
<p>Create a project for cluster logging. You must create the project with the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a YAML file with the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Namespace
metadata:
  name: openshift-logging
  annotations:
    openshift.io/node-selector: "" <b class="conum">(1)</b>
  labels:
    openshift.io/cluster-logging: "true"
    openshift.io/cluster-monitoring: "true"</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Optionally specify an empty node selector in order for the logging pods to spread
evenly across your cluster. The logging pods will be spread evenly throughout the cluster.
If you want the logging pods to run on specific nodes, you can specify a node selector value here.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Run the following command to create the project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc create -f &lt;file-name&gt;.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Install the Elasticsearch Operator:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the OpenShift Enterprise console, click <strong>Catalog</strong> &#8594; <strong>OperatorHub</strong>.</p>
</li>
<li>
<p>Choose  <strong>Elasticsearch Operator</strong> from the list of available Operators, and click <strong>Install</strong>.</p>
</li>
<li>
<p>On the <strong>Create Operator Subscription</strong> page, select <strong>All namespaces on the cluster</strong> under <strong>Installation Mode</strong>.
Then, click <strong>Subscribe</strong>.</p>
<div class="paragraph">
<p>This makes the Operator available to all users and projects that use this OpenShift Enterprise cluster.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Install the Cluster Logging Operator:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Catalog</strong> &#8594; <strong>OperatorHub</strong>.</p>
</li>
<li>
<p>Choose  <strong>Cluster Logging</strong> from the list of available Operators, and click <strong>Install</strong>.</p>
</li>
<li>
<p>On the <strong>Create Operator Subscription</strong> page, under <strong>A specific namespace on the cluster</strong> select <strong>openshift-logging</strong>.
Then, click <strong>Subscribe</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Verify the operator installations:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Switch to the <strong>Catalog</strong> → <strong>Installed Operators</strong> page.</p>
</li>
<li>
<p>Ensure that <strong>Cluster Logging</strong> and <strong>Elasticsearch Operator</strong> are listed on
the <strong>InstallSucceeded</strong> tab with a <strong>Status</strong> of <strong>InstallSucceeded</strong>. Change the project to <strong>all projects</strong> if necessary.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>During installation an operator might display a <strong>Failed</strong> status. If the operator then installs with an <strong>InstallSucceeded</strong> message,
you can safely ignore the <strong>Failed</strong> message.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If either operator does not appear as installed, to troubleshoot further:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On the <strong>Copied</strong> tab of the <strong>Installed Operators</strong> page, if an operator show a <strong>Status</strong> of
<strong>Copied</strong>, this indicates the installation is in process and is expected behavior.</p>
</li>
<li>
<p>Switch to the <strong>Catalog</strong> → <strong>Operator Management</strong> page and inspect
the <strong>Operator Subscriptions</strong> and <strong>Install Plans</strong> tabs for any failure or errors
under <strong>Status</strong>.</p>
</li>
<li>
<p>Switch to the <strong>Workloads</strong> → <strong>Pods</strong> page and check the logs in any Pods in the
<code>openshift-logging</code> and <code>openshift-operators</code> projects that are reporting issues.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Create a cluster logging instance:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Switch to the the <strong>Administration</strong> &#8594; <strong>Custom Resource Definitions</strong> page.</p>
</li>
<li>
<p>On the <strong>Custom Resource Definitions</strong> page, click <strong>ClusterLogging</strong>.</p>
</li>
<li>
<p>On the <strong>Custom Resource Definition Overview</strong> page, select <strong>View Instances</strong> from the <strong>Actions</strong> menu.</p>
</li>
<li>
<p>On the <strong>Cluster Loggings</strong> page, click <strong>Create Cluster Logging</strong>.</p>
<div class="paragraph">
<p>You might need to refresh the page to load the data.</p>
</div>
</li>
<li>
<p>In the YAML, replace the code with the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "instance" <b class="conum">(1)</b>
  namespace: "openshift-logging"
spec:
  managementState: "Managed"  <b class="conum">(2)</b>
  logStore:
    type: "elasticsearch"  <b class="conum">(3)</b>
    elasticsearch:
      nodeCount: 3
      storage:
        storageClassName: gp2
        size: 200G
      redundancyPolicy: "SingleRedundancy"
  visualization:
    type: "kibana"  <b class="conum">(4)</b>
    kibana:
      replicas: 1
  curation:
    type: "curator"  <b class="conum">(5)</b>
    curator:
      schedule: "30 3 * * *"
  collection:
    logs:
      type: "fluentd"  <b class="conum">(6)</b>
      fluentd: {}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The name of the CR. This must be <code>instance</code>.</p>
</li>
<li>
<p>The cluster logging management state. In most cases, if you change the default cluster logging defaults, you will need to set this to <code>Unmanaged</code>.
However, an unmanaged deployment does not receive updates until the cluster logging is placed back into a managed state. For more information, see <strong>Changing cluster logging management state</strong>.</p>
</li>
<li>
<p>Settings for configuring Elasticsearch. Using the CR, you can configure shard replication policy and persistent storage. For more information, see <strong>Configuring Elasticsearch</strong>.</p>
</li>
<li>
<p>Settings for configuring Kibana. Using the CR, you can scale Kibana for redundancy and configure the CPU and memory for your Kibana nodes. For more information, see <strong>Configuring Kibana</strong>.</p>
</li>
<li>
<p>Settings for configuring Curator. Using the CR, you can set the Curator schedule. For more information, see <strong>Configuring Curator</strong>.</p>
</li>
<li>
<p>Settings for configuring Fluentd. Using the CR, you can configure Fluentd CPU and memory limits. For more information, see <strong>Configuring Fluentd</strong>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The default cluster logging configuration should support a wide array of environments. Review the topics on tuning and
configuring the cluster logging components for information on modifications you can make to your cluster logging cluster.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Create</strong>. This creates the Cluster Logging Custom Resource and Elasticsearch Custom Resource, which you
can edit to make changes to your cluster logging cluster.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Verify the install:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Switch to the <strong>Workloads</strong> &#8594; <strong>Pods</strong> page.</p>
</li>
<li>
<p>Select the <strong>openshift-logging</strong> project.</p>
<div class="paragraph">
<p>You should see pods for cluster logging, Elasticsearch, and Fluentd, as shown in
the following CLI output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc get pods -n openshift-logging

NAME                                            READY   STATUS    RESTARTS   AGE
cluster-logging-operator-cb795f8dc-xkckc        1/1     Running   0          32m
elasticsearch-cdm-b3nqzchd-1-5c6797-67kfz       2/2     Running   0          14m
elasticsearch-cdm-b3nqzchd-2-6657f4-wtprv       2/2     Running   0          14m
elasticsearch-cdm-b3nqzchd-3-588c65-clg7g       2/2     Running   0          14m
fluentd-2c7dg                                   1/1     Running   0          14m
fluentd-9z7kk                                   1/1     Running   0          14m
fluentd-br7r2                                   1/1     Running   0          14m
fluentd-fn2sb                                   1/1     Running   0          14m
fluentd-pb2f8                                   1/1     Running   0          14m
fluentd-zqgqx                                   1/1     Running   0          14m
kibana-7fb4fd4cc9-bvt4p                         2/2     Running   0          14m</pre>
</div>
</div>
</li>
<li>
<p>Switch to the <strong>Workloads</strong> &#8594; <strong>Pods</strong> page.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_additional-resources-2">Additional resources</h3>
<div class="paragraph">
<p>For more information on installing operators,see <a href="https://access.redhat.com/documentation/en-us/openshift_enterprise/4.0/html-single/applications/#olm-installing-operators-from-operatorhub-olm-adding-operators-to-a-cluster">Installing Operators from the OperatorHub</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-and-configuring-the-event-router">Working with Event Router in OpenShift Enterprise</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Event Router is a pod that forwards OpenShift Enterprise events to Cluster Logging.</p>
</div>
<div class="sect2">
<h3 id="efk-logging-eventrouter-deploy-efk-logging-curator">Deploying and Configuring the Event Router</h3>
<div class="paragraph">
<p>Use the following steps to deploy Event Router into your cluster.</p>
</div>
<div class="paragraph">
<p>The following Template object creates the Service Account, ClusterRole, and ClusterRoleBinding required for the Event Router.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>You need proper permissions to make updates within the <code>openshift-*</code> namespace.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a template for the Event Router:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: Template
apiVersion: v1
metadata:
  name: eventrouter-template
  annotations:
    description: "A pod forwarding kubernetes events to cluster logging stack."
    tags: "events,EFK,logging, cluster-logging"
objects:
  - kind: ServiceAccount <b class="conum">(1)</b>
    apiVersion: v1
    metadata:
      name: cluster-logging-eventrouter
      namespace: ${NAMESPACE}
  - kind: ClusterRole <b class="conum">(2)</b>
    apiVersion: v1
    metadata:
      name: event-reader
    rules:             <b class="conum">(3)</b>
    - apiGroups: [""]
      resources: ["events"]
      verbs: ["get", "watch", "list"]
  - kind: ClusterRoleBinding  <b class="conum">(4)</b>
    apiVersion: v1
    metadata:
      name: event-reader-binding
    subjects:
    - kind: ServiceAccount
      name: cluster-logging-eventrouter
      namespace: ${NAMESPACE}
    roleRef:
      kind: ClusterRole
      name: event-reader
  - kind: ConfigMap
    apiVersion: v1
    metadata:
      name: cluster-logging-eventrouter
      namespace: ${NAMESPACE}
    data:
      config.json: |-
        {
          "sink": "stdout"
        }
  - kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: cluster-logging-eventrouter
      namespace: ${NAMESPACE}
      labels:
        component: eventrouter
        logging-infra: eventrouter
        provider: openshift
    spec:
      selector:
        matchLabels:
          component: eventrouter
          logging-infra: eventrouter
          provider: openshift
      replicas: 1
      template:
        metadata:
          labels:
            component: eventrouter
            logging-infra: eventrouter
            provider: openshift
          name: cluster-logging-eventrouter
        spec:
          serviceAccount: cluster-logging-eventrouter
          containers:
            - name: kube-eventrouter
              image: ${IMAGE}
              imagePullPolicy: IfNotPresent
              resources:
                limits:
                  memory: ${MEMORY}
                requests:
                  cpu: ${CPU}
                  memory: ${MEMORY}
              volumeMounts:
              - name: config-volume
                mountPath: /etc/eventrouter
          volumes:
            - name: config-volume
              configMap:
                name: cluster-logging-eventrouter
parameters:
  - name: IMAGE  <b class="conum">(5)</b>
    displayName: Image
    value: "quay.io/openshift/origin-logging-eventrouter:latest"
  - name: MEMORY <b class="conum">(6)</b>
    displayName: Memory
    value: "128Mi"
  - name: CPU  <b class="conum">(7)</b>
    displayName: CPU
    value: "100m"
  - name: NAMESPACE  <b class="conum">(8)</b>
    displayName: Namespace
    value: "openshift-logging"</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Creates a Service Account for the Event Router.</p>
</li>
<li>
<p>Creates a cluster role to monitor for events in the cluster.</p>
</li>
<li>
<p>Allows the <code>get</code>, <code>watch</code>, and <code>list</code> permissions for the <code>events</code> resource.</p>
</li>
<li>
<p>Creates a ClusterRoleBinding to bind the ClusterRole to the ServiceAccount.</p>
</li>
<li>
<p>Specify the image version for the Event Router.</p>
</li>
<li>
<p>Specify the memory limit for the Event Router pods. Defaults to '128Mi'.</p>
</li>
<li>
<p>Specify the minimum amount of CPU to allocate to the Event Router. Defaults to '100m'.</p>
</li>
<li>
<p>Specify the namespace where eventrouter is deployed. Defaults to <code>openshift-logging</code>. The value must be the same as specified for the ServiceAccount and ClusterRoleBinding.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Use the following command to process and apply the template:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc process -f &lt;templatefile&gt; | oc apply -f -</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc process -f eventrouter.yaml | oc apply -f -

serviceaccount/cluster-logging-eventrouter created
clusterrole.authorization.openshift.io/event-reader created
clusterrolebinding.authorization.openshift.io/event-reader-binding created
configmap/cluster-logging-eventrouter created
deployment.apps/cluster-logging-eventrouter created</pre>
</div>
</div>
</li>
<li>
<p>Validate that the Event Router installed:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get pods --selector  component=eventrouter -o name`

pod/cluster-logging-eventrouter-d649f97c8-qvv8r</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc logs cluster-logging-eventrouter-d649f97c8-qvv8r

{"verb":"ADDED","event":{"metadata":{"name":"elasticsearch-operator.v0.0.1.158f402e25397146","namespace":"openshift-operators","selfLink":"/api/v1/namespaces/openshift-operators/events/elasticsearch-operator.v0.0.1.158f402e25397146","uid":"37b7ff11-4f1a-11e9-a7ad-0271b2ca69f0","resourceVersion":"523264","creationTimestamp":"2019-03-25T16:22:43Z"},"involvedObject":{"kind":"ClusterServiceVersion","namespace":"openshift-operators","name":"elasticsearch-operator.v0.0.1","uid":"27b2ca6d-4f1a-11e9-8fba-0ea949ad61f6","apiVersion":"operators.coreos.com/v1alpha1","resourceVersion":"523096"},"reason":"InstallSucceeded","message":"waiting for install components to report healthy","source":{"component":"operator-lifecycle-manager"},"firstTimestamp":"2019-03-25T16:22:43Z","lastTimestamp":"2019-03-25T16:22:43Z","count":1,"type":"Normal"}}</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring-your-cluster-logging-deployment">Configuring your cluster logging deployment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="about-configuring-cluster-logging">About configuring cluster logging</h3>
<div class="paragraph">
<p>After installing cluster logging into your cluster, you can make the following configurations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Procedures in this topic require your cluster to be in an unmanaged state. For more information, see <em>Changing the cluster logging management state</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="efk-logging-deploying-about-efk-logging-configuring-about">About deploying and configuring cluster logging</h4>
<div class="paragraph">
<p>OpenShift Enterprise cluster logging is designed to be used with the default configuration, which is tuned for small to medium sized OpenShift Enterprise clusters.</p>
</div>
<div class="paragraph">
<p>The installation instructions that follow include a sample Cluster Logging Custom Resource (CR), which you can use to create a cluster logging instance
and configure your cluster logging deployment.</p>
</div>
<div class="paragraph">
<p>If you want to use the default cluster logging install, you can use the sample CR directly.</p>
</div>
<div class="paragraph">
<p>If you want to customize your deployment, make changes to the sample CR as needed. The following describes the configurations you can make when installing your cluster logging instance or modify after installtion. See the Configuring sections for more information on working with each component, including modifications you can make outside of the Cluster Logging Custom Resource.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you change the default Cluster Logging Custom Resource, you must set your Cluster Logging Custom Resource to <code>Unmanaged</code>. In an unmanaged deployment the Cluster Logging Operator does not respond to changes in the CR after installation and does not receive updates until the cluster logging is placed back into a managed state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="efk-logging-deploy-about-config-efk-logging-configuring-about">Configuring and Tuning Cluster Logging</h5>
<div class="paragraph">
<p>You can configure your cluster logging environment by modifying the Cluster Logging Custom Resource deployed
in the <code>openshift-logging</code> project.</p>
</div>
<div class="paragraph">
<p>You can modify any of the following components upon install or after install</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Management state</dt>
<dd>
<p>Cluster logging is managed by the Cluster Logging Operator. You can place the Cluster Logging Operator into an <em>unmanaged</em> state allowing an administrator to assume full control of individual
component configurations and upgrades by changing the <code>managementState</code> from <code>Managed</code> to <code>Unmanaged</code>.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  spec:
    managementState: "Managed"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>An unmanaged deployment will not receive updates until the <code>ClusterLogging</code> custom resource is placed back into a managed state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Memory and CPU</dt>
<dd>
<p>You can adjust both the CPU and memory limits for each component by modifying the <code>resources</code>
block with valid memory and CPU values:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">spec:
  logStore:
    elasticsearch:
      resources:
        limits:
          cpu:
          memory:
        requests:
          cpu: 1
          memory: 16Gi
      type: "elasticsearch"
  collection:
    logs:
      fluentd:
        resources:
          limits:
            cpu:
            memory:
          requests:
            cpu:
            memory:
        type: "fluentd"
  visualization:
    kibana:
      resources:
        limits:
          cpu:
          memory:
        requests:
          cpu:
          memory:
     type: kibana
  curation:
    curator:
      resources:
        limits:
          memory: 200Mi
        requests:
          cpu: 200m
          memory: 200Mi
      type: "curator"</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Elasticsearch storage</dt>
<dd>
<p>You can configure a persistent storage class and size for the Elasticsearch cluster using the <code>storageClass</code> <code>name</code> and <code>size</code> parameters. The Cluster Logging Operator creates a <code>PersistentVolumeClaim</code> for each data node in the Elasticsearch cluster based on these parameters.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  spec:
    logStore:
      type: "elasticsearch"
      elasticsearch:
        nodeCount: 3
        storage:
          storageClass:
            name: "gp2"
            size: "200G"</pre>
</div>
</div>
<div class="paragraph">
<p>This example specifies each data node in the cluster will be bound to a <code>PersistentVolumeClaim</code> that
requests "200G" of "gp2" storage.  Each primary shard will be backed by a single replica.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Omitting the <code>storage</code> block results in a deployment that includes ephemeral storage only.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  spec:
    logStore:
      type: "elasticsearch"
      elasticsearch:
        nodeCount: 3
        storage: {}</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Elasticsearch replication policy</dt>
<dd>
<p>You can set the policy that defines how Elasticsearch shards are replicated across data nodes in the cluster:</p>
<div class="ulist">
<ul>
<li>
<p><code>FullRedundancy</code>. The shards for each index are fully replicated to every data node.</p>
</li>
<li>
<p><code>MultipleRedundancy</code>. The shards for each index are spread over half of the data nodes.</p>
</li>
<li>
<p><code>SingleRedundancy</code>. A single copy of each shard. Logs are always available and recoverable as long as at least two data nodes exist.</p>
</li>
<li>
<p><code>ZeroRedundancy</code>. No copies of any shards.  Logs may be unavailable (or lost) in the event a node is down or fails.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Curator schedule</dt>
<dd>
<p>You specify the schedule for Curator in the [cron format](<a href="https://en.wikipedia.org/wiki/Cron" class="bare">https://en.wikipedia.org/wiki/Cron</a>).</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  spec:
    curation:
    type: "curator"
    resources:
    curator:
      schedule: "30 3 * * *"</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="efk-logging-deploy-about-sample-efk-logging-configuring-about">Sample modified Cluster Logging Custom Resource</h5>
<div class="paragraph">
<p>The following is an example of a Cluster Logging Custom Resource modified using the options previously described.</p>
</div>
<div class="listingblock">
<div class="title">Sample modified Cluster Logging Custom Resource</div>
<div class="content">
<pre class="nowrap">apiVersion: "logging.openshift.io/v1alpha1"
kind: "ClusterLogging"
metadata:
  name: "instance"
  namespace: "openshift-logging"
spec:
  managementState: "Managed"
  logStore:
    type: "elasticsearch"
    elasticsearch:
      nodeCount: 2
      resources:
        limits:
          memory: 2Gi
        requests:
          cpu: 200m
          memory: 2Gi
      storage: {}
      redundancyPolicy: "SingleRedundancy"
  visualization:
    type: "kibana"
    kibana:
      resources:
        limits:
          memory: 1Gi
        requests:
          cpu: 500m
          memory: 1Gi
      replicas: 1
  curation:
    type: "curator"
    curator:
      resources:
        limits:
          memory: 200Mi
        requests:
          cpu: 200m
          memory: 200Mi
      schedule: "*/5 * * * *"
  collection:
    logs:
      type: "fluentd"
      fluentd:
        resources:
          limits:
            memory: 1Gi
          requests:
            cpu: 200m
            memory: 1Gi</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changing-cluster-logging-management-state">Changing cluster logging management state</h3>
<div class="paragraph">
<p>The Cluster Logging Operator and Elasticsearch Operator can be in a <em>Managed</em> or <em>Unmanaged</em> state.</p>
</div>
<div class="paragraph">
<p>By default, the Cluster Logging and Elasticsearch operators are set to Managed. However, in order to modify the components managed by the Cluster Logging Operator,
you need to set cluster logging to the <em>unmanaged</em> state. In order to modify the components managed by the Elasticsearch Operator,
you need to set Elasticsearch to the <em>unmanaged</em> state.</p>
</div>
<div class="sect3">
<h4 id="efk-logging-management-state-changing-efk-logging-curator">Changing the cluster logging management state</h4>
<div class="paragraph">
<p>In managed state, the Cluster Logging Operator (CLO) responds to changes in the Cluster Logging Custom Resource (CR)
and attempts to update the cluster to match the CR.</p>
</div>
<div class="paragraph">
<p>In an unmanaged state, the CLO does not respond to changes in the CR.
The administrator assumes full control of individual component configurations
and upgrades when in unmanaged state. If you make changes to a CR in managed state,
the Cluster Logging Operator can revert those changes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>An unmanaged deployment does not receive updates until the cluster logging is placed back into a managed state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>The Cluster Logging Operator must be installed.</p>
</li>
<li>
<p>Have the name of the custom logging CR, in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get -n openshift-logging ClusterLogging

NAME      AGE
example   48m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Edit the Cluster Logging Custom Resource (CR) in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">$ oc edit ClusterLogging instance

apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"

....

spec:
  managementState: "Managed" <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the management state as <code>Managed</code> or <code>Unmanaged</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-management-state-changing-es-efk-logging-curator">Changing the Elasticsearch management state</h4>
<div class="paragraph">
<p>In managed state, the Elasticsearch Operator (EO) responds to changes in the Elaticsearch Custom Resource (CR)
and attempts to update the Elasticsearch cluster to match the CR.</p>
</div>
<div class="paragraph">
<p>In an unmanaged state, the EO does not respond to changes in the CR.
The administrator assumes full control of individual component configurations
and upgrades when in unmanaged state. If you make changes to a CR in managed state,
the Elasticsearch Operator can revert those changes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>An unmanaged Elasticsearch deployment does not receive updates until the Elasticsearch is placed back into a managed state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>The Elasticsearch Operator must be installed.</p>
</li>
<li>
<p>Have the name of the Elasticsearch CR, in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get -n openshift-logging Elasticsearch
NAME            AGE
elasticsearch   28h</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Edit the Elasticsearch Custom Resource (CR) in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">$ oc edit Elasticsearch elasticsearch

apiVersion: logging.openshift.io/v1alpha1
kind: Elasticsearch
metadata:
  name: elasticsearch


....

spec:
  managementState: "Managed" <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the management state as <code>Managed</code> or <code>Unmanaged</code>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-cluster-logging">Configuring cluster logging</h3>
<div class="paragraph">
<p>Cluster logging is configurable using a Cluster Logging Custom Resource (CR) deployed
in the <code>openshift-logging</code> project.</p>
</div>
<div class="paragraph">
<p>The Cluster Logging Operator watches for changes to Cluster Logging CRs,
creates any missing logging components, and adjusts the logging deployment accordingly.</p>
</div>
<div class="paragraph">
<p>The Cluster Logging CR is based on the Cluster Logging Custom Resource Definition (CRD), which defines a complete cluster logging deployment
and includes all the components of the logging stack to collect, store and visualize logs.</p>
</div>
<div class="listingblock">
<div class="title">Sample Cluster Logging Custom Resource (CR)</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: logging.openshift.io/v1
kind: ClusterLogging
metadata:
  creationTimestamp: '2019-03-20T18:07:02Z'
  generation: 1
  name: instance
  namespace: openshift-logging
spec:
  collection:
    logs:
      fluentd:
        resources: null
      rsyslog:
        resources: null
      type: fluentd
  curation:
    curator:
      resources: null
      schedule: 30 3 * * *
    type: curator
  logStore:
    elasticsearch:
      nodeCount: 3
      redundancyPolicy: SingleRedundancy
      resources:
        limits:
          cpu:
          memory:
        requests:
          cpu:
          memory:
      storage: {}
    type: elasticsearch
  managementState: Managed
  visualization:
    kibana:
      proxy:
        resources: null
      replicas: 1
      resources: null
    type: kibana</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can configure the following for cluster logging:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can place cluster logging into an unmanaged state that allows an administrator to assume full control of individual
component configurations and upgrades.</p>
</li>
<li>
<p>You can overwrite the image for each cluster logging component by modifying the appropriate
environment variable in the <code>cluster-logging-operator</code> Deployment.</p>
</li>
<li>
<p>You can specify specific nodes for the logging components using node selectors.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="efk-logging-configuring-image-about-efk-logging-configuring">Understanding the cluster logging component images</h4>
<div class="paragraph">
<p>There are several components in cluster logging, each one implemented with one
or more images.  Each image is specified by an environment variable
defined in the <strong>cluster-logging-operator</strong> deployment in the <strong>openshift-logging</strong> project and should not be changed.</p>
</div>
<div class="paragraph">
<p>You can view the images by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc -n openshift-logging set env deployment/cluster-logging-operator --list | grep _IMAGE

ELASTICSEARCH_IMAGE=quay.io/openshift/origin-logging-elasticsearch5:latest <b class="conum">(1)</b>
FLUENTD_IMAGE=quay.io/openshift/origin-logging-fluentd:latest <b class="conum">(2)</b>
KIBANA_IMAGE=quay.io/openshift/origin-logging-kibana5:latest <b class="conum">(3)</b>
CURATOR_IMAGE=quay.io/openshift/origin-logging-curator5:latest <b class="conum">(4)</b>
OAUTH_PROXY_IMAGE=quay.io/openshift/origin-oauth-proxy:latest <b class="conum">(5)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><strong>ELASTICSEARCH_IMAGE</strong> deploys Elasticsearch.</p>
</li>
<li>
<p><strong>FLUENTD_IMAGE</strong> deploys Fluentd.</p>
</li>
<li>
<p><strong>KIBANA_IMAGE</strong> deploys Kibana.</p>
</li>
<li>
<p><strong>CURATOR_IMAGE</strong> deploys Curator.</p>
</li>
<li>
<p><strong>OAUTH_PROXY_IMAGE</strong> defines OAUTH for OpenShift Container Platform.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The values might be different depending on your environment.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-configuring-node-selector-efk-logging-configuring">Specifying a node for cluster logging components using node selectors</h4>
<div class="paragraph">
<p>Each component specification allows the component to target a specific node.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Edit the the Cluster Logging Custom Resource (CR) in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">$ oc edit ClusterLogging instance

apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "nodeselector"
spec:
  managementState: "Managed"
  logStore:
    type: "elasticsearch"
    elasticsearch:
      nodeSelector:  <b class="conum">(1)</b>
        logging: es
      nodeCount: 1
      resources:
        limits:
          memory: 2Gi
        requests:
          cpu: 200m
          memory: 2Gi
      storage:
        size: "20G"
        storageClassName: "gp2"
      redundancyPolicy: "ZeroRedundancy"
  visualization:
    type: "kibana"
    kibana:
      nodeSelector:  <b class="conum">(2)</b>
        logging: kibana
      replicas: 1
  curation:
    type: "curator"
    curator:
      nodeSelector:  <b class="conum">(3)</b>
        logging: curator
      schedule: "*/10 * * * *"
  collection:
    logs:
      type: "fluentd"
      fluentd:
        nodeSelector:  <b class="conum">(4)</b>
        logging: fluentd</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Node selector for Elasticsearch.</p>
</li>
<li>
<p>Node selector for Kibana.</p>
</li>
<li>
<p>Node selector for Curator.</p>
</li>
<li>
<p>Node selector for Fluentd.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-elasticsearch">Configuring Elasticsearch in OpenShift Enterprise</h3>
<div class="paragraph">
<p>OpenShift Enterprise uses Elasticsearch (ES) to store and organize the log data.</p>
</div>
<div class="paragraph">
<p>You can add and remove nodes, configure storage for your Elasticsearch cluster, and
define how shards are replicated across data nodes in the cluster, from full replication to no replication.</p>
</div>
<div class="paragraph">
<p>Elasticsearch is a memory-intensive application. Each Elasticsearch node needs 16G of memory for both memory requests and CPU limits
unless you specify otherwise the ClusterLogging custom resource. The initial set of OpenShift Enterprise nodes might not be large enough
to support the Elasticsearch cluster. You must add additional nodes to the  OpenShift Enterprise cluster to run with the recommended
or higher memory. Each Elasticsearch node can operate with a lower memory setting though this is not recommended for production deployments.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Procedures in this topic require your cluster to be in an unmanaged state. For more information, see Changing the cluster logging management state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-limits-efk-logging-elasticsearch">Configuring Elasticsearch CPU and memory limits</h4>
<div class="paragraph">
<p>Each component specification allows for adjustments to both the CPU and memory limits.
You should not need to manually adjust these values as the Elasticsearch
Operator sets values sufficient for your environment.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Edit the Cluster Logging Custom Resource (CR) in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">$ oc edit ClusterLogging instance

apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
....
spec:
    logStore:
      type: "elasticsearch"
      elasticsearch:
        resources: <b class="conum">(1)</b>
          limits:
            cpu: "4000m"
            memory: "4Gi"
          requests:
            cpu: "100m"
            memory: "1Gi"</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the CPU and memory limits as needed. If you leave these values blank,
the Elasticsearch Operator sets default values that should be sufficient for most deployments.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-ha_efk-logging-elasticsearch">Configuring Elasticsearch replication policy</h4>
<div class="paragraph">
<p>You can define how Elasticsearch shards are replicated across data nodes in the cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>FullRedundancy</strong>. Elasticsearch fully replicates the primary shards for each index
to every data node. This provides the highest safety, but at the cost of the highest amount of disk required and the poorest performance.</p>
</li>
<li>
<p><strong>MultipleRedundancy</strong>. Elasticsearch fully replicates the primary shards for each index to half of the data nodes.
This provides a good tradeoff between safety and performance.</p>
</li>
<li>
<p><strong>SingleRedundancy</strong>. Elasticsearch makes one copy of the primary shards for each index.
Logs are always available and recoverable as long as at least two data nodes exist.
Better performance than MultipleRedundancy, when using 5 or more nodes.  You cannot
apply this policy on deployments of single Elasticsearch node.</p>
</li>
<li>
<p><strong>ZeroRedundancy</strong>. Elasticsearch does not make copies of the primary shards.
Logs might be unavailable or lost in the event a node is down or fails.
Use this mode when you are more concerned with performance than safety, or have
implemented your own disk/PVC backup/restore strategy.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Edit the Cluster Logging Custom Resource (CR) in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"

....

spec:
  logStore:
    type: "elasticsearch"
    elasticsearch:
      redundancyPolicy: "SingleRedundancy" <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify a redundancy policy for the shards. The change is applied upon saving the changes.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-storage-efk-logging-elasticsearch">Configuring Elasticsearch storage</h4>
<div class="paragraph">
<p>Elasticsearch requires persistent storage.  The faster the storage, the faster the Elasticsearch performance is.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the  Cluster Logging CR to specify that each data node in the cluster is bound to a Persistent Volume Claim. This example requests 200G of General Purpose SSD (gp2) storage.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"

....

 spec:
    logStore:
      type: "elasticsearch"
      elasticsearch:
        nodeCount: 3
        storage:
          storageClass:
            name: "gp2"
            size: "200G"</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This example specifies each data node in the cluster is bound to a Persistent Volume Claim that requests "200G" of AWS General Purpose SSD (gp2) storage.</p>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-persistent-storage-empty-efk-logging-elasticsearch">Configuring Elasticsearch for emptyDir storage</h4>
<div class="paragraph">
<p>You can use emptyDir with Elasticsearch, which creates an ephemeral
deployment in which all of a pod&#8217;s data is lost upon restart.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>When using emptyDir, you will lose data if Elasticsearch is restarted or redeployed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the  Cluster Logging CR to specify emptyDir:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml"> spec:
    logStore:
      type: "elasticsearch"
      elasticsearch:
        nodeCount: 3
        storage: {}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-add-remove-efk-logging-elasticsearch">Scaling your Elasticsearch cluster</h4>
<div class="paragraph">
<p>You can scale the number of data nodes in Elasticsearch.</p>
</div>
<div class="paragraph">
<p>For example, if you want to increase redundancy, and use the <code>FullRedundancy</code> or <code>MultipleRedundancy</code> policy, you can scale up the cluster to increase the number of shard replicas in your cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The Elasticsearch Operator does not allow more than three Elasticsearch master nodes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
<li>
<p>If needed, get the name of the Elasticsearch Custom Resource in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To scale up the cluster, edit the Elasticsearch Custom Resource (CR) to add a number of nodes of a specific type:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
...
- nodeCount: 1  <b class="conum">(1)</b>
  resources: {}
  roles:
    - data
  storage: {}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the number of nodes of this type.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, to add two data-only nodes to your cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">- nodeCount: 2  (1)
  resources: {}
  roles:
    - data
  storage: {}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-exposing-efk-logging-elasticsearch">Exposing Elasticsearch as a route</h4>
<div class="paragraph">
<p>By default, Elasticsearch deployed with cluster logging is not
accessible from outside the logging cluster. You can enable a route with re-encryption termination
for external access to Elasticsearch for those tools that want to access its data.</p>
</div>
<div class="paragraph">
<p>Externally, you can access Elasticsearch by creating a reencrypt route, your OpenShift Enterprise token and the installed
Elasticsearch CA certificate. The request must contain three HTTP headers:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Authorization: Bearer $token
X-Proxy-Remote-User: $username
X-Forwarded-For: $ip_address</pre>
</div>
</div>
<div class="paragraph">
<p>Internally, you can access Elastiscearch using the Elasticsearch cluster IP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get service elasticsearch -o jsonpath={.spec.clusterIP} -n openshift-logging
172.30.183.229

oc get service elasticsearch
NAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
elasticsearch   ClusterIP   172.30.183.229   &lt;none&gt;        9200/TCP   22h

$ oc exec elasticsearch-clientdatamaster-0-1-858c8f-hhnkn -- curl -tlsv1.2 --insecure -H "Authorization: Bearer ${token}" "https://172.30.183.229:9200/_cat/health"

  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    29  100    29    0     0    108      0 --:--:-- --:--:-- --:--:--   108</pre>
</div>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>You must have access to the project in order to be able to access to the logs. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc login &lt;user1&gt;
$ oc new-project &lt;user1project&gt;
$ oc new-app &lt;httpd-example&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To expose Elasticsearch externally:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change to the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc project openshift-logging</pre>
</div>
</div>
</li>
<li>
<p>Use the following command to extract the CA certificate from Elasticsearch and write to the <strong><em>admin-ca</em></strong> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc extract secret/elasticsearch --to=. --keys=admin-ca

admin-ca</pre>
</div>
</div>
</li>
<li>
<p>Create the route for the Elasticsearch service as a YAML file:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a YAML file with the following:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: elasticsearch
  namespace: openshift-logging
spec:
  host:
  to:
    kind: Service
    name: elasticsearch
  tls:
    termination: reencrypt
    destinationCACertificate: | <b class="conum">(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add the Elasticsearch CA ceritifcate or use the command in the next step. You do not need to set the <code>spec.tls.key</code>, <code>spec.tls.certificate</code>, and <code>spec.tls.caCertificate</code> parameters
required by some reencrypt routes.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Run the following command to add the Elasticsearch CA certificate to the route YAML you created:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">cat ./admin-ca | sed -e "s/^/      /" &gt;&gt; &lt;file-name&gt;.yaml</pre>
</div>
</div>
</li>
<li>
<p>Run the following command to create the route:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc create -f &lt;file-name&gt;.yaml

route.route.openshift.io/elasticsearch created</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Check that the Elasticsearch service is exposed:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Get the token of this ServiceAccount to be used in the request:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ token=$(oc whoami -t)</pre>
</div>
</div>
</li>
<li>
<p>Set the <strong>elasticsearch</strong> route you created as an environment variable.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ routeES=`oc get route elasticsearch -o jsonpath={.spec.host}`</pre>
</div>
</div>
</li>
<li>
<p>To verify the route was successfully created, run the following command that accesses Elasticsearch through the exposed route:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">curl -tlsv1.2 --insecure -H "Authorization: Bearer ${token}" "https://${routeES}/.operations.*/_search?size=1" | jq</pre>
</div>
</div>
<div class="paragraph">
<p>The response appears similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   944  100   944    0     0     62      0  0:00:15  0:00:15 --:--:--   204
{
  "took": 441,
  "timed_out": false,
  "_shards": {
    "total": 3,
    "successful": 3,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": 89157,
    "max_score": 1,
    "hits": [
      {
        "_index": ".operations.2019.03.15",
        "_type": "com.example.viaq.common",
        "_id": "ODdiNWIyYzAtMjg5Ni0TAtNWE3MDY1MjMzNTc3",
        "_score": 1,
        "_source": {
          "_SOURCE_MONOTONIC_TIMESTAMP": "673396",
          "systemd": {
            "t": {
              "BOOT_ID": "246c34ee9cdeecb41a608e94",
              "MACHINE_ID": "e904a0bb5efd3e36badee0c",
              "TRANSPORT": "kernel"
            },
            "u": {
              "SYSLOG_FACILITY": "0",
              "SYSLOG_IDENTIFIER": "kernel"
            }
          },
          "level": "info",
          "message": "acpiphp: Slot [30] registered",
          "hostname": "localhost.localdomain",
          "pipeline_metadata": {
            "collector": {
              "ipaddr4": "10.128.2.12",
              "ipaddr6": "fe80::xx:xxxx:fe4c:5b09",
              "inputname": "fluent-plugin-systemd",
              "name": "fluentd",
              "received_at": "2019-03-15T20:25:06.273017+00:00",
              "version": "1.3.2 1.6.0"
            }
          },
          "@timestamp": "2019-03-15T20:00:13.808226+00:00",
          "viaq_msg_id": "ODdiNWIyYzAtMYTAtNWE3MDY1MjMzNTc3"
        }
      }
    ]
  }
}</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-rules-efk-logging-elasticsearch">About Elasticsearch alerting rules</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 60%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Alert</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Severity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticsearchClusterNotHealthy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster health status has been RED for at least 2m. Cluster does not accept writes, shards may be missing or master
 node hasn&#8217;t been elected yet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">critical</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticsearchClusterNotHealthy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster health status has been YELLOW for at least 20m. Some shard replicas are not allocated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">warning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticsearchBulkRequestsRejectionJumps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High Bulk Rejection Ratio at node in cluster. This node may not be keeping up with the indexing speed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">warning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticsearchNodeDiskWatermarkReached</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Low Watermark Reached at node in cluster. Shards can not be allocated to this node anymore. You should
consider adding more disk to the node.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alert</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticsearchNodeDiskWatermarkReached</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk High Watermark Reached at node in cluster. Some shards will be re-allocated to different
nodes if possible. Make sure more disk space is added to the node or drop old indices allocated to this node.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">high</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticsearchNodeDiskLowForSegmentMerges</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free disk at node in  cluster may be low for optimal segment merges</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">warning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticsearchJVMHeapUseHigh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JVM Heap usage on the node in cluster is &lt;value&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alert</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AggregatedLoggingSystemCPUHigh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System CPU usage on the node in cluster is &lt;value&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alert</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticsearchProcessCPUHigh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ES process CPU usage on the node in cluster is &lt;value&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alert</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-status-efk-logging-elasticsearch">Viewing Elasticsearch status</h4>
<div class="paragraph">
<p>You can view the status of your Elasticsearch cluster.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Change to the <code>openshift-logging</code> project.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc project openshift-logging</pre>
</div>
</div>
</li>
<li>
<p>To view the Elasticsearch cluster status:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Get the name of the Elasticsearch instance:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get Elasticsearch

NAME            AGE
elasticsearch   5h9m</pre>
</div>
</div>
</li>
<li>
<p>Get the Elasticsearch status:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get Elasticsearch &lt;Elasticsearch-instance&gt; -o yaml</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get Elasticsearch elasticsearch -n openshift-logging -o yaml</pre>
</div>
</div>
<div class="paragraph">
<p>The output includes information similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">status: <b class="conum">(1)</b>
  clusterHealth: green <b class="conum">(2)</b>
  conditions: <b class="conum">(3)</b>
      .....
  nodes:  <b class="conum">(4)</b>
      .....
  pods: <b class="conum">(5)</b>
      .....
  shardAllocationEnabled: "True" <b class="conum">(6)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>In the output, the cluster status fields appear in the <code>status</code> stanza.</p>
</li>
<li>
<p>The status of the Elasticsearch cluster, <code>green</code>, <code>red</code>, <code>yellow</code>.</p>
</li>
<li>
<p>Any status conditions, if present. The Elasticsearch cluster status indicates the reasons from the scheduler if a pod could not be placed. Any events related to the following conditions are shown:</p>
<div class="ulist">
<ul>
<li>
<p>Container Waiting for both the Elasticsearch and proxy containers,</p>
</li>
<li>
<p>Container Terminated for both the Elasticsearch and proxy containers,</p>
</li>
<li>
<p>Pod unschedulable.
Also, a condition is shown if the node storage passes the high or low watermark thresholds.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The Elasticsearch nodes in the cluster, with <code>upgradeStatus</code>.</p>
</li>
<li>
<p>The Elasticsearch client, data, and master pods in the cluster, listed under 'failed`, <code>notReady</code> or <code>ready</code> state.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="efk-logging-elasticsearch-status-message-efk-logging-elasticsearch">Example condition messages</h5>
<div class="paragraph">
<p>The following are examples of some condition messages from the <code>Status.Nodes</code> section of the Elasticsearch instance.</p>
</div>
<div class="paragraph">
<p>This status message indicates a node has exceeded the configured low watermark and no shard will be allocated to this node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  nodes:
  - conditions:
    - lastTransitionTime: 2019-03-15T15:57:22Z
      message: Disk storage usage for node is 27.5gb (36.74%). Shards will be not
        be allocated on this node.
      reason: Disk Watermark Low
      status: "True"
      type: NodeStorage
    deploymentName: example-elasticsearch-clientdatamaster-0-1
    upgradeStatus: {}</pre>
</div>
</div>
<div class="paragraph">
<p>This status message indicates a node has exceeded the configured high watermark and shard will be relocated to other nodes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  nodes:
  - conditions:
    - lastTransitionTime: 2019-03-15T16:04:45Z
      message: Disk storage usage for node is 27.5gb (36.74%). Shards will be relocated
        from this node.
      reason: Disk Watermark High
      status: "True"
      type: NodeStorage
    deploymentName: example-elasticsearch-clientdatamaster-0-1
    upgradeStatus: {}</pre>
</div>
</div>
<div class="paragraph">
<p>This status message shows the Elasticsearch node selector in the CR does not match any nodes in the cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">    nodes:
    - conditions:
      - lastTransitionTime: 2019-04-10T02:26:24Z
        message: '0/8 nodes are available: 8 node(s) didn''t match node selector.'
        reason: Unschedulable
        status: "True"
        type: Unschedulable</pre>
</div>
</div>
<div class="paragraph">
<p>This status message indicates that the Elasticsearch CR uses a non-existent PVC.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">   nodes:
   - conditions:
     - last Transition Time:  2019-04-10T05:55:51Z
       message:               pod has unbound immediate PersistentVolumeClaims (repeated 5 times)
       reason:                Unschedulable
       status:                True
       type:                  Unschedulable</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-elasticsearch-status-example-efk-logging-elasticsearch">Viewing Elasticsearch component status</h4>
<div class="paragraph">
<p>You can view the status for a number of Elasticsearch components.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Elasticsearch indices</dt>
<dd>
<p>You can view the status of the Elasticsearch indices.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the name of an Elasticsearch pod:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get pods --selector component=elasticsearch -o name

pod/elasticsearch-cdm-1godmszn-1-6f8495-vp4lw
pod/elasticsearch-cdm-1godmszn-2-5769cf-9ms2n
pod/elasticsearch-cdm-1godmszn-3-f66f7d-zqkz7</pre>
</div>
</div>
</li>
<li>
<p>Get the status of the indices:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec elasticsearch-cdm-1godmszn-1-6f8495-vp4lw -- indices

Defaulting container name to elasticsearch.
Use 'oc describe pod/elasticsearch-cdm-1godmszn-1-6f8495-vp4lw -n openshift-logging' to see all of the containers in this pod.
Wed Apr 10 05:42:12 UTC 2019
health status index                                            uuid                   pri rep docs.count docs.deleted store.size pri.store.size
red    open   .kibana.647a750f1787408bf50088234ec0edd5a6a9b2ac N7iCbRjSSc2bGhn8Cpc7Jg   2   1
green  open   .operations.2019.04.10                           GTewEJEzQjaus9QjvBBnGg   3   1    2176114            0       3929           1956
green  open   .operations.2019.04.11                           ausZHoKxTNOoBvv9RlXfrw   3   1    1494624            0       2947           1475
green  open   .kibana                                          9Fltn1D0QHSnFMXpphZ--Q   1   1          1            0          0              0
green  open   .searchguard                                     chOwDnQlSsqhfSPcot1Yiw   1   1          5            1          0              0</pre>
</div>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Elasticsearch pods</dt>
<dd>
<p>You can view the status of the Elasticsearch pods.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the name of a pod:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get pods --selector component=elasticsearch -o name

pod/elasticsearch-cdm-1godmszn-1-6f8495-vp4lw
pod/elasticsearch-cdm-1godmszn-2-5769cf-9ms2n
pod/elasticsearch-cdm-1godmszn-3-f66f7d-zqkz7</pre>
</div>
</div>
</li>
<li>
<p>Get the status of a pod:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc describe pod elasticsearch-cdm-1godmszn-1-6f8495-vp4lw</pre>
</div>
</div>
<div class="paragraph">
<p>The output includes the following status information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">....
Status:             Running

....

Containers:
  elasticsearch:
    Container ID:   cri-o://b7d44e0a9ea486e27f47763f5bb4c39dfd2
    State:          Running
      Started:      Mon, 08 Apr 2019 10:17:56 -0400
    Ready:          True
    Restart Count:  0
    Readiness:  exec [/usr/share/elasticsearch/probe/readiness.sh] delay=10s timeout=30s period=5s #success=1 #failure=3

....

  proxy:
    Container ID:  cri-o://3f77032abaddbb1652c116278652908dc01860320b8a4e741d06894b2f8f9aa1
    State:          Running
      Started:      Mon, 08 Apr 2019 10:18:38 -0400
    Ready:          True
    Restart Count:  0

....

Conditions:
  Type              Status
  Initialized       True
  Ready             True
  ContainersReady   True
  PodScheduled      True

....

Events:          &lt;none&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Elasticsearch deployment configuration</dt>
<dd>
<p>You can view the status of the Elasticsearch deployment configuration.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the name of a deployment configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get deployment --selector component=elasticsearch -o name

deployment.extensions/elasticsearch-cdm-1gon-1
deployment.extensions/elasticsearch-cdm-1gon-2
deployment.extensions/elasticsearch-cdm-1gon-3</pre>
</div>
</div>
</li>
<li>
<p>Get the deployment configuration status:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc describe deployment elasticsearch-cdm-1gon-1</pre>
</div>
</div>
<div class="paragraph">
<p>The output includes the following status information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">....
  Containers:
   elasticsearch:
    Image:       quay.io/openshift/origin-logging-elasticsearch5:latest
    Readiness:  exec [/usr/share/elasticsearch/probe/readiness.sh] delay=10s timeout=30s period=5s #success=1 #failure=3

....

Conditions:
  Type           Status   Reason
  ----           ------   ------
  Progressing    Unknown  DeploymentPaused
  Available      True     MinimumReplicasAvailable

....

Events:          &lt;none&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Elasticsearch ReplicaSet</dt>
<dd>
<p>You can view the status of the Elasticsearch ReplicaSet.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the name of a replica set:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get replicaSet --selector component=elasticsearch -o name

replicaset.extensions/elasticsearch-cdm-1gon-1-6f8495
replicaset.extensions/elasticsearch-cdm-1gon-2-5769cf
replicaset.extensions/elasticsearch-cdm-1gon-3-f66f7d</pre>
</div>
</div>
</li>
<li>
<p>Get the status of the replica set:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc describe replicaSet elasticsearch-cdm-1gon-1-6f8495</pre>
</div>
</div>
<div class="paragraph">
<p>The output includes the following status information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">....
  Containers:
   elasticsearch:
    Image:       quay.io/openshift/origin-logging-elasticsearch5:latest
    Readiness:  exec [/usr/share/elasticsearch/probe/readiness.sh] delay=10s timeout=30s period=5s #success=1 #failure=3

....

Events:          &lt;none&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-kibana">Configuring Kibana in OpenShift Enterprise</h3>
<div class="paragraph">
<p>OpenShift Enterprise uses Kibana to display the log data collected by Fluentd and indexed by Elasticsearch.</p>
</div>
<div class="paragraph">
<p>You can scale Kibana for redundancy and configure the CPU and memory for your Kibana nodes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Procedures in this topic require your cluster to be in an unmanaged state. For more information, see <em>Changing the cluster logging management state</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="efk-logging-kibana-limits-efk-logging-kibana">Configure Kibana CPU and memory limits</h4>
<div class="paragraph">
<p>Each component specification allows for adjustments to both the CPU and memory limits.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Edit the Cluster Logging Custom Resource (CR) in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">$ oc edit ClusterLogging instance

apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"

....

spec:
visualization:
   type: "kibana"
   kibana:
     replicas: 1
     resources: <b class="conum">(1)</b>
      limits:
        cpu:
     memory:
       requests:
        cpu:
        memory:</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the CPU and memory limits as needed.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-kibana-scaling-efk-logging-kibana">Scaling Kibana for redundancy</h4>
<div class="paragraph">
<p>You can scale the Kibana deployment for redundancy.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Set cluster logging to the unmanaged state. In managed state, the Cluster Logging Operator reverts changes made to the <code>logging-curator</code> configuration map.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Edit the Cluster Logging Custom Resource (CR) in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">$ oc edit ClusterLogging instance

apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"

....

spec:
    visualization:
      type: "kibana"
      kibana:
        replicas: 1 <b class="conum">(1)</b>
        resources:
        proxy:
          resources: <b class="conum">(2)</b>
            limits:
              cpu:
              memory:
            requests:
              cpu:
              memory:</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the number of Kibana nodes.</p>
</li>
<li>
<p>Specify the CPU and memory limits for each node.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-kibana-visualize-efk-logging-kibana">Installing the Kibana Visualize tool</h4>
<div class="paragraph">
<p>Kibana&#8217;s <strong>Visualize</strong> tab enables you to create visualizations and dashboards for
monitoring container logs, allowing administrator users (<code>cluster-admin</code> or
<code>cluster-reader</code>) to view logs by deployment, namespace, pod, and container.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To load dashboards and other Kibana UI objects:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If necessary, get the Kibana route, which is created by default upon installation
of the Cluster Logging Operator:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get routes -n openshift-logging

NAMESPACE                  NAME                       HOST/PORT                                                            PATH     SERVICES                   PORT    TERMINATION          WILDCARD
openshift-logging          kibana                     kibana-openshift-logging.apps.openshift.com                                   kibana                     &lt;all&gt;   reencrypt/Redirect   None</pre>
</div>
</div>
</li>
<li>
<p>Get the name of your Elasticsearch pods.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get pods -l component=elasticsearch

NAME                                          READY   STATUS    RESTARTS   AGE
elasticsearch-clientdatamaster-0-1-97c-2dx    2/2     Running   0          3h25m
elasticsearch-clientdatamaster-0-2-676-fb9    2/2     Running   0          3h25m
elasticsearch-clientdatamaster-0-3-847-4nr    2/2     Running   0          3h25m</pre>
</div>
</div>
</li>
<li>
<p>Create the necessary per-user configuration that this procedure requires:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Log into the Kibana dashboard as the user you want to add the dashboards to.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">https://kibana-openshift-logging.apps.openshift.com <b class="conum">(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Where the URL is Kibana route.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If the <strong>Authorize Access</strong> page appears, select all permissions and click <strong>Allow selected permissions</strong>.</p>
</li>
<li>
<p>Log out of the Kibana dashboard.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Run the following command from the project where the pod is located using the
name of any of your Elastiscearch pods:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec &lt;es-pod&gt; -- es_load_kibana_ui_objects &lt;user-name&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec elasticsearch-clientdatamaster-0-3-847-4nr -- es_load_kibana_ui_objects &lt;user-name&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-curator">Curation of Elasticsearch Data</h3>
<div class="paragraph">
<p>The Elasticsearch Curator tool performs scheduled maintenance operations on a per-project basis. Curator performs actions daily based on its configuration. Only one Curator Pod is
recommended per Elasticsearch cluster.</p>
</div>
<div class="paragraph">
<p>The cluster logging installation creates a Curator configuration map, <code>curator</code> in the <code>openshift-logging</code> project, which incorporates the Curator configuration file, <strong><em>curator5.yaml</em></strong> and an OpenShift Enterprise custom configuration file, <strong><em>config.yaml</em></strong>.</p>
</div>
<div class="listingblock">
<div class="title">Sample default Curator configuration map</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: curator
  namespace: openshift-logging
  selfLink: /api/v1/namespaces/openshift-logging/configmaps/curator
  uid: f8f1055b-40e1-11e9-92ff-0e8c954f62c0
  resourceVersion: '57349'
  creationTimestamp: '2019-03-07T14:04:49Z'
  ownerReferences:
    - apiVersion: logging.openshift.io/v1
      kind: ClusterLogging
      name: instance
      uid: f598344e-40e1-11e9-92ff-0e8c954f62c0
      controller: true
data:
  actions.yaml: &gt;
    # ---
    # Remember, leave a key empty if there is no value.  None will be a string,
    # not a Python "NoneType"
    #
    # Also remember that all examples have 'disable_action' set to True.  If you
    # want to use this action as a template, be sure to set this to False after
    # copying it.
    # actions:
    #   1:
    #     action: delete_indices
    #     description: &gt;-
    #       Delete .operations indices older than 30 days.
    #       Ignore the error if the filter does not
    #       result in an actionable list of indices (ignore_empty_list).
    #       See
    https://www.elastic.co/guide/en/elasticsearch/client/curator/5.2/ex_delete_indices.html
    #     options:
    #       # Swallow curator.exception.NoIndices exception
    #       ignore_empty_list: True
    #       # In seconds, default is 300
    #       timeout_override: ${CURATOR_TIMEOUT}
    #       # Don't swallow any other exceptions
    #       continue_if_exception: False
    #       # Optionally disable action, useful for debugging
    #       disable_action: False
    #     # All filters are bound by logical AND
    #     filters:
    #     - filtertype: pattern
    #       kind: regex
    #       value: '^\.operations\..*$'
    #       exclude: False
    #     - filtertype: age
    #       # Parse timestamp from index name
    #       source: name
    #       direction: older
    #       timestring: '%Y.%m.%d'
    #       unit: days
    #       unit_count: 30
    #       exclude: False
  config.yaml: |
    # Logging example curator config file
    # uncomment and use this to override the defaults from env vars
    #.defaults:
    #  delete:
    #    days: 30
    # to keep ops logs for a different duration:
    #.operations:
    #  delete:
    #    weeks: 8
    # example for a normal project
    #myapp:
    #  delete:
    #    weeks: 1
  curator5.yaml: |
    ---
    client:
      hosts:
      - ${ES_HOST}
      port: ${ES_PORT}
      use_ssl: True
      certificate: ${ES_CA}
      client_cert: ${ES_CLIENT_CERT}
      client_key: ${ES_CLIENT_KEY}
      ssl_no_validate: False
      timeout: ${CURATOR_TIMEOUT}
      master_only: False
    logging:
      loglevel: ${CURATOR_LOG_LEVEL}
      logformat: default
      blacklist: ['elasticsearch', 'urllib3']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Optionally, you can use the actions file, <strong><em>actions.yaml</em></strong>, directly. Editing this file allows you to use any action that Curator has available to it to be run periodically. However, this is only recommended for advanced users as modifying the file can be destructive to the cluster and can cause removal of required indices/settings from Elasticsearch. Most users only need to modify the Curator configuration map and never edit the <strong>action file</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Procedures in this topic require your cluster to be in an unmanaged state. For more information, see <em>Changing the cluster logging management state</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="efk-logging-curator-schedule-efk-logging-curator">Configuring the Curator schedule</h4>
<div class="paragraph">
<p>You can specify the schedule for Curator using the cluster logging Custom Reosurce
created by the cluster logging installation.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To configure the Curator schedule, edit the Cluster Logging Custom Resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit clusterlogging instance</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "instance"

....

  curation:
    curator:
      resources: null
      schedule: 30 3 * * * <b class="conum">(1)</b>
    type: curator</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the schedule for Curator in [cron format](<a href="https://en.wikipedia.org/wiki/Cron" class="bare">https://en.wikipedia.org/wiki/Cron</a>).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The time zone is set based on the host node where the Curator pod runs.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can suspend a Curator CronJob and resume the CronJob using the following commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Suspend a cronjob:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">$ oc patch cronjob logging-curator -p '{"spec":{"suspend":true}}'</code></pre>
</div>
</div>
</li>
<li>
<p>Resume a CronJob:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-bash" data-lang="bash">oc patch cronjob logging-curator -p '{"spec":{"suspend":false}}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="configuration-cronjob-efk-logging-curator">Modifying the Curator configuration</h4>
<div class="paragraph">
<p>You can configure your ops and non-ops Curator instances using the Cluster Logging Custom Resource
created by the Cluster Logging Operator installation.</p>
</div>
<div class="paragraph">
<p>You can edit or replace this ConfigMap to reconfigure Curator.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Any <code>.operations</code> configurations are in the same location as your application logs configurations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>Set cluster logging to the unmanaged state.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To configure Curator, edit the <code>curator</code> configuration map in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit configmap/curator</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">client:
  hosts:
    - 127.0.0.1 <b class="conum">(1)</b>
  port: 9200  <b class="conum">(2)</b>
  url_prefix: <b class="conum">(3)</b>
  use_ssl: False <b class="conum">(4)</b>
  certificate: <b class="conum">(5)</b>
  client_cert: <b class="conum">(6)</b>
  client_key: <b class="conum">(7)</b>
  ssl_no_validate: False <b class="conum">(8)</b>
  http_auth: <b class="conum">(9)</b>
  timeout: 30  <b class="conum">(10)</b>
  master_only: False <b class="conum">(11)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the hosts where Curator will run.</p>
</li>
<li>
<p>Specify the port number of the Elasticsearch cluster, by default 9200.</p>
</li>
<li>
<p>Optionally, specify a url_prefix to the appropriate value, if needed. For example, if you connect to your Elasticsearch cluster through a proxy and need a URL as opposed to <a href="http://localhost:9200" class="bare">http://localhost:9200</a>.</p>
</li>
<li>
<p>Optionally, specify <code>True</code>, 'False` or left empty. If access to your Elasticsearch instance is protected by SSL encryption, set to <code>True</code>.</p>
</li>
<li>
<p>Optionally, specify a file path to your CA certificate, in single quotes, to validate the SSL certificate used by Elasticsearch or leave empty.</p>
</li>
<li>
<p>Optionally, specify a file path to an SSL client cert file to authenticate to Elasticsearch. The file may contain both an SSL client certificate and an SSL key, in which case client_key is not used. If specifying client_cert, and the file specified does not also contain the key, use client_key to specify the file containing the SSL key. The file must be in PEM format, and the key part, if used, must be an unencrypted key in PEM format as well. Leave empty if not using a SSL client cert.</p>
</li>
<li>
<p>Optionally, specify an SSL client key file to authenticate to Elasticsearch. If using client_cert and the file specified does not also contain the key, use client_key to specify the file containing the SSL key. The key file must be an unencrypted key in PEM format. Leave empty if not using a SSL client cert.</p>
</li>
<li>
<p>Set to <code>True</code> to disable SSL certificate verification. Setting ssl_no_validate to True will likely result in a warning message that your SSL certificates are not trusted. This is expected behavior.</p>
</li>
<li>
<p>Optionally, specify authentication credentials, such as <code>user:pass</code>, or leave empty.</p>
</li>
<li>
<p>Optionally, specify the default client connection timeout value, by default 30 seconds.</p>
</li>
<li>
<p>Optionally, set to <code>True</code> to run Curator on the master node only.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information on these parameters, see the <a href="https://www.elastic.co/guide/en/elasticsearch/client/curator/5.2/configfile.html">Elastic Search curator documentation</a>.</p>
</div>
</li>
<li>
<p>Set the minimum acceptable log severity to display.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">logging:
  loglevel: INFO <b class="conum">(1)</b>
  logfile:
  logformat: default
  blacklist: ['elasticsearch', 'urllib3']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Specify the log level:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>CRITICAL</strong>. Curator displays only critical messages.</p>
</li>
<li>
<p><strong>ERROR</strong>. Curator displays only  error and critical messages.</p>
</li>
<li>
<p><strong>WARNING</strong>. Curator displays only  error, warning, and critical messages.</p>
</li>
<li>
<p><strong>INFO</strong>. Curator displays only informational, error, warning, and critical messages.</p>
</li>
<li>
<p><strong>DEBUG</strong>. Curator displays only debug messages, in addition to all of the above.</p>
<div class="paragraph">
<p>The default value is INFO.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Cluster Logging uses the OpenShift Enterprise custom environment variable <code>CURATOR_SCRIPT_LOG_LEVEL</code> in OpenShift Enterprise wrapper scripts (run.sh and convert.py).
The environment variable takes the same values as <code>CURATOR_LOG_LEVEL</code> for script debugging, as needed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-curator-yaml-efk-logging-curator">Deleting Elasticsearch data</h4>
<div class="paragraph">
<p>You can configure Curator to delete Elasticsearch data.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>Set cluster logging to the unmanaged state.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To delete indices:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the OpenShift Enterprise custom Curator configuration file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit configmap/curator</pre>
</div>
</div>
</li>
<li>
<p>Set the following parameters as needed:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">config.yaml: |
  project_name:
    action
      unit:value</code></pre>
</div>
</div>
<div class="paragraph">
<p>The available parameters are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Project options</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>project_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The actual name of a project, such as <strong>myapp-devel</strong>. For OpenShift Enterprise <strong>operations</strong>
logs, use the name <code>.operations</code> as the project name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The action to take, currently only <code>delete</code> is allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The period to use for deletion, <code>days</code>, <code>weeks</code>, or <code>months</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of units.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Filter options</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.defaults</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>.defaults</code> as the <code>project_name</code> to set the defaults for projects that are
not specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.regex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of regular expressions that match project names.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The valid and properly escaped regular expression pattern enclosed by single
quotation marks.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, to configure Curator to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete indices in the <strong>myapp-dev</strong> project older than <code>1 day</code></p>
</li>
<li>
<p>Delete indices in the <strong>myapp-qe</strong> project older than <code>1 week</code></p>
</li>
<li>
<p>Delete <strong>operations</strong> logs older than <code>8 weeks</code></p>
</li>
<li>
<p>Delete all other projects indices after they are <code>31 days</code> old</p>
</li>
<li>
<p>Delete indices older than 1 day that are matched by the '^project\..+\-dev.*$' regex</p>
</li>
<li>
<p>Delete indices older than 2 days that are matched by the '^project\..+\-test.*$' regex</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">  config.yaml: |
    # Logging example curator config file

    # uncomment and use this to override the defaults from env vars
    #.defaults:
    #  delete:
    #    days: 30

    myapp-dev:
      delete:
        days: 1

    myapp-qe:
      delete:
        weeks: 1

    .operations:
      delete:
        weeks: 8

    .defaults:
      delete:
        days: 31

    .regex:
      - pattern: '^project\..+\-dev\..*$'
        delete:
          days: 1
      - pattern: '^project\..+\-test\..*$'
        delete:
          days: 2</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>When you use <code>months</code> as the <code>$UNIT</code> for an operation, Curator starts counting at
the first day of the current month, not the current day of the current month.
For example, if today is April 15, and you want to delete indices that are 2 months
older than today (delete: months: 2), Curator does not delete indices that are dated
older than February 15; it deletes indices older than February 1. That is, it
goes back to the first day of the current month, then goes back two whole months
from that date. If you want to be exact with Curator, it is best to use days
(for example, <code>delete: days: 30</code>).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-curator-actions-efk-logging-curator">Preventing Curator from deleting internal indices</h4>
<div class="paragraph">
<p>The Cluster Logging Operator installation creates a Curator <strong>action file</strong>, <strong><em>curator-actions.yaml</em></strong>, that includes only the <strong>delete_indices</strong> action. You configure the <strong>action file</strong> using theOpenShift Enterprise custom configuration file, <strong><em>config.yaml</em></strong>. Currently, the only action you can use with the automatically-created <strong>action file</strong> is <code>delete_indices</code>.</p>
</div>
<div class="paragraph">
<p>If you are an advanced Curator user and want to configure other Curator actions, you can edit the Curator <strong>action file</strong>, or, if you have an existing Curator <strong>action file</strong>, you can continue to use that file. However, becasue modifying the <strong>action file</strong> can be destructive to the cluster and can cause removal of required indices/settings from Elasticsearch, you should use the OpenShift Enterprise custom configuration file, <strong><em>config.yaml</em></strong> to remove indices.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To configure Curator to delete indices, edit the Curator <strong>action file</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">actions:
1:
      action: delete_indices <b class="conum">(1)</b>
      description: &gt;-
        Delete .operations indices older than 30 days.
        Ignore the error if the filter does not
        result in an actionable list of indices (ignore_empty_list).
        See https://www.elastic.co/guide/en/elasticsearch/client/curator/5.2/ex_delete_indices.html
      options:
        # Swallow curator.exception.NoIndices exception
        ignore_empty_list: True
        # In seconds, default is 300
        timeout_override: ${CURATOR_TIMEOUT}
        # Don't swallow any other exceptions
        continue_if_exception: False
        # Optionally disable action, useful for debugging
        disable_action: False
      # All filters are bound by logical AND
      filters:            <b class="conum">(2)</b>
      - filtertype: pattern
        kind: regex
        value: '^\.operations\..*$'
        exclude: False    <b class="conum">(3)</b>
      - filtertype: age
        # Parse timestamp from index name
        source: name
        direction: older
        timestring: '%Y.%m.%d'
        unit: days
        unit_count: 30
        exclude: False</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify <code>delete_indices</code> to delete the specified index.</p>
</li>
<li>
<p>Use the <code>filers</code> parameters to specify the index to be deleted. See the <a href="https://www.elastic.co/guide/en/elasticsearch/client/curator/5.2/filters.html">Elastic Search curator documentation</a> for information on these parameters.</p>
</li>
<li>
<p>Specify <code>false</code> to allow the index to be deleted.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-curator-cron-efk-logging-curator">Configuring Curator using a CronJob</h4>
<div class="paragraph">
<p>You can alternatively create, configure, and run Curator using a CronJob. The next scheduled job uses this configuration.</p>
</div>
<div class="paragraph">
<p>You can use cronjob for debugging Curator. For example, if curator is in failed state, but the log messages do not
provide a reason, you could increase the log level and run the cronjob with this command, instead of waiting for another scheduled run of the cron job.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>Cluster logging and Elasticsearch must be installed.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To create a cronjob for Curator:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following command to create cronjob:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc create job --from=cronjob/curator &lt;job_name&gt;</pre>
</div>
</div>
</li>
<li>
<p>Create and modify the configuration:</p>
<div class="ulist">
<ul>
<li>
<p>For scripted deployments</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Copy the Curator configuration file and the {produxt-title} custom configuration file
from the Curator configuration map and create separate files for each:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc extract configmap/curator --keys=curator5.yaml,config.yaml --to=/my/config</pre>
</div>
</div>
</li>
<li>
<p>Edit the <strong><em>/my/config/curator5.yaml</em></strong> and <strong><em>/my/config/config.yaml</em></strong> files.</p>
</li>
<li>
<p>Delete the existing Curator config map and add the edited YAML files to a new Curator config map.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc delete configmap curator ; sleep 1
$ oc create configmap curator \
    --from-file=curator5.yaml=/my/config/curator5.yaml \
    --from-file=config.yaml=/my/config/config.yaml \
    ; sleep 1</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Alternatively, if you are using the <strong>actions file</strong>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Copy the Curator configuration file and the {produxt-title} <strong>action</strong> file
from the Curator configuration map and create separate files for each:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc extract configmap/curator --keys=curator5.yaml,actions.yaml --to=/my/config</pre>
</div>
</div>
</li>
<li>
<p>Edit the <strong><em>/my/config/curator5.yaml</em></strong> and /my/config/actions.yaml files.</p>
</li>
<li>
<p>Delete the existing Curator config map and add the edited YAML files to a new Curator config map.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc delete configmap curator ; sleep 1
$ oc create configmap curator \
    --from-file=curator5.yaml=/my/config/curator5.yaml \
    --from-file=actions.yaml=/my/config/actions.yaml \
    ; sleep 1</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Use the following commands to control the CronJob:</p>
<div class="ulist">
<ul>
<li>
<p>Suspend a cronjob:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc patch cronjob curator -p '{"spec":{"suspend":true}}'</pre>
</div>
</div>
</li>
<li>
<p>Resume a CronJob:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc patch cronjob curator -p '{"spec":{"suspend":false}}'</pre>
</div>
</div>
</li>
<li>
<p>Change a cronjob schedule:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc patch cronjob curator -p '{"spec":{"schedule":"0 0 * * *"}}' <b class="conum">(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>schedule</code> option accepts schedules in <a href="https://en.wikipedia.org/wiki/Cron">cron format</a>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-fluentd">Configuring Fluentd in OpenShift Enterprise</h3>
<div class="paragraph">
<p>OpenShift Enterprise uses Fluentd to collect operations and application logs from your cluster which OpenShift Enterprise enriches with Kubernetes Pod and Namespace metadata.</p>
</div>
<div class="paragraph">
<p>You can configure log rotation, log location, use an external log aggregator, and make other configurations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Procedures in this topic require your cluster to be in an unmanaged state. For more information, see <em>Changing the cluster logging management state</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-pod-location-efk-logging-fluentd">Viewing Fluentd pods</h4>
<div class="paragraph">
<p>You can use the <code>oc get pods -o wide</code> command to see the nodes where the Fluentd pod are deployed.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Run the following command in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get pods -o wide | grep fluentd

NAME                         READY     STATUS    RESTARTS   AGE     IP            NODE                           NOMINATED NODE
fluentd-5mr28                1/1       Running   0          4m56s   10.129.2.12   ip-10-0-164-233.ec2.internal   &lt;none&gt;
fluentd-cnc4c                1/1       Running   0          4m56s   10.128.2.13   ip-10-0-155-142.ec2.internal   &lt;none&gt;
fluentd-nlp8z                1/1       Running   0          4m56s   10.131.0.13   ip-10-0-138-77.ec2.internal    &lt;none&gt;
fluentd-rknlk                1/1       Running   0          4m56s   10.128.0.33   ip-10-0-128-130.ec2.internal   &lt;none&gt;
fluentd-rsm49                1/1       Running   0          4m56s   10.129.0.37   ip-10-0-163-191.ec2.internal   &lt;none&gt;
fluentd-wjt8s                1/1       Running   0          4m56s   10.130.0.42   ip-10-0-156-251.ec2.internal   &lt;none&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-log-viewing-efk-logging-fluentd">Viewing Fluentd logs</h4>
<div class="paragraph">
<p>How you view logs depends upon the <code>LOGGING_FILE_PATH</code> setting.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>LOGGING_FILE_PATH</code> points to a file, the default, use the <strong>logs</strong> utility, from the project,
where the pod is located, to print out the contents of Fluentd log files:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec &lt;any-fluentd-pod&gt; -- logs <b class="conum">(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the name of a Fluentd pod. Note the space before <code>logs</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec fluentd-ht42r -n openshift-logging -- logs</pre>
</div>
</div>
<div class="paragraph">
<p>To view the current setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc -n openshift-logging set env daemonset/fluentd --list | grep LOGGING_FILE_PATH</pre>
</div>
</div>
</li>
<li>
<p>If you are using <code>LOGGING_FILE_PATH=console</code>,  Fluentd writes logs to stdout/stderr`.
You can retrieve the logs with the <code>oc logs [-f] &lt;pod_name&gt;</code> command, where the <code>-f</code>
is optional, from the project where the pod is located.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc logs -f &lt;any-fluentd-pod&gt; <b class="conum">(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the name of a Fluentd pod. Use the <code>-f</code> option to follow what is being written into the logs.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc logs -f fluentd-ht42r -n openshift-logging</pre>
</div>
</div>
<div class="paragraph">
<p>The contents of log files are printed out, starting with the oldest log.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-limits-efk-logging-fluentd">Configure Fluentd CPU and memory limits</h4>
<div class="paragraph">
<p>Each component specification allows for adjustments to both the CPU and memory limits.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Edit the Cluster Logging Custom Resource (CR) in the <code>openshift-logging</code> project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">$ oc edit ClusterLogging instance

apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"

....

spec:
  collection:
    logs:
      fluentd:
        resources:
          limits: <b class="conum">(1)</b>
            cpu: 250m
            memory: 1Gi
          requests:
            cpu: 250m
            memory: 1Gi</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the CPU and memory limits as needed. The values shown are the default values.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-log-location-efk-logging-fluentd">Configuring Fluentd log location</h4>
<div class="paragraph">
<p>Fluentd writes logs to a specified file or to the default location, <code>/var/log/fluentd/fluentd.log</code>,
based on the <code>LOGGING_FILE_PATH</code> environment variable.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>Set cluster logging to the unmanaged state.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To set the output location for the Fluentd logs:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the <code>LOGGING_FILE_PATH</code>  parameter in the <code>fluentd</code> daemonset. You can specify a particular file or <code>console</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">spec:
  template:
    spec:
      containers:
          env:
            - name: LOGGING_FILE_PATH
              value: console <b class="conum">(1)</b>

LOGGING_FILE_PATH= <b class="conum">(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the log output method:</p>
<div class="ulist">
<ul>
<li>
<p>use <code>console</code> to use the Fluentd default location. Retrieve the logs with the <code>oc logs [-f] &lt;pod_name&gt;</code> command.</p>
</li>
<li>
<p>use <code>&lt;path-to-log/fluentd.log&gt; to sends the log output to the specified file. Retrieve the logs with the `oc exec &lt;pod_name&gt;&#8201;&#8212;&#8201;logs</code> command.
This is the default setting.</p>
<div class="paragraph">
<p>Or, use the CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc -n openshift-logging set env daemonset/fluentd LOGGING_FILE_PATH=console</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-external-efk-logging-fluentd">Configuring Fluentd to send logs to an external log aggregator</h4>
<div class="paragraph">
<p>You can configure Fluentd to send a copy of its logs to an external log
aggregator, and not the default Elasticsearch, using the <code>secure-forward</code>
plug-in. From there, you can further process log records after the locally
hosted Fluentd has processed them.</p>
</div>
<div class="paragraph">
<p>The logging deployment provides a <code>secure-forward.conf</code> section in the Fluentd configmap
for configuring the external aggregator:</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>Set cluster logging to the unmanaged state.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To send a copy of Fluentd logs to an external log aggregator:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the Fluentd configuration map:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit configmap/fluentd -n openshift-logging

secure-forward.conf: |
  # &lt;store&gt;
  # @type secure_forward

  # self_hostname ${hostname}
  # shared_key &lt;SECRET_STRING&gt;

  # secure yes
  # enable_strict_verification yes

  # ca_cert_path /etc/fluent/keys/your_ca_cert
  # ca_private_key_path /etc/fluent/keys/your_private_key
    # for private CA secret key
  # ca_private_key_passphrase passphrase

  # &lt;server&gt;
    # or IP
  #   host server.fqdn.example.com
  #   port 24284
  # &lt;/server&gt;
  # &lt;server&gt;
    # ip address to connect
  #   host 203.0.113.8
    # specify hostlabel for FQDN verification if ipaddress is used for host
  #   hostlabel server.fqdn.example.com
  # &lt;/server&gt;
  # &lt;/store&gt;</pre>
</div>
</div>
</li>
<li>
<p>Add certificates to be used in <code>secure-forward.conf</code> to the existing
secret that is mounted on the Fluentd pods. The <code>your_ca_cert</code> and
<code>your_private_key</code> values must match what is specified in <code>secure-forward.conf</code>
in <code>configmap/logging-fluentd</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc patch secrets/fluentd --type=json \
  --patch "[{'op':'add','path':'/data/your_ca_cert','value':'$(base64 /path/to/your_ca_cert.pem)'}]"
$ oc patch secrets/fluentd --type=json \
  --patch "[{'op':'add','path':'/data/your_private_key','value':'$(base64 /path/to/your_private_key.pem)'}]"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Replace <code>your_private_key</code> with a generic name. This is a link to the JSON path,
not a path on your host system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When configuring the external aggregator, it must be able to accept messages
securely from Fluentd.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If using Fluentd 1.0 or later, configure the built-in <strong>in_forward</strong> plug-in with the appropriate security parameters.</p>
<div class="paragraph">
<p>In Fluentd 1.0 and later, <strong>in_forward</strong> implements the server (receiving) side, and <strong>out_forward</strong> implements the client (sending) side.</p>
</div>
<div class="paragraph">
<p>For Fluentd versions 1.0 or higher, you can find further explanation of <a href="https://docs.fluentd.org/v1.0/articles/in_forward">how to set up the <strong>inforward</strong> plugin</a>
and <a href="https://docs.fluentd.org/v1.0/articles/out_forward">the <strong>out_forward</strong> plugin</a>.</p>
</div>
</li>
<li>
<p>If using Fluentd 0.12 or earlier, you must have the <strong>fluent-plugin-secure-forward</strong> plug-in installed and
make use of the input plug-in it provides. In Fluentd 0.12, the same <code>fluent-plugin-secure-forward</code> plugin implements both the client (sending) side and the server (receiving) side.</p>
<div class="paragraph">
<p>For Fluentd 0.12 you can find further explanation of <a href="https://github.com/tagomoris/fluent-plugin-secure-forward"><strong>fluent-plugin-secure-forward</strong> plug-in in fluent-plugin-secure-forward repository</a>.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following is an example of a <code>in_forward</code> configuration for Fluentd 1.0 and later:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;source&gt;
  @type forward
  @id my-secure-forward
  port 24284
  bind 0.0.0.0
  &lt;security&gt;
    self_hostname server.fqdn.example.com
    shared_key    &lt;shared_key_between_forwarder_and_forwardee&gt;
  &lt;/security&gt;
  &lt;transport tls&gt;
    cert_path        /path/to/my/tlsservercert
    private_key_path /path/to/my/tlsserverkey
    private_key_passphrase not_used_if_key_is_unencrypted
  &lt;/transport&gt;
&lt;/source&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-throttling-efk-logging-fluentd">Throttling Fluentd logs</h4>
<div class="paragraph">
<p>For projects that are especially verbose, an administrator can throttle down the
rate at which the logs are read in by Fluentd before being processed. By throttling,
you deliberately slow down the rate at which you are reading logs,
so Kibana might take longer to display records.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Throttling can contribute to log aggregation falling behind for the configured
projects; log entries can be lost if a pod is deleted before Fluentd catches up.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Throttling does not work when using the systemd journal as the log
source. The throttling implementation depends on being able to throttle the
reading of the individual log files for each project. When reading from the
journal, there is only a single log source, no log files, so no file-based
throttling is available. There is not a method of restricting the log
entries that are read into the Fluentd process.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To tell Fluentd which projects it should be restricting, edit the throttle
configuration in its ConfigMap after deployment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit configmap/fluentd</pre>
</div>
</div>
<div class="paragraph">
<p>The format of the <strong><em>throttle-config.yaml</em></strong> key is a YAML file that contains
project names and the desired rate at which logs are read in on each
node. The default is 1000 lines at a time per node. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">throttle-config.yaml: |
  - opensift-logging:
      read_lines_limit: 10
  - .operations:
      read_lines_limit: 100</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-json-efk-logging-fluentd">Configuring Fluentd JSON parsing</h4>
<div class="paragraph">
<p>You can configure Fluentd to inspect each log message to determine if the message is in <strong>JSON</strong> format and merge
the message into the JSON payload document posted to Elasticsearch. This feature is disabled by default.</p>
</div>
<div class="paragraph">
<p>You can enable or disable this feature by editing the <code>MERGE_JSON_LOG</code> environment variable in the <strong>fluentd</strong> daemonset.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Enabling this feature comes with risks, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Possible log loss due to Elasticsearch rejecting documents due to inconsistent type mappings.</p>
</li>
<li>
<p>Potential buffer storage leak caused by rejected message cycling.</p>
</li>
<li>
<p>Overwrite of data for field with same names.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The features in this topic should be used by only experienced Fluentd and Elasticsearch users.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Set cluster logging to the unmanaged state. In managed state, the Cluster Logging Operator reverts changes made to the Fluentd ConfigMap (CM) and DaemonSet (DS).</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Use the following command to enable this feature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc set env ds/fluentd MERGE_JSON_LOG=true <b class="conum">(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Set this to <code>false</code> to disable this feature or <code>true</code> to enable this feature.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="efk-logging-fluentd-json-string-efk-logging-fluentd">Setting MERGE_JSON_LOG and CDM_UNDEFINED_TO_STRING</h5>
<div class="paragraph">
<p>You can use <a href="https://github.com/openshift/origin-aggregated-logging/blob/master/fluentd/README.md">environment variables</a> to modify your fluentd configuration.</p>
</div>
<div class="paragraph">
<p>However, if you set the <code>CDM_UNDEFINED_TO_STRING</code> enviroment variable to <code>true</code> when <code>MERGE_JSON_LOG</code> is also set to <code>true</code>, you will receive an Elasticsearch <strong>400</strong> error if you have already generated conflicting fields, until the indices roll over for the next day. The error occurs because when`MERGE_JSON_LOG=true`, Fluentd adds fields with data types other than <strong>string</strong>. When you set <code>CDM_UNDEFINED_TO_STRING=true</code>, Fluentd attempts to add those fields with a <strong>string</strong> value resulting in the Elasticsearch <strong>400</strong> error.</p>
</div>
<div class="paragraph">
<p>When Fluentd rolls over the indices for the next day&#8217;s logs, it will create a brand new index. The field definitions are updated and you will not get the <strong>400</strong> error.</p>
</div>
<div class="paragraph">
<p>Records that have <strong>hard</strong> errors, such as schema violations, corrupted data, and so forth, cannot be retried. Fluent sends the records for error handling. If you <a href="https://docs.fluentd.org/v1.0/articles/config-file#@error-label">add a
<code>&lt;label @ERROR&gt;</code> section</a> to your Fluentd config, as the last &lt;label&gt;, you can handle these records as needed.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">data:
  fluent.conf:

....

    &lt;label @ERROR&gt;
      &lt;match **&gt;
        @type file
        path /var/log/fluent/dlq
        time_slice_format %Y%m%d
        time_slice_wait 10m
        time_format %Y%m%dT%H%M%S%z
        compress gzip
      &lt;/match&gt;
    &lt;/label&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This section writes error records to the <a href="https://www.elastic.co/guide/en/logstash/current/dead-letter-queues.html">Elasticsearch dead letter queue (DLQ) file</a>. See <a href="https://docs.fluentd.org/v0.12/articles/out_file">the fluentd documentation</a> for more information about the file output.</p>
</div>
<div class="paragraph">
<p>Then you can edit the file to clean up the records manually, edit the file to use with the Elasticsearch <code>/_bulk index</code> API and use cURL to add those records. For more information on
Elasticsearch Bulk API, see <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/docs-bulk.html">the Elasticsearch documentation</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-systemd-journald">Configuring systemd-journald and rsyslog in OpenShift Enterprise</h3>
<div class="paragraph">
<p>Because Fluentd and rsyslog read from the journal, and the journal default
settings are very low, journal entries can be lost because the journal cannot keep up
with the logging rate from system services.</p>
</div>
<div class="paragraph">
<p>We recommend setting <code>RateLimitInterval=1s</code> and <code>RateLimitBurst=10000</code> (or even higher if necessary)
to prevent the journal from losing entries.</p>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-scaling-efk-logging-systemd">Scaling up systemd-journald</h4>
<div class="paragraph">
<p>As you scale up your project, the default logging environment might need some
adjustments.</p>
</div>
<div class="paragraph">
<p>For example, if you are missing logs, you might need to increase the rate limits for journald.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update to <strong>systemd-219-22.el7.x86_64</strong>.</p>
</li>
<li>
<p>Add the following to the <strong><em>/etc/systemd/journald.conf</em></strong> file:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># Disable rate limiting
RateLimitInterval=1s
RateLimitBurst=10000
Storage=volatile
Compress=no
MaxRetentionSec=30s</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Restart the services.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ systemctl restart systemd-journald.service
$ systemctl restart rsyslog.service</pre>
</div>
</div>
<div class="paragraph">
<p>These settings account for the bursty nature of uploading in bulk.</p>
</div>
<div class="paragraph">
<p>After removing the rate limit, you might see increased CPU utilization on the
system logging daemons as it processes any messages that would have previously
been throttled.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sending-logs-to-external-devices">Sending OpenShift Enterprise logs to external devices</h3>
<div class="paragraph">
<p>You can send Elasticsearch logs to external devices, such as an externally-hosted Elasticsearch instance
or an external syslog server. You can also configure Fluentd to send logs to an external log aggregator.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Procedures in this topic require your cluster to be in an unmanaged state. For more information, see <em>Changing the cluster logging management state</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="efk-logging-external-elasticsearch-efk-logging-external">Configuring Fluentd to send logs to an external Elasticsearch instance</h4>
<div class="paragraph">
<p>Fluentd sends logs to the value of the <code>ES_HOST</code>, <code>ES_PORT</code>, <code>OPS_HOST</code>,
and <code>OPS_PORT</code> environment variables of the Elasticsearch deployment
configuration. The application logs are directed to the <code>ES_HOST</code> destination,
and operations logs to <code>OPS_HOST</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Sending logs directly to an AWS Elasticsearch instance is not supported. Use
Fluentd Secure Forward to direct logs to
an instance of Fluentd that you control and that is configured with the
<code>fluent-plugin-aws-elasticsearch-service</code> plug-in.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set cluster logging to the unmanaged state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To direct logs to a specific Elasticsearch instance:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the <code>fluentd</code> DaemonSet in the <strong>openshift-logging</strong> project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">$ oc edit ds/fluentd

spec:
  template:
    spec:
      containers:
          env:
          - name: ES_HOST
            value: elasticsearch
          - name: ES_PORT
            value: '9200'
          - name: ES_CLIENT_CERT
            value: /etc/fluent/keys/app-cert
          - name: ES_CLIENT_KEY
            value: /etc/fluent/keys/app-key
          - name: ES_CA
            value: /etc/fluent/keys/app-ca
          - name: OPS_HOST
            value: elasticsearch
          - name: OPS_PORT
            value: '9200'
          - name: OPS_CLIENT_CERT
            value: /etc/fluent/keys/infra-cert
          - name: OPS_CLIENT_KEY
            value: /etc/fluent/keys/infra-key
          - name: OPS_CA
            value: /etc/fluent/keys/infra-ca</code></pre>
</div>
</div>
</li>
<li>
<p>Set <code>ES_HOST</code> and <code>OPS_HOST</code> to the same destination,
while ensuring that <code>ES_PORT</code> and <code>OPS_PORT</code> also have the same value
for an external Elasticsearch instance to contain both application and
operations logs.</p>
</li>
<li>
<p>Configure your externally hosted Elasticsearch instance for TLS:</p>
<div class="ulist">
<ul>
<li>
<p><strong>If your externally hosted Elasticsearch instance does not use TLS</strong>, update the
<code>_CLIENT_CERT</code>, <code>_CLIENT_KEY</code>, and <code>_CA</code> variables to be empty.</p>
</li>
<li>
<p><strong>If your externally hosted Elasticsearch instance uses TLS, but not mutual TLS</strong>,
update the <code>_CLIENT_CERT</code> and <code>_CLIENT_KEY</code> variables to be empty. Then patch or
recreate the <strong>fluentd</strong> secret with the appropriate <code>_CA</code> value for
communicating with your Elasticsearch instance.</p>
</li>
<li>
<p><strong>If your externally hosted Elasticsearch instance uses Mutual TLS</strong>, patch
or recreate the <strong>fluentd</strong> secret with your client key, client cert, and CA.
The provided Elasticsearch instance uses mutual TLS.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you are not using the provided Kibana and Elasticsearch images, you will not
have the same multi-tenant capabilities and your data will not be restricted by
user access to a particular project.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-external-syslog-efk-logging-external">Configuring Fluentd to send logs to an external syslog server</h4>
<div class="paragraph">
<p>Use the <code>fluent-plugin-remote-syslog</code> plug-in on the host to send logs to an
external syslog server.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>Set cluster logging to the unmanaged state.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set environment variables in the <code>fluentd</code> daemonset in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">spec:
  template:
    spec:
      containers:
        - name: fluentd
          image: 'quay.io/openshift/origin-logging-fluentd:latest'
          env:
            - name: REMOTE_SYSLOG_HOST <b class="conum">(1)</b>
              value: host1
            - name: REMOTE_SYSLOG_HOST_BACKUP
              value: host2
            - name: REMOTE_SYSLOG_PORT_BACKUP
              value: 5555</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The desired remote syslog host. Required for each host.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This will build two destinations. The syslog server on <code>host1</code> will be
receiving messages on the default port of <code>514</code>, while <code>host2</code> will be receiving
the same messages on port <code>5555</code>.</p>
</div>
</li>
<li>
<p>Alternatively, you can configure your own custom the <code>fluentd</code> daemonset in the <code>openshift-logging</code> project.</p>
<div class="paragraph">
<p><strong>Fluentd Environment Variables</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USE_REMOTE_SYSLOG</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defaults to <code>false</code>. Set to <code>true</code> to enable use of the
<code>fluent-plugin-remote-syslog</code> gem</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_SYSLOG_HOST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Required) Hostname or IP address of the remote syslog server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_SYSLOG_PORT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port number to connect on. Defaults to <code>514</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_SYSLOG_SEVERITY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the syslog severity level. Defaults to <code>debug</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_SYSLOG_FACILITY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the syslog facility. Defaults to <code>local0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_SYSLOG_USE_RECORD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defaults to <code>false</code>. Set to <code>true</code> to use the record&#8217;s severity and facility fields to set on the syslog message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_SYSLOG_REMOVE_TAG_PREFIX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Removes the prefix from the tag, defaults to <code>''</code> (empty).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_SYSLOG_TAG_KEY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If specified, uses this field as the key to look on the record, to set the tag on the syslog message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_SYSLOG_PAYLOAD_KEY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If specified, uses this field as the key to look on the record, to set the payload on the syslog message.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>This implementation is insecure, and should only be used in environments
where you can guarantee no snooping on the connection.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="efk-logging-fluentd-external-efk-logging-external">Configuring Fluentd to send logs to an external log aggregator</h4>
<div class="paragraph">
<p>You can configure Fluentd to send a copy of its logs to an external log
aggregator, and not the default Elasticsearch, using the <code>secure-forward</code>
plug-in. From there, you can further process log records after the locally
hosted Fluentd has processed them.</p>
</div>
<div class="paragraph">
<p>The logging deployment provides a <code>secure-forward.conf</code> section in the Fluentd configmap
for configuring the external aggregator:</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>Set cluster logging to the unmanaged state.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To send a copy of Fluentd logs to an external log aggregator:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the Fluentd configuration map:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit configmap/fluentd -n openshift-logging

secure-forward.conf: |
  # &lt;store&gt;
  # @type secure_forward

  # self_hostname ${hostname}
  # shared_key &lt;SECRET_STRING&gt;

  # secure yes
  # enable_strict_verification yes

  # ca_cert_path /etc/fluent/keys/your_ca_cert
  # ca_private_key_path /etc/fluent/keys/your_private_key
    # for private CA secret key
  # ca_private_key_passphrase passphrase

  # &lt;server&gt;
    # or IP
  #   host server.fqdn.example.com
  #   port 24284
  # &lt;/server&gt;
  # &lt;server&gt;
    # ip address to connect
  #   host 203.0.113.8
    # specify hostlabel for FQDN verification if ipaddress is used for host
  #   hostlabel server.fqdn.example.com
  # &lt;/server&gt;
  # &lt;/store&gt;</pre>
</div>
</div>
</li>
<li>
<p>Add certificates to be used in <code>secure-forward.conf</code> to the existing
secret that is mounted on the Fluentd pods. The <code>your_ca_cert</code> and
<code>your_private_key</code> values must match what is specified in <code>secure-forward.conf</code>
in <code>configmap/logging-fluentd</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc patch secrets/fluentd --type=json \
  --patch "[{'op':'add','path':'/data/your_ca_cert','value':'$(base64 /path/to/your_ca_cert.pem)'}]"
$ oc patch secrets/fluentd --type=json \
  --patch "[{'op':'add','path':'/data/your_private_key','value':'$(base64 /path/to/your_private_key.pem)'}]"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Replace <code>your_private_key</code> with a generic name. This is a link to the JSON path,
not a path on your host system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When configuring the external aggregator, it must be able to accept messages
securely from Fluentd.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If using Fluentd 1.0 or later, configure the built-in <strong>in_forward</strong> plug-in with the appropriate security parameters.</p>
<div class="paragraph">
<p>In Fluentd 1.0 and later, <strong>in_forward</strong> implements the server (receiving) side, and <strong>out_forward</strong> implements the client (sending) side.</p>
</div>
<div class="paragraph">
<p>For Fluentd versions 1.0 or higher, you can find further explanation of <a href="https://docs.fluentd.org/v1.0/articles/in_forward">how to set up the <strong>inforward</strong> plugin</a>
and <a href="https://docs.fluentd.org/v1.0/articles/out_forward">the <strong>out_forward</strong> plugin</a>.</p>
</div>
</li>
<li>
<p>If using Fluentd 0.12 or earlier, you must have the <strong>fluent-plugin-secure-forward</strong> plug-in installed and
make use of the input plug-in it provides. In Fluentd 0.12, the same <code>fluent-plugin-secure-forward</code> plugin implements both the client (sending) side and the server (receiving) side.</p>
<div class="paragraph">
<p>For Fluentd 0.12 you can find further explanation of <a href="https://github.com/tagomoris/fluent-plugin-secure-forward"><strong>fluent-plugin-secure-forward</strong> plug-in in fluent-plugin-secure-forward repository</a>.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following is an example of a <code>in_forward</code> configuration for Fluentd 1.0 and later:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;source&gt;
  @type forward
  @id my-secure-forward
  port 24284
  bind 0.0.0.0
  &lt;security&gt;
    self_hostname server.fqdn.example.com
    shared_key    &lt;shared_key_between_forwarder_and_forwardee&gt;
  &lt;/security&gt;
  &lt;transport tls&gt;
    cert_path        /path/to/my/tlsservercert
    private_key_path /path/to/my/tlsserverkey
    private_key_passphrase not_used_if_key_is_unencrypted
  &lt;/transport&gt;
&lt;/source&gt;</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manually-rolling-out-elasticsearch">Manually rolling out Elasticsearch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift Enterprise supports the Elasticsearch rolling cluster restart. A rolling restart applies appropriate changes to the
Elasticsearch cluster without down time (if three masters are configured).
The Elasticsearch cluster remains online and operational, with nodes taken offline
one at a time.</p>
</div>
<div class="sect2">
<h3 id="efk-logging-manual-rollout-rolling-efk-logging-rollout">Performing an Elasticsearch rolling cluster restart</h3>
<div class="paragraph">
<p>Perform a rolling restart when you change the <code>elasticsearch</code> configmap
or any of the `elasticsearch-* ` deployment configurations.</p>
</div>
<div class="paragraph">
<p>Also, a rolling restart is recommended if the nodes on which an Elasticsearch pod
runs requires a reboot.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>Set the Elasticsearch Custom Resource to the unmanaged state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To perform a rolling cluster restart:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change to the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc project openshift-logging</pre>
</div>
</div>
</li>
<li>
<p>Use the following command to extract the CA certificate from Elasticsearch and write to the <strong><em>admin-ca</em></strong> file:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc extract secret/elasticsearch --to=. --keys=admin-ca

admin-ca</pre>
</div>
</div>
</li>
<li>
<p>Perform a shard synced flush to ensure there are no pending operations waiting to be written to disk prior to shutting down:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec &lt;any_es_pod_in_the_cluster&gt; -c elasticsearch -- curl -s --cacert /etc/elasticsearch/secret/admin-ca --cert /etc/elasticsearch/secret/admin-cert --key /etc/elasticsearch/secret/admin-key -XPOST 'https://localhost:9200/_flush/synced'</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc exec -c elasticsearch-clientdatamaster-0-1-gpv -- curl -s --cacert /etc/elasticsearch/secret/admin-ca --cert /etc/elasticsearch/secret/admin-cert --key /etc/elasticsearch/secret/admin-key -XPOST 'https://localhost:9200/_flush/synced'</pre>
</div>
</div>
</li>
<li>
<p>Prevent shard balancing when purposely bringing down nodes using the OpenShift Enterprise
<a href="https://github.com/openshift/origin-aggregated-logging/tree/master/elasticsearch#es_util"><strong>es_util</strong></a> tool:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec &lt;any_es_pod_in_the_cluster&gt; -c elasticsearch -- es_util --query=_cluster/settings -XPUT 'https://localhost:9200/_cluster/settings' -d '{ "transient": { "cluster.routing.allocation.enable" : "none" } }'</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec elasticsearch-clientdatamaster-0-1-gpv -c elasticsearch -- es_util --query=_cluster/settings?pretty=true -XPUT 'https://localhost:9200/_cluster/settings' -d '{ "transient": { "cluster.routing.allocation.enable" : "none" } }'

{
  "acknowledged" : true,
  "persistent" : { },
  "transient" : {
    "cluster" : {
      "routing" : {
        "allocation" : {
          "enable" : "none"
        }
      }
    }
  }</pre>
</div>
</div>
</li>
<li>
<p>Once complete, for each deployment you have for an ES cluster:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>By default, the OpenShift Enterprise Elasticsearch cluster blocks rollouts to their nodes. Use the following command to allow rollouts
and allow the pod to pick up the changes:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc rollout resume deployment/&lt;deployment-name&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc rollout resume deployment/elasticsearch-clientdatamaster-0-1
deployment.extensions/elasticsearch-clientdatamaster-0-1 resumed</pre>
</div>
</div>
<div class="paragraph">
<p>A new pod is deployed. Once the pod has a ready container, you can
move on to the next deployment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get pods | grep elasticsearch-*

NAME                                     READY   STATUS    RESTARTS   AGE
elasticsearch-clientdatamaster-0-1-59f   2/2     Running   0          1m
elasticsearch-clientdatamaster-0-2-597   2/2     Running   0          27h
elasticsearch-clientdatamaster-0-3-694   2/2     Running   0          27h</pre>
</div>
</div>
</li>
<li>
<p>Once complete, reset the pod to disallow rollouts:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc rollout pause deployment/&lt;deployment-name&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc rollout pause deployment/elasticsearch-clientdatamaster-0-1

deployment.extensions/elasticsearch-clientdatamaster-0-1 paused</pre>
</div>
</div>
</li>
<li>
<p>Check that the Elasticsearch cluster is in <code>green</code> state:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec &lt;any_es_pod_in_the_cluster&gt; -c elasticsearch -- es_util --query=_cluster/health?pretty=true</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you performed a rollout on the Elasticsearch pod you used in the previous commands, the pod no longer exists and you need a new pod name here.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec elasticsearch-clientdatamaster-0-1-59f -c elasticsearch -- es_util --query=_cluster/health?pretty=true

{
  "cluster_name" : "elasticsearch",
  "status" : "green", <b class="conum">(1)</b>
  "timed_out" : false,
  "number_of_nodes" : 3,
  "number_of_data_nodes" : 3,
  "active_primary_shards" : 8,
  "active_shards" : 16,
  "relocating_shards" : 0,
  "initializing_shards" : 0,
  "unassigned_shards" : 1,
  "delayed_unassigned_shards" : 0,
  "number_of_pending_tasks" : 0,
  "number_of_in_flight_fetch" : 0,
  "task_max_waiting_in_queue_millis" : 0,
  "active_shards_percent_as_number" : 100.0
}</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Make sure this parameter is <code>green</code> before proceeding.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>If you changed the Elasticsearch configuration map, repeat these steps for each Elasticsearch pod.</p>
</li>
<li>
<p>Once all the deployments for the cluster have been rolled out, re-enable shard balancing:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec &lt;any_es_pod_in_the_cluster&gt; -c elasticsearch -- es_util --query=_cluster/settings -XPUT 'https://localhost:9200/_cluster/settings' -d '{ "transient": { "cluster.routing.allocation.enable" : "none" } }'</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc exec elasticsearch-clientdatamaster-0-1-59f -c elasticsearch -- es_util --query=_cluster/settings?pretty=true -XPUT 'https://localhost:9200/_cluster/settings' -d '{ "transient": { "cluster.routing.allocation.enable" : "all" } }'

{
  "acknowledged" : true,
  "persistent" : { },
  "transient" : {
    "cluster" : {
      "routing" : {
        "allocation" : {
          "enable" : "all"
        }
      }
    }
  }
}</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting-kibana">Troubleshooting Kibana in OpenShift Enterprise</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the Kibana console with OpenShift Enterprise can cause problems that are easily
solved, but are not accompanied with useful error messages. Check the following
troubleshooting sections if you are experiencing any problems when deploying
Kibana on OpenShift Enterprise.</p>
</div>
<div class="sect2">
<h3 id="efk-logging-troubleshooting-loop-efk-logging-troubleshooting">Troubleshooting a Kubernetes login loop</h3>
<div class="paragraph">
<p>The OAuth2 proxy on the Kibana console must share a secret with the master
host&#8217;s OAuth2 server. If the secret is not identical on both servers, it can
cause a login loop where you are continuously redirected back to the Kibana
login page.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To fix this issue:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following command to delete the current OAuthClient:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc delete oauthclient/kibana-proxy</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="efk-logging-troubleshooting-cryptic-efk-logging-troubleshooting">Troubleshooting a Kubernetes cryptic error when viewing the Kibana console</h3>
<div class="paragraph">
<p>When attempting to visit the Kibana console, you may receive a browser
error instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">{"error":"invalid_request","error_description":"The request is missing a required parameter,
 includes an invalid parameter value, includes a parameter more than once, or is otherwise malformed."}</pre>
</div>
</div>
<div class="paragraph">
<p>This can be caused by a mismatch between the OAuth2 client and server. The
return address for the client must be in a whitelist so the server can securely
redirect back after logging in.</p>
</div>
<div class="paragraph">
<p>Fix this issue by replacing the OAuthClient entry.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To replace the OAuthClient entry:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following command to delete the current OAuthClient:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc delete oauthclient/kibana-proxy</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the problem persists, check that you are accessing Kibana at a URL listed in
the OAuth client. This issue can be caused by accessing the URL at a forwarded
port, such as 1443 instead of the standard 443 HTTPS port. You can adjust the
server whitelist by editing the OAuth client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit oauthclient/kibana-proxy</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="efk-logging-troubleshooting-proxy-efk-logging-troubleshooting">Troubleshooting a Kubernetes 503 error when viewing the Kibana console</h3>
<div class="paragraph">
<p>If you receive a proxy error when viewing the Kibana console, it could be caused
by one of two issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kibana might not be recognizing pods. If Elasticsearch is slow in starting
up, Kibana may timeout trying to reach it. Check whether the relevant service
has any endpoints:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc describe service kibana
Name:                   kibana
[...]
Endpoints:              &lt;none&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If any Kibana pods are live, endpoints are listed. If they are not, check
the state of the Kibana pods and deployment. You may need to scale the
deployment down and back up again.</p>
</div>
</li>
<li>
<p>The route for accessing the Kibana service is masked. This can happen if you perform a test deployment in one
project, then deploy in a different project without completely removing the
first deployment. When multiple routes are sent to the same destination, the
default router will only route to the first created. Check the problematic route
to see if it is defined in multiple places:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get route  --all-namespaces --selector logging-infra=support</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="efk-logging-troubleshooting-unknown-efk-logging-troubleshooting">Troubleshooting a Kubernetes unknown error while connecting to Elasticsearch</h3>
<div class="paragraph">
<p>If you are attempting to use a F-5 load balancer in front of Kibana with
<code>X-Forwarded-For</code> enabled, this can cause an issue in which the Elasticsearch
<code>Searchguard</code> plug-in is unable to correctly accept connections from Kibana.</p>
</div>
<div class="listingblock">
<div class="title">Example Kibana Error Message</div>
<div class="content">
<pre class="nowrap">Kibana: Unknown error while connecting to Elasticsearch

Error: Unknown error while connecting to Elasticsearch
Error: UnknownHostException[No trusted proxies]</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To configure Searchguard to ignore the extra header:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scale down all Fluentd pods.</p>
</li>
<li>
<p>Scale down Elasticsearch after the Fluentd pods have terminated.</p>
</li>
<li>
<p>Add <code>searchguard.http.xforwardedfor.header: DUMMY</code> to the Elasticsearch
configuration section.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit configmap/elasticsearch <b class="conum">(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This approach requires that Elasticsearch&#8217;s configurations are within a ConfigMap.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Scale Elasticsearch back up.</p>
</li>
<li>
<p>Scale up all Fluentd pods.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exported-fields">Exported fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These are the fields exported by the logging system and available for searching
from Elasticsearch and Kibana. Use the full, dotted field name when searching.
For example, for an Elasticsearch <strong>/_search URL</strong>, to look for a Kubernetes Pod name,
use <code>/_search/q=kubernetes.pod_name:name-of-my-pod</code>.</p>
</div>
<div class="paragraph">
<p>The following sections describe fields that may not be present in your logging store.
Not all of these fields are present in every record.
The fields are grouped in the following categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>exported-fields-Default</code></p>
</li>
<li>
<p><code>exported-fields-rsyslog</code></p>
</li>
<li>
<p><code>exported-fields-systemd</code></p>
</li>
<li>
<p><code>exported-fields-kubernetes</code></p>
</li>
<li>
<p><code>exported-fields-pipeline_metadata</code></p>
</li>
<li>
<p><code>exported-fields-ovirt</code></p>
</li>
<li>
<p><code>exported-fields-aushape</code></p>
</li>
<li>
<p><code>exported-fields-tlog</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="efk-logging-exported-fields-default-efk-logging-exported-fields">Default exported fields</h3>
<div class="paragraph">
<p>These are the default fields exported by the logging system and available for searching
from Elasticsearch and Kibana. The default fields are Top Level and <code>collectd*</code></p>
</div>
<h5 id="_top-level-fields" class="discrete">Top Level Fields</h5>
<div class="paragraph">
<p>The top level fields are common to every application, and may be present in
every record. For the Elasticsearch template, top level fields populate the actual
mappings of <code>default</code> in the template&#8217;s mapping section.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The UTC value marking when the log payload was created, or when the log payload
was first collected if the creation time is not known. This is the log
processing pipeline’s best effort determination of when the log payload was
generated. Add the <code>@</code> prefix convention to note a field as being reserved for a
particular use. With Elasticsearch, most tools look for <code>@timestamp</code> by default.
For example, the format would be 2015-01-24 14:06:05.071000.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geoip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is geo-ip of the machine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>hostname</code> is the fully qualified domain name (FQDN) of the entity
generating the original payload. This field is an attempt to derive this
context. Sometimes the entity generating it knows the context. While other times
that entity has a restricted namespace itself, which is known by the collector
or normalizer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ipaddr4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address V4 of the source server, which can be an array.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ipaddr6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address V6 of the source server, if available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The logging level as provided by <code>rsyslog</code> (severitytext property), python&#8217;s
logging module. Possible values are as listed at
<a href="http://sourceware.org/git/?p=glibc.git;a=blob;f=misc/sys/syslog.h;h=ee01478c4b19a954426a96448577c5a76e6647c0;hb=HEAD#l74"><code>misc/sys/syslog.h</code></a>
plus <code>trace</code> and <code>unknown</code>. For example, "alert crit debug emerg err info notice
trace unknown warning". Note that <code>trace</code> is not in the <code>syslog.h</code> list but many
applications use it.</p>
<p class="tableblock">. You should only use <code>unknown</code> when the logging system gets a value it does not
understand, and note that it is the highest level.
. Consider <code>trace</code> as higher or more verbose, than <code>debug</code>.
. <code>error</code> is deprecated, use <code>err</code>.
. Convert <code>panic</code> to <code>emerg</code>.
. Convert <code>warn</code> to <code>warning</code>.</p>
<p class="tableblock">Numeric values from <code>syslog/journal PRIORITY</code> can usually be mapped using the
priority values as listed at
<a href="http://sourceware.org/git/?p=glibc.git;a=blob;f=misc/sys/syslog.h;h=ee01478c4b19a954426a96448577c5a76e6647c0;hb=HEAD#l51">misc/sys/syslog.h</a>.</p>
<p class="tableblock">Log levels and priorities from other logging systems should be mapped to the
nearest match. See
<a href="https://docs.python.org/2.7/library/logging.html#logging-levels">python
logging</a> for an example.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A typical log entry message, or payload. It can be stripped of metadata pulled
out of it by the collector or normalizer, that is UTF-8 encoded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the process ID of the logging entity, if available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the service associated with the logging entity, if available. For
example, the <code>syslog APP-NAME</code> and <code>rsyslog programname</code> property are mapped to
the service field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optionally provided operator defined list of tags placed on each log by the
collector or normalizer. The payload can be a string with whitespace-delimited
string tokens, or a JSON list of string tokens.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>file</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional path to the file containing the log entry local to the collector <code>TODO</code>
analyzer for file paths.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>offset</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The offset value can represent bytes to the start of the log line in the file
(zero or one based), or log line numbers (zero or one based), as long as the
values are strictly monotonically increasing in the context of a single log
file. The values are allowed to wrap, representing a new version of the log file
(rotation).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associate this record with the <code>namespace</code> that shares it&#8217;s name. This value
will not be stored, but it is used to associate the record with the appropriate
<code>namespace</code> for access control and visualization. Normally this value will be
given in the tag, but if the protocol does not support sending a tag, this field
can be used. If this field is present, it will override the <code>namespace</code> given in
the tag or in <code>kubernetes.namespace_name</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace_uuid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the <code>uuid</code> associated with the <code>namespace_name</code>. This value will not be
stored, but is used to associate the record with the appropriate namespace for
access control and visualization. If this field is present, it will override the
<code>uuid</code> given in <code>kubernetes.namespace_uuid</code>. This will also cause the Kubernetes
metadata lookup to be skipped for this log record.</p></td>
</tr>
</tbody>
</table>
<h5 id="_collectd-fields" class="discrete"><code>collectd</code> Fields</h5>
<div class="paragraph">
<p>The following fields represent namespace metrics metadata.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.plugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: string</p>
<p class="tableblock">The <code>collectd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.plugin_instance</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: string</p>
<p class="tableblock">The <code>collectd</code> plugin_instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.type_instance</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: string</p>
<p class="tableblock">The <code>collectd</code> <code>type_instance</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: string</p>
<p class="tableblock">The <code>collectd</code> type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.dstypes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: string</p>
<p class="tableblock">The <code>collectd</code> dstypes.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.processes-efk-logging-exported-fields" class="discrete"><code>collectd.processes</code> Fields</h5>
<div class="paragraph">
<p>The following field corresponds to the <code>collectd</code> processes plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_state</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer
The <code>collectd ps_state</code> type of processes plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.processes.ps_disk_ops-efk-logging-exported-fields" class="discrete"><code>collectd.processes.ps_disk_ops</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>ps_disk_ops</code> type of processes plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_disk_ops.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_disk_ops.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_vm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>ps_vm</code> type of processes plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_rss</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>ps_rss</code> type of processes plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>ps_data</code> type of processes plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>ps_code</code> type of processes plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_stacksize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>ps_stacksize</code> type of processes plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.processes.ps_cputime-efk-logging-exported-fields" class="discrete"><code>collectd.processes.ps_cputime</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>ps_cputime</code> type of processes plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_cputime.user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_cputime.syst</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.processes.ps_count-efk-logging-exported-fields" class="discrete"><code>collectd.processes.ps_count</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>ps_count</code> type of processes plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_count.processes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_count.threads</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.processes.ps_pagefaults-efk-logging-exported-fields" class="discrete"><code>collectd.processes.ps_pagefaults</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>ps_pagefaults</code> type of processes plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_pagefaults.majflt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_pagefaults.minflt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.processes.ps_disk_octets-efk-logging-exported-fields" class="discrete"><code>collectd.processes.ps_disk_octets</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd ps_disk_octets</code> type of processes plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_disk_octets.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.ps_disk_octets.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.processes.fork_rate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> <code>fork_rate</code> type of processes plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.disk-efk-logging-exported-fields" class="discrete"><code>collectd.disk</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to <code>collectd</code> disk plug-in.</p>
</div>
<h5 id="exported-fields-collectd.disk.disk_merged-efk-logging-exported-fields" class="discrete"><code>collectd.disk.disk_merged</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>disk_merged</code> type of disk plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_merged.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_merged.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.disk.disk_octets-efk-logging-exported-fields" class="discrete"><code>collectd.disk.disk_octets</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>disk_octets</code> type of disk plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_octets.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_octets.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.disk.disk_time-efk-logging-exported-fields" class="discrete"><code>collectd.disk.disk_time</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>disk_time</code> type of disk plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_time.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_time.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.disk.disk_ops-efk-logging-exported-fields" class="discrete"><code>collectd.disk.disk_ops</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>disk_ops</code> type of disk plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_ops.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_ops.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.pending_operations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>pending_operations</code> type of disk plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.disk.disk_io_time-efk-logging-exported-fields" class="discrete"><code>collectd.disk.disk_io_time</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd disk_io_time</code> type of disk plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_io_time.io_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.disk.disk_io_time.weighted_io_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.interface-efk-logging-exported-fields" class="discrete"><code>collectd.interface</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to the <code>collectd</code> interface plug-in.</p>
</div>
<h5 id="exported-fields-collectd.interface.if_octets-efk-logging-exported-fields" class="discrete"><code>collectd.interface.if_octets</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>if_octets</code> type of interface plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interface.if_octets.rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interface.if_octets.tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.interface.if_packets-efk-logging-exported-fields" class="discrete"><code>collectd.interface.if_packets</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>if_packets</code> type of interface plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interface.if_packets.rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interface.if_packets.tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.interface.if_errors-efk-logging-exported-fields" class="discrete"><code>collectd.interface.if_errors</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>if_errors</code> type of interface plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interface.if_errors.rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interface.if_errors.tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.interface.if_dropped-efk-logging-exported-fields" class="discrete">collectd.interface.if_dropped Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>if_dropped</code> type of interface plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interface.if_dropped.rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.interface.if_dropped.tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.virt-efk-logging-exported-fields" class="discrete"><code>collectd.virt</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to <code>collectd</code> virt plug-in.</p>
</div>
<h5 id="exported-fields-collectd.virt.if_octets-efk-logging-exported-fields" class="discrete"><code>collectd.virt.if_octets</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd if_octets</code> type of virt plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.if_octets.rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.if_octets.tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.virt.if_packets-efk-logging-exported-fields" class="discrete"><code>collectd.virt.if_packets</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>if_packets</code> type of virt plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.if_packets.rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.if_packets.tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.virt.if_errors-efk-logging-exported-fields" class="discrete"><code>collectd.virt.if_errors</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>if_errors</code> type of virt plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.if_errors.rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.if_errors.tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.virt.if_dropped-efk-logging-exported-fields" class="discrete"><code>collectd.virt.if_dropped</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>if_dropped</code> type of virt plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.if_dropped.rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.if_dropped.tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.virt.disk_ops-efk-logging-exported-fields" class="discrete"><code>collectd.virt.disk_ops</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>disk_ops</code> type of virt plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.disk_ops.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.disk_ops.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.virt.disk_octets-efk-logging-exported-fields" class="discrete"><code>collectd.virt.disk_octets</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> <code>disk_octets</code> type of virt plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.disk_octets.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.disk_octets.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> memory type of virt plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.virt_vcpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> <code>virt_vcpu</code> type of virt plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.virt.virt_cpu_total</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> <code>virt_cpu_total</code> type of virt plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.CPU-efk-logging-exported-fields" class="discrete"><code>collectd.CPU</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to the <code>collectd</code> CPU plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.CPU.percent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> type percent of plug-in CPU.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.df-efk-logging-exported-fields" class="discrete">collectd.df Fields</h5>
<div class="paragraph">
<p>Corresponds to the <code>collectd</code> <code>df</code> plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.df.df_complex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> type <code>df_complex</code> of plug-in <code>df</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.df.percent_bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> type <code>percent_bytes</code> of plug-in <code>df</code>.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.entropy-efk-logging-exported-fields" class="discrete"><code>collectd.entropy</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to the <code>collectd</code> entropy plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.entropy.entropy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> entropy type of entropy plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.memory-efk-logging-exported-fields" class="discrete"><code>collectd.memory</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to the <code>collectd</code> memory plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.memory.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> memory type of memory plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.memory.percent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock">The <code>collectd</code> percent type of memory plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.swap-efk-logging-exported-fields" class="discrete"><code>collectd.swap</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to the <code>collectd</code> swap plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.swap.swap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> swap type of swap plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.swap.swap_io</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd swap_io</code> type of swap plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.load-efk-logging-exported-fields" class="discrete"><code>collectd.load</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to the <code>collectd</code> load plug-in.</p>
</div>
<h5 id="exported-fields-collectd.load.load-efk-logging-exported-fields" class="discrete"><code>collectd.load.load</code> Fields</h5>
<div class="paragraph">
<p>The <code>collectd</code> load type of load plug-in</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.load.load.shortterm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.load.load.midterm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.load.load.longterm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.aggregation-efk-logging-exported-fields" class="discrete"><code>collectd.aggregation</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to <code>collectd</code> aggregation plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.aggregation.percent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: float</p>
<p class="tableblock"><code>TODO</code></p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.statsd-efk-logging-exported-fields" class="discrete"><code>collectd.statsd</code> Fields</h5>
<div class="paragraph">
<p>Corresponds to <code>collectd</code> <code>statsd</code> plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> CPU type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_elapsed_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>elapsed_time</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> memory type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_nic_speed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_speed</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_nic_rx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_rx</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_nic_tx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_tx</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_nic_rx_dropped</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_rx_dropped</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_nic_tx_dropped</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_tx_dropped</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_nic_rx_errors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_rx_errors</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_nic_tx_errors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_tx_errors</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_storage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> storage type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_swap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> swap type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_vdsm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> VDSM type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.host_vms</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> VMS type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_nic_tx_dropped</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_tx_dropped</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_nic_rx_bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_rx_bytes</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_nic_tx_bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_tx_bytes</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_balloon_min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>balloon_min</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_balloon_max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>balloon_max</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_balloon_target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>balloon_target</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_balloon_cur</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>balloon_cur</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_cpu_sys</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>cpu_sys</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_cpu_usage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>cpu_usage</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_read_ops</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_read_ops</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_write_ops</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The collectd` <code>disk_write_ops</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_flush_latency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_flush_latency</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_apparent_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_apparent_size</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_write_bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_write_bytes</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_write_rate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_write_rate</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_true_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_true_size</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_read_rate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_read_rate</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_write_latency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_write_latency</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_read_latency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_read_latency</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_disk_read_bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>disk_read_bytes</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_nic_rx_dropped</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_rx_dropped</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_cpu_user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>cpu_user</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_nic_rx_errors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_rx_errors</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_nic_tx_errors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_tx_errors</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.statsd.vm_nic_speed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> <code>nic_speed</code> type of <code>statsd</code> plug-in.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-collectd.postgresql-efk-logging-exported-fields" class="discrete"><code>collectd.postgresql Fields</code></h5>
<div class="paragraph">
<p>Corresponds to <code>collectd</code> <code>postgresql</code> plug-in.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.postgresql.pg_n_tup_g</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> type <code>pg_n_tup_g</code> of plug-in postgresql.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.postgresql.pg_n_tup_c</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> type <code>pg_n_tup_c</code> of plug-in postgresql.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.postgresql.pg_numbackends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> type <code>pg_numbackends</code> of plug-in postgresql.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.postgresql.pg_xact</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> type <code>pg_xact</code> of plug-in postgresql.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.postgresql.pg_db_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> type <code>pg_db_size</code> of plug-in postgresql.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectd.postgresql.pg_blks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: integer</p>
<p class="tableblock">The <code>collectd</code> type <code>pg_blks</code> of plug-in postgresql.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="efk-logging-exported-fields-rsyslog-efk-logging-exported-fields"><code>rsyslog</code> exported fields</h3>
<div class="paragraph">
<p>These are the <code>rsyslog</code> fields exported by the logging system and available for searching
from Elasticsearch and Kibana.</p>
</div>
<div class="paragraph">
<p>The following fields are RFC5424 based metadata.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rsyslog.facility</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <code>syslog</code> specification for more information on <code>rsyslog</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rsyslog.protocol-version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the <code>rsyslog</code> protocol version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rsyslog.structured-data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <code>syslog</code> specification for more information on <code>syslog</code> structured-data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rsyslog.msgid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the <code>syslog</code> msgid field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rsyslog.appname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>app-name</code> is the same as <code>programname</code>, then only fill top-level field <code>service</code>.
If <code>app-name</code> is not equal to <code>programname</code>, this field will hold <code>app-name</code>.
See syslog specifications for more information.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="efk-logging-exported-fields-systemd-efk-logging-exported-fields"><code>systemd</code> exported fields</h3>
<div class="paragraph">
<p>These are the <code>systemd</code> fields exported by the OpenShift Enterprise cluster logging available for searching
from Elasticsearch and Kibana.</p>
</div>
<div class="paragraph">
<p>Contains common fields specific to <code>systemd</code> journal.
<a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html">Applications</a>
may write their own fields to the journal. These will be available under the
<code>systemd.u</code> namespace. <code>RESULT</code> and <code>UNIT</code> are two such fields.</p>
</div>
<h5 id="exported-fields-systemd.k-efk-logging-exported-fields" class="discrete"><code>systemd.k</code> Fields</h5>
<div class="paragraph">
<p>The following table contains <code>systemd</code> kernel-specific metadata.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.k.KERNEL_DEVICE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_KERNEL_DEVICE="><code>systemd.k.KERNEL_DEVICE</code></a>
is the kernel device name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.k.KERNEL_SUBSYSTEM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_KERNEL_SUBSYSTEM="><code>systemd.k.KERNEL_SUBSYSTEM</code></a>
is the kernel subsystem name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.k.UDEV_DEVLINK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_UDEV_DEVLINK="><code>systemd.k.UDEV_DEVLINK</code></a>
includes additional symlink names that point to the node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.k.UDEV_DEVNODE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_UDEV_DEVNODE="><code>systemd.k.UDEV_DEVNODE</code></a>
is the node path of the device.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.k.UDEV_SYSNAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_UDEV_SYSNAME="> <code>systemd.k.UDEV_SYSNAME</code></a>
is the kernel device name.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-systemd.t-efk-logging-exported-fields" class="discrete"><code>systemd.t</code> Fields</h5>
<div class="paragraph">
<p><code>systemd.t Fields</code> are trusted journal fields, fields that are implicitly added
by the journal, and cannot be altered by client code.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.AUDIT_LOGINUID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_AUDIT_SESSION="><code>systemd.t.AUDIT_LOGINUID</code></a>
is the user ID for the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.BOOT_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_BOOT_ID="><code>systemd.t.BOOT_ID</code></a>
is the kernel boot ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.AUDIT_SESSION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_AUDIT_SESSION="><code>systemd.t.AUDIT_SESSION</code></a>
is the session for the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.CAP_EFFECTIVE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_CAP_EFFECTIVE="><code>systemd.t.CAP_EFFECTIVE</code></a>
represents the capabilities of the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.CMDLINE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_COMM="><code>systemd.t.CMDLINE</code></a>
is the command line of the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.COMM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_COMM="><code>systemd.t.COMM</code></a>
is the name of the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.EXE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_COMM="><code>systemd.t.EXE</code></a>
is the executable path of the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.GID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_PID="><code>systemd.t.GID</code></a>
is the group ID for the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.HOSTNAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_HOSTNAME="><code>systemd.t.HOSTNAME</code></a>
is the name of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.MACHINE_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_MACHINE_ID="><code>systemd.t.MACHINE_ID</code></a>
is the machine ID of the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.PID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_PID="><code>systemd.t.PID</code></a>
is the process ID for the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SELINUX_CONTEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_SELINUX_CONTEXT="><code>systemd.t.SELINUX_CONTEXT</code></a>
is the security context, or label, for the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SOURCE_REALTIME_TIMESTAMP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_SOURCE_REALTIME_TIMESTAMP="><code>systemd.t.SOURCE_REALTIME_TIMESTAMP</code></a>
is the earliest and most reliable timestamp of the message. This is converted to RFC 3339 NS format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSTEMD_CGROUP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_SYSTEMD_CGROUP="><code>systemd.t.SYSTEMD_CGROUP</code></a>
is the <code>systemd</code> control group path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSTEMD_OWNER_UID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_SYSTEMD_CGROUP="><code>systemd.t.SYSTEMD_OWNER_UID</code></a>
is the owner ID of the session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSTEMD_SESSION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_SYSTEMD_CGROUP="><code>systemd.t.SYSTEMD_SESSION</code></a>,
if applicable, is the <code>systemd</code> session ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSTEMD_SLICE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_SYSTEMD_CGROUP="><code>systemd.t.SYSTEMD_SLICE</code></a>
is the slice unit of the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSTEMD_UNIT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_SYSTEMD_CGROUP="><code>systemd.t.SYSTEMD_UNIT</code></a>
is the unit name for a session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSTEMD_USER_UNIT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_SYSTEMD_CGROUP="><code>systemd.t.SYSTEMD_USER_UNIT</code></a>,
if applicable, is the user unit name for a session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.TRANSPORT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_TRANSPORT="><code>systemd.t.TRANSPORT</code></a>
is the method of entry by the journal service. This includes, <code>audit</code>, <code>driver</code>,
<code>syslog</code>, <code>journal</code>, <code>stdout</code>, and <code>kernel</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.UID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#_PID="><code>systemd.t.UID</code></a>
is the user ID for the journal entry process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSLOG_FACILITY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#SYSLOG_FACILITY="><code>systemd.t.SYSLOG_FACILITY</code></a>
is the field containing the facility, formatted as a decimal string, for <code>syslog</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSLOG_IDENTIFIER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#SYSLOG_FACILITY="><code>systemd.t.systemd.t.SYSLOG_IDENTIFIER</code></a>
is the identifier for <code>syslog</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.t.SYSLOG_PID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#SYSLOG_FACILITY="><code>SYSLOG_PID</code></a>
is the client process ID for <code>syslog</code>.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-systemd.u-efk-logging-exported-fields" class="discrete"><code>systemd.u</code> Fields</h5>
<div class="paragraph">
<p><code>systemd.u Fields</code> are directly passed from clients and stored in the journal.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.u.CODE_FILE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#CODE_FILE="><code>systemd.u.CODE_FILE</code></a>
is the code location containing the filename of the source.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.u.CODE_FUNCTION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#CODE_FILE="><code>systemd.u.CODE_FUNCTION</code></a>
is the code location containing the function of the source.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.u.CODE_LINE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#CODE_FILE="><code>systemd.u.CODE_LINE</code></a>
is the code location containing the line number of the source.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.u.ERRNO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#ERRNO="><code>systemd.u.ERRNO</code></a>,
if present, is the low-level error number formatted in numeric value, as a decimal string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.u.MESSAGE_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#MESSAGE_ID="><code>systemd.u.MESSAGE_ID</code></a>
is the message identifier ID for recognizing message types.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.u.RESULT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For private use only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>systemd.u.UNIT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For private use only.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="efk-logging-exported-fields-kubernetes-efk-logging-exported-fields">Kubernetes exported fields</h3>
<div class="paragraph">
<p>These are the Kubernetes fields exported by the OpenShift Enterprise cluster logging available for searching
from Elasticsearch and Kibana.</p>
</div>
<div class="paragraph">
<p>The namespace for Kubernetes-specific metadata. The <code>kubernetes.pod_name</code> is the
name of the pod.</p>
</div>
<h5 id="exported-fields-kubernetes.labels-efk-logging-exported-fields" class="discrete"><code>kubernetes.labels</code> Fields</h5>
<div class="paragraph">
<p>Labels attached to the OpenShift object are <code>kubernetes.labels</code>. Each label name
is a subfield of labels field. Each label name is de-dotted, meaning dots in the
name are replaced with underscores.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.pod_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes ID of the pod.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.namespace_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the namespace in Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.namespace_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the namespace in Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.host</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes node name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.container_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the container in Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.labels.deployment</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The deployment associated with the Kubernetes object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.labels.deploymentconfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The deploymentconfig associated with the Kubernetes object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.labels.component</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The component associated with the Kubernetes object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.labels.provider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The provider associated with the Kubernetes object.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-kubernetes.annotations-efk-logging-exported-fields" class="discrete"><code>kubernetes.annotations</code> Fields</h5>
<div class="paragraph">
<p>Annotations associated with the OpenShift object are <code>kubernetes.annotations</code>
fields.</p>
</div>
</div>
<div class="sect2">
<h3 id="efk-logging-exported-fields-container-efk-logging-exported-fields">Container exported fields</h3>
<div class="paragraph">
<p>These are the Docker fields exported by the OpenShift Container Platform cluster logging available for searching from Elasticsearch and Kibana.
Namespace for docker container-specific metadata. The docker.container_id is the Docker container ID.</p>
</div>
<h5 id="exported-fields-pipeline_metadata.collector-efk-logging-exported-fields" class="discrete"><code>pipeline_metadata.collector</code> Fields</h5>
<div class="paragraph">
<p>This section contains metadata specific to the collector.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.collector.hostname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FQDN of the collector. It might be different from the FQDN of the actual emitter
of the logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.collector.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the collector.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.collector.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the collector.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.collector.ipaddr4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address v4 of the collector server, can be an array.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.collector.ipaddr6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address v6 of the collector server, can be an array.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.collector.inputname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How the log message was received by the collector whether it was TCP/UDP, or
imjournal/imfile.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.collector.received_at</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time when the message was received by the collector.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.collector.original_raw_message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The original non-parsed log message, collected by the collector or as close to the
source as possible.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-pipeline_metadata.normalizer-efk-logging-exported-fields" class="discrete"><code>pipeline_metadata.normalizer</code> Fields</h5>
<div class="paragraph">
<p>This section contains metadata specific to the normalizer.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.normalizer.hostname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FQDN of the normalizer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.normalizer.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the normalizer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.normalizer.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the normalizer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.normalizer.ipaddr4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address v4 of the normalizer server, can be an array.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.normalizer.ipaddr6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address v6 of the normalizer server, can be an array.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.normalizer.inputname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">how the log message was received by the normalizer whether it was TCP/UDP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.normalizer.received_at</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time when the message was received by the normalizer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.normalizer.original_raw_message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The original non-parsed log message as it is received by the normalizer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pipeline_metadata.trace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field records the trace of the message. Each collector and normalizer appends
information about itself and the date and time when the message was processed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="efk-logging-exported-fields-ovirt-efk-logging-exported-fields">oVirt exported fields</h3>
<div class="paragraph">
<p>These are the oVirt fields exported by the OpenShift Enterprise cluster logging available for searching
from Elasticsearch and Kibana.</p>
</div>
<div class="paragraph">
<p>Namespace for oVirt metadata.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ovirt.entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of the data source, hosts, VMS, and engine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ovirt.host_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The oVirt host UUID.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-ovirt.engine-efk-logging-exported-fields" class="discrete"><code>ovirt.engine</code> Fields</h5>
<div class="paragraph">
<p>Namespace for oVirt engine related metadata. The FQDN of the oVirt engine is
<code>ovirt.engine.fqdn</code></p>
</div>
</div>
<div class="sect2">
<h3 id="efk-logging-exported-fields-aushape-efk-logging-exported-fields">Aushape exported fields</h3>
<div class="paragraph">
<p>These are the Aushape fields exported by the OpenShift Enterprise cluster logging available for searching
from Elasticsearch and Kibana.</p>
</div>
<div class="paragraph">
<p>Audit events converted with Aushape. For more information, see
<a href="https://github.com/Scribery/aushape">Aushape</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.serial</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Audit event serial number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the host where the audit event occurred.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The error aushape encountered while converting the event.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.trimmed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of JSONPath expressions relative to the event object, specifying
objects or arrays with the content removed as the result of event size limiting.
An empty string means the event removed the content, and an empty array means
the trimming occurred by unspecified objects and arrays.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.text</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array log record strings representing the original audit event.</p></td>
</tr>
</tbody>
</table>
<h5 id="exported-fields-aushape.data-efk-logging-exported-fields" class="discrete"><code>aushape.data</code> Fields</h5>
<div class="paragraph">
<p>Parsed audit event data related to Aushape.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.data.avc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: nested</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.data.execve</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.data.netfilter_cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: nested</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.data.obj_pid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: nested</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aushape.data.path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: nested</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="efk-logging-exported-fields-tlog-efk-logging-exported-fields">Tlog exported fields</h3>
<div class="paragraph">
<p>These are the Tlog fields exported by the OpenShift Enterprise cluster logging system and available for searching
from Elasticsearch and Kibana.</p>
</div>
<div class="paragraph">
<p>Tlog terminal I/O recording messages. For more information see
<a href="https://github.com/Scribery/tlog">Tlog</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.ver</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message format version number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recorded user name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.term</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminal type name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.session</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Audit session ID of the recorded session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the message within the session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.pos</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message position in the session, milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.timing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Distribution of this message&#8217;s events in time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.in_txt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input text with invalid characters scrubbed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.in_bin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scrubbed invalid input characters as bytes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.out_txt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output text with invalid characters scrubbed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlog.out_bin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scrubbed invalid output characters as bytes.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="uninstalling-cluster-logging">Uninstalling Cluster Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can remove cluster logging from your OpenShift Enterprise cluster.</p>
</div>
<div class="sect2">
<h3 id="efk-logging-uninstall-efk-efk-logging-uninstall">Uninstalling cluster logging from OpenShift Enterprise</h3>
<div class="paragraph">
<p>You can remove cluster logging from your cluster.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>Cluster logging and Elasticsearch must be installed.</p>
</li>
<li>
<p>If needed, get the name of the Cluster Logging Custom Resource in the <code>openshift-logging</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get ClusterLogging
NAME       AGE
instance   112m</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To remove cluster logging:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the following command to remove everything generated during the deployment.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc delete clusterlogging &lt;clusterlogging-name&gt; -n openshift-logging <b class="conum">(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Where &lt;clusterlogging-name&gt; is the name of your Cluster Logging Custom Resource</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc delete clusterlogging instance -n openshift-logging</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-04-12 23:56:12 UTC
</div>
</div>
</body>
</html>