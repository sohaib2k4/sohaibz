<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Storage</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Storage</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="understanding-persistent-storage">Understanding persistent storage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="persistent-storage-overview-understanding-persistent-storage">Persistent storage overview</h3>
<div class="paragraph">
<p>Managing storage is a distinct problem from managing compute resources.
OpenShift Enterprise uses the Kubernetes persistent volume (PV) framework to
allow cluster administrators to provision persistent storage for a cluster.
Developers can use persistent volume claims (PVCs) to request PV resources
without having specific knowledge of the underlying storage infrastructure.</p>
</div>
<div class="paragraph">
<p>PVCs are specific to a project, and are created and used by developers as
a means to use a PV. PV resources on their own are not scoped to any
single project; they can be shared across the entire OpenShift Enterprise
cluster and claimed from any project. After a PV is bound to a PVC,
that PV can not then be bound to additional PVCs. This has the effect of
scoping a bound PV to a single namespace, that of the binding project.</p>
</div>
<div class="paragraph">
<p>PVs are defined by a <code>PersistentVolume</code> API object, which represents a
piece of existing, networked storage in the cluster that was provisioned
by the  cluster administrator. It is a resource in the cluster just like a
node is a cluster resource. PVs are volume plug-ins like <code>Volumes</code> but
have a lifecycle that is independent of any individual Pod that uses the
PV. PV objects capture the details of the implementation of the storage,
be that NFS, iSCSI, or a cloud-provider-specific storage system.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>High availability of storage in the infrastructure is left to the underlying
storage provider.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>PVCs are defined by a <code>PersistentVolumeClaim</code> API object, which represents a
request for storage by a developer. It is similar to a Pod in that Pods
consume node resources and PVCs consume PV resources. For example, Pods
can request specific levels of resources, such as CPU and memory, while
PVCs can request specific storage capacity and access modes. For example,
they can be mounted once read-write or many times read-only.</p>
</div>
</div>
<div class="sect2">
<h3 id="lifecycle-volume-claim-understanding-persistent-storage">Lifecycle of a volume and claim</h3>
<div class="paragraph">
<p>PVs are resources in the cluster. PVCs are requests for those resources
and also act as claim checks to the resource. The interaction between PVs
and PVCs have the following lifecycle.</p>
</div>
<div class="sect3">
<h4 id="provisioning-understanding-persistent-storage">Provision storage</h4>
<div class="paragraph">
<p>In response to requests from a developer defined in a PVC, a cluster
administrator configures one or more dynamic provisioners that provision
storage and a matching PV.</p>
</div>
<div class="paragraph">
<p>Alternatively, a cluster administrator can create a number of PVs in advance
that carry the details of the real storage that is available for use. PVs
exist in the API and are available for use.</p>
</div>
</div>
<div class="sect3">
<h4 id="binding-understanding-persistent-storage">Bind claims</h4>
<div class="paragraph">
<p>When you create a PVC, you request a specific amount of storage, specify the
required access mode, and create a storage class to describe and classify
the storage. The control loop in the master watches for new PVCs and binds
the new PVC to an appropriate PV. If an appropriate PV does not exist, a
provisioner for the storage class creates one.</p>
</div>
<div class="paragraph">
<p>The PV volume might exceed your requested volume. This is especially true
with manually provisioned PVs. To minimize the excess, OpenShift Enterprise
binds to the smallest PV that matches all other criteria.</p>
</div>
<div class="paragraph">
<p>Claims remain unbound indefinitely if a matching volume does not exist or
can not be created with any available provisioner servicing a storage
class. Claims are bound as matching volumes become available. For example,
a cluster with many manually provisioned 50Gi volumes would not match a
PVC requesting 100Gi. The PVC can be bound when a 100Gi PV is added to the
cluster.</p>
</div>
</div>
<div class="sect3">
<h4 id="using-pods-understanding-persistent-storage">Use Pods and claimed PVs</h4>
<div class="paragraph">
<p>Pods use claims as volumes. The cluster inspects the claim to find the bound
volume and mounts that volume for a Pod. For those volumes that support
multiple access modes, you must specify which mode applies when you use
the claim as a volume in a Pod.</p>
</div>
<div class="paragraph">
<p>Once you have a claim and that claim is bound, the bound PV belongs to you
for as long as you need it. You can schedule Pods and access claimed
PVs by including <code>persistentVolumeClaim</code> in the Pod&#8217;s volumes block.</p>
</div>
</div>
<div class="sect3">
<h4 id="pvcprotection-understanding-persistent-storage">PVC protection</h4>
<div class="paragraph">
<p>PVC protection is enabled by default.</p>
</div>
</div>
<div class="sect3">
<h4 id="releasing-understanding-persistent-storage">Release volumes</h4>
<div class="paragraph">
<p>When you are finished with a volume, you can delete the PVC object from
the API, which allows reclamation of the resource. The volume is
considered released when the claim is deleted, but it is not yet available
for another claim. The previous claimant&#8217;s data remains on the volume and
must be handled according to policy.</p>
</div>
</div>
<div class="sect3">
<h4 id="reclaiming-understanding-persistent-storage">Reclaim volumes</h4>
<div class="paragraph">
<p>The reclaim policy of a <code>PersistentVolume</code> tells the cluster what to do with
the volume after it is released. Volumes reclaim policy can either be
<code>Retain</code>, <code>Recycle</code>, or <code>Delete</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Retain</code> reclaim policy allows manual reclamation of the resource for
those volume plug-ins that support it.</p>
</li>
<li>
<p><code>Recycle</code> reclaim policy recycles the volume back into the pool of
unbound persistent volumes once it is released from its claim.</p>
</li>
<li>
<p><code>Delete</code> reclaim policy deletes  both the <code>PersistentVolume</code> object
from OpenShift Enterprise and the associated storage asset in external
infrastructure, such as AWS EBS, GCE PD, or Cinder volume.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Dynamically provisioned volumes are always deleted.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="persistent-volumes-understanding-persistent-storage">Persistent volumes</h3>
<div class="paragraph">
<p>Each PV contains a <code>spec</code> and <code>status</code>, which is the specification and
status of the volume, for example:</p>
</div>
<div class="listingblock">
<div class="title">PV object definition example</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolume
metadata:
  name: pv0001 <b class="conum">(1)</b>
spec:
  capacity:
    storage: 5Gi <b class="conum">(2)</b>
  accessModes:
    - ReadWriteOnce <b class="conum">(3)</b>
  persistentVolumeReclaimPolicy: Retain <b class="conum">(4)</b>
  ...
status:
  ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Name of the persistent volume.</p>
</li>
<li>
<p>The amount of storage available to the volume.</p>
</li>
<li>
<p>The access mode, defining the read-write and mount permissions.</p>
</li>
<li>
<p>The reclaim policy, indicating how the resource should be handled
once it is released.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="types-of-persistent-volumes-understanding-persistent-storage">Types of PVs</h4>
<div class="paragraph">
<p>OpenShift Enterprise supports the following <code>PersistentVolume</code> plug-ins:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AWS Elastic Block Store (EBS)</p>
</li>
<li>
<p>iSCSI</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="pv-capacity-understanding-persistent-storage">Capacity</h4>
<div class="paragraph">
<p>Generally, a PV has a specific storage capacity. This is set by using the
PV&#8217;s <code>capacity</code> attribute.</p>
</div>
<div class="paragraph">
<p>Currently, storage capacity is the only resource that can be set or
requested. Future attributes may include IOPS, throughput, and so on.</p>
</div>
</div>
<div class="sect3">
<h4 id="pv-access-modes-understanding-persistent-storage">Access modes</h4>
<div class="paragraph">
<p>A <code>PersistentVolume</code> can be mounted on a host in any way supported by the
resource provider. Providers have different capabilities and each PV&#8217;s
access modes are set to the specific modes supported by that particular
volume. For example, NFS can support multiple read-write clients, but a
specific NFS PV might be exported on the server as read-only. Each PV gets
its own set of access modes describing that specific PV&#8217;s capabilities.</p>
</div>
<div class="paragraph">
<p>Claims are matched to volumes with similar access modes. The only two
matching criteria are access modes and size. A claim&#8217;s access modes
represent a request. Therefore, you might be granted more, but never less.
For example, if a claim requests RWO, but the only volume available is an
NFS PV (RWO+ROX+RWX), the claim would then match NFS because it supports
RWO.</p>
</div>
<div class="paragraph">
<p>Direct matches are always attempted first. The volume&#8217;s modes must match or
contain more modes than you requested. The size must be greater than or
equal to what is expected. If two types of volumes, such as NFS and iSCSI,
have the same set of access modes, either of them can match a claim with
those modes. There is no ordering between types of volumes and no way to
choose one type over another.</p>
</div>
<div class="paragraph">
<p>All volumes with the same modes are grouped, and then sorted by size,
smallest to largest. The binder gets the group with matching modes and
iterates over each, in size order, until one size matches.</p>
</div>
<div class="paragraph">
<p>The following table lists the access modes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Access modes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Access Mode</th>
<th class="tableblock halign-left valign-top">CLI abbreviation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RWO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The volume can be mounted as read-write by a single node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadOnlyMany</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ROX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The volume can be mounted as read-only by many nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteMany</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RWX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The volume can be mounted as read-write by many nodes.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>A volume&#8217;s <code>AccessModes</code> are descriptors of the volume&#8217;s capabilities. They
are not enforced constraints. The storage provider is responsible for
runtime errors resulting from invalid use of the resource.</p>
</div>
<div class="paragraph">
<p>For example, Ceph offers <strong>ReadWriteOnce</strong> access mode. You must
mark the claims as <code>read-only</code> if you want to use the volume&#8217;s
ROX capability. Errors in the provider show up at runtime as mount errors.</p>
</div>
<div class="paragraph">
<p>iSCSI and Fibre Channel volumes do not currently have any fencing
mechanisms. You must ensure the volumes are only used by one node at a
time. In certain situations, such as draining a node, the volumes can be
used simultaneously by two nodes. Before draining the node, first ensure
the Pods that use these volumes are deleted.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Supported access modes for PVs</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Volume Plug-in</th>
<th class="tableblock halign-center valign-top">ReadWriteOnce</th>
<th class="tableblock halign-center valign-top">ReadOnlyMany</th>
<th class="tableblock halign-center valign-top">ReadWriteMany</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AWS EBS</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> -</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azure File</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azure Disk</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> -</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceph RBD</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fibre Channel</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GCE Persistent Disk</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> -</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlusterFS</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HostPath</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> -</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iSCSI</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NFS</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Openstack Cinder</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> -</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMWare vSphere</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> -</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local</p></td>
<td class="tableblock halign-center valign-top"><div class="verse"> ✅</div></td>
<td class="tableblock halign-center valign-top"><div class="verse"> -</div></td>
<td class="tableblock halign-center valign-top"><div class="verse">  -</div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Use a recreate deployment strategy for Pods that rely on AWS EBS.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="pv-reclaim-policy-understanding-persistent-storage">Reclaim policy</h4>
<div class="paragraph">
<p>The following table lists the current reclaim policy:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Current reclaim policy</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Reclaim policy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual reclamation</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you do not want to retain all Pods, use dynamic provisioning.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="pv-phase-understanding-persistent-storage">Phase</h4>
<div class="paragraph">
<p>Volumes can be found in one of the following phases:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Volume phases</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Phase</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A free resource not yet bound to a claim.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bound</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The volume is bound to a claim.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Released</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The claim was deleted, but the resource is not yet reclaimed by the
cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The volume has failed its automatic reclamation.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The CLI shows the name of the PVC bound to the PV.</p>
</div>
<div class="sect4">
<h5 id="pv-mount-options-understanding-persistent-storage">Mount options</h5>
<div class="paragraph">
<p>You can specify mount options while mounting a PV by using the annotation
<code>volume.beta.kubernetes.io/mount-options</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="title">Mount options example</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolume
metadata:
  name: pv0001
  annotations:
    volume.beta.kubernetes.io/mount-options: rw,nfsvers=4,noexec <b class="conum">(1)</b>
spec:
  capacity:
    storage: 1Gi
  accessModes:
  - ReadWriteOnce
  nfs:
    path: /tmp
    server: 172.17.0.2
  persistentVolumeReclaimPolicy: Retain
  claimRef:
    name: claim1
    namespace: default</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specified mount options are used while mounting the PV to the disk.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following PV types support mount options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AWS Elastic Block Store (EBS)</p>
</li>
<li>
<p>iSCSI</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Fibre Channel and HostPath PVs do not support mount options.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="persistent-volume-claims-understanding-persistent-storage">Persistent volume claims</h3>
<div class="paragraph">
<p>Each persistent volume claim (PVC) contains a <code>spec</code> and <code>status</code>, which
is the specification and status of the claim, for example:</p>
</div>
<div class="listingblock">
<div class="title">PVC object definition example</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: myclaim <b class="conum">(1)</b>
spec:
  accessModes:
    - ReadWriteOnce <b class="conum">(2)</b>
  resources:
    requests:
      storage: 8Gi <b class="conum">(3)</b>
  storageClassName: gold <b class="conum">(4)</b>
status:
  ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Name of the PVC</p>
</li>
<li>
<p>The access mode, defining the read-write and mount permissions</p>
</li>
<li>
<p>The amount of storage available to the PVC</p>
</li>
<li>
<p>Name of the <code>StorageClass</code> required by the claim</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="pvc-storage-class-understanding-persistent-storage">Storage classes</h4>
<div class="paragraph">
<p>Claims can optionally request a specific storage class by specifying the
storage class&#8217;s name in the <code>storageClassName</code> attribute. Only PVs of the
requested class, ones with the same <code>storageClassName</code> as the PVC, can be
bound to the PVC. The cluster administrator can configure dynamic
provisioners to service one or more storage classes. The cluster
administrator can create a PV on demand  that matches the specifications
in the PVC.</p>
</div>
<div class="paragraph">
<p>The cluster administrator can also set a default storage class for all PVCs.
When a default storage class is configured, the PVC must explicitly ask for
<code>StorageClass</code> or <code>storageClassName</code> annotations set to <code>""</code> to be bound
to a PV without a storage class.</p>
</div>
</div>
<div class="sect3">
<h4 id="pvc-access-modes-understanding-persistent-storage">Access modes</h4>
<div class="paragraph">
<p>Claims use the same conventions as volumes when requesting storage with
specific access modes.</p>
</div>
</div>
<div class="sect3">
<h4 id="pvc-resources-understanding-persistent-storage">Resources</h4>
<div class="paragraph">
<p>Claims, such as Pods, can request specific quantities of a resource. In
this case, the request is for storage. The same resource model applies to
volumes and claims.</p>
</div>
</div>
<div class="sect3">
<h4 id="pvc-claims-as-volumes-understanding-persistent-storage">Claims as volumes</h4>
<div class="paragraph">
<p>Pods access storage by using the claim as a volume. Claims must exist in the
same namespace as the Pod by using the claim. The cluster finds the claim
in the Pod&#8217;s namespace and uses it to get the <code>PersistentVolume</code> backing
the claim. The volume is mounted to the host and into the Pod, for example:</p>
</div>
<div class="listingblock">
<div class="title">Mount volume to the host and into the Pod example</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: Pod
apiVersion: v1
metadata:
  name: mypod
spec:
  containers:
    - name: myfrontend
      image: dockerfile/nginx
      volumeMounts:
      - mountPath: "/var/www/html" <b class="conum">(1)</b>
        name: mypd <b class="conum">(2)</b>
  volumes:
    - name: mypd
      persistentVolumeClaim:
        claimName: myclaim <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Path to mount the volume inside the Pod</p>
</li>
<li>
<p>Name of the volume to mount</p>
</li>
<li>
<p>Name of the PVC, that exists in the same namespace, to use</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="block-volume-support-understanding-persistent-storage">Block volume support</h3>
<div class="paragraph">
<p>You can statically provision raw block volumes by including API fields
in your PV and PVC specifications. This functionality is only available for
manually provisioned PVs.</p>
</div>
<div class="paragraph">
<p>To use a block volume, you must first enable the <code>BlockVolume</code> feature
gate. To enable the feature gates for master(s), add <code>feature-gates</code> to
<code>apiServerArguments</code> and <code>controllerArguments</code>. To enable the feature
gates for node(s), add <code>feature-gates</code> to <code>kubeletArguments</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">kubeletArguments:
   feature-gates:
     - BlockVolume=true</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Block volume support is a Technology Preview release only. Technology Preview releases
are not supported with Red Hat production service-level agreements (SLAs) and
might not be functionally complete, and Red Hat does not recommend using them
for production. These features provide early access to upcoming product
features, enabling customers to test functionality and provide feedback during
the development process. For more information see
<a href="https://access.redhat.com/support/offerings/techpreview/">Red Hat Technology
Preview Features Support Scope</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="block-volume-examples-understanding-persistent-storage">Block volume examples</h4>
<div class="listingblock">
<div class="title">PV example</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolume
metadata:
  name: block-pv
spec:
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  volumeMode: Block <b class="conum">(1)</b>
  persistentVolumeReclaimPolicy: Retain
  fc:
    targetWWNs: ["50060e801049cfd1"]
    lun: 0
    readOnly: false</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>volumeMode</code> field indicating that this PV is a raw block volume.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">PVC example</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: block-pvc
spec:
  accessModes:
    - ReadWriteOnce
  volumeMode: Block <b class="conum">(1)</b>
  resources:
    requests:
      storage: 10Gi</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>volumeMode</code> field indicating that a raw block PV is requested.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Pod specification example</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: pod-with-block-volume
spec:
  containers:
    - name: fc-container
      image: fedora:26
      command: ["/bin/sh", "-c"]
      args: [ "tail -f /dev/null" ]
      volumeDevices:  <b class="conum">(1)</b>
        - name: data
          devicePath: /dev/xvda <b class="conum">(2)</b>
  volumes:
    - name: data
      persistentVolumeClaim:
        claimName: block-pvc <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>volumeDevices</code>, similar to <code>volumeMounts</code>, is used for block devices
and can only be used with <code>PersistentVolumeClaim</code> sources.</p>
</li>
<li>
<p><code>devicePath</code>, similar to <code>mountPath</code>, represents the path to the
physical device.</p>
</li>
<li>
<p>The volume source must be of type <code>persistentVolumeClaim</code> and must
match the  name of the PVC as expected.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Accepted values for <code>VolumeMode</code></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Binding scenarios for block volumes</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">PV VolumeMode</th>
<th class="tableblock halign-left valign-top">PVC VolumeMode</th>
<th class="tableblock halign-left valign-top">Binding Result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No Bind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No Bind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No Bind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No Bind</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Unspecified values result in the default value of <code>Filesystem</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring-persistent-storage">Configuring persistent storage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="persistent-storage-using-aws-elastic-block-store">Persistent Storage Using AWS Elastic Block Store</h3>
<div class="paragraph">
<p>OpenShift Enterprise supports AWS Elastic Block Store volumes (EBS). You can
provision your OpenShift Enterprise cluster with persistent storage using AWS EC2.
Some familiarity with Kubernetes and AWS is assumed.</p>
</div>
<div class="paragraph">
<p>The Kubernetes persistent volume framework allows administrators to provision a
cluster with persistent storage and gives users a way to request those
resources without having any knowledge of the underlying infrastructure.
AWS Elastic Block Store volumes can be provisioned dynamically.
Persistent volumes are not bound to a single project or namespace; they can be
shared across the OpenShift Enterprise cluster.
Persistent volume claims are specific to a project or namespace and can be
requested by users.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>High-availability of storage in the infrastructure is left to the underlying
storage provider.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Additional References</div>
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts.html">Amazon
EC2</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="storage-create-EBS-storage-class-persistent-storage-aws">Creating the EBS Storage Class</h4>
<div class="paragraph">
<p>StorageClasses are used to differentiate and delineate storage levels and
usages. By defining a storage class, users can obtain dynamically provisioned
persistent volumes.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the OpenShift Enterprise console, click <strong>Storage</strong> &#8594; <strong>Storage Classes</strong>.</p>
</li>
<li>
<p>In the storage class overview, click <strong>Create Storage Class</strong>.</p>
</li>
<li>
<p>Define the desired options on the page that appears.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter a name to reference the storage class.</p>
</li>
<li>
<p>Enter an optional description.</p>
</li>
<li>
<p>Select the reclaim policy.</p>
</li>
<li>
<p>Select kubernetes.io/aws-ebs from the drop down list.</p>
</li>
<li>
<p>Enter additional parameters for the storage class as desired.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create</strong> to create the storage class.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_creating-the-persistent-volume-claim">Creating the Persistent Volume Claim</h4>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>Storage must exist in the underlying infrastructure before it can be mounted as
a volume in OpenShift Enterprise.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the OpenShift Enterprise console, click <strong>Storage</strong> &#8594; <strong>Persistent Volume Claims</strong>.</p>
</li>
<li>
<p>In the persistent volume claims overview, click <strong>Create Persistent Volume
Claim</strong>.</p>
</li>
<li>
<p>Define the desired options on the page that appears.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the storage class created previously from the drop-down menu.</p>
</li>
<li>
<p>Enter a unique name for the storage claim.</p>
</li>
<li>
<p>Select the access mode. This determines the read and write access for the
created storage claim.</p>
</li>
<li>
<p>Define the size of the storage claim.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create</strong> to create the persistent volume claim and generate a persistent
volume.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="volume-format-aws-persistent-storage-aws">Volume Format</h4>
<div class="paragraph">
<p>Before OpenShift Enterprise mounts the volume and passes it to a container, it checks
that it contains a file system as specified by the <code>fsType</code> parameter in the
persistent volume definition. If the device is not formatted with the file
system, all data from the device is erased and the device is automatically
formatted with the given file system.</p>
</div>
<div class="paragraph">
<p>This allows using unformatted AWS volumes as persistent volumes, because
OpenShift Enterprise formats them before the first use.</p>
</div>
</div>
<div class="sect3">
<h4 id="maximum-number-of-ebs-volumes-on-a-node-persistent-storage-aws">Maximum Number of EBS Volumes on a Node</h4>
<div class="paragraph">
<p>By default, OpenShift Enterprise supports a maximum of 39 EBS volumes attached to one
node. This limit is consistent with the
<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/volume_limits.html#linux-specific-volume-limits">AWS
volume limits</a>.</p>
</div>
<div class="paragraph">
<p>OpenShift Enterprise can be configured to have a higher limit by setting the
environment variable <code>KUBE_MAX_PD_VOLS</code>. However, AWS requires a particular
naming scheme
(<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/device_naming.html">AWS
Device Naming</a>) for attached devices, which only supports a maximum of 52
volumes. This limits the number of volumes that can be attached to a node via
OpenShift Enterprise to 52.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="persistent-storage-using-iscsi">Persistent Storage Using iSCSI</h3>
<div class="paragraph">
<p>You can provision your OpenShift Enterprise cluster with
persistent storage using
<a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Storage_Administration_Guide/ch-iscsi.html">iSCSI</a>.
Some familiarity with Kubernetes and iSCSI is assumed.</p>
</div>
<div class="paragraph">
<p>The Kubernetes persistent volume framework allows administrators to
provision a cluster with persistent storage and gives users a way to
request those resources without having any knowledge of the
underlying infrastructure.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>High-availability of storage in the infrastructure is left to the underlying
storage provider.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>When you use iSCI on Amazon Web Services, you must update the default
security policy to include TCP traffic between nodes on the iSCSI ports.
By default, they are ports <code>860</code> and <code>3260</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="persistent-storage-iscsi-provisioning-persistent-storage-iscsi">Provisioning</h4>
<div class="paragraph">
<p>Verify that the storage exists in the underlying infrastructure before
mounting it as a volume in OpenShift Enterprise. All that is required for the
iSCSI is the iSCSI target portal, a valid iSCSI Qualified Name (IQN),
a valid LUN number, the filesystem type, and the <code>PersistentVolume</code> API.</p>
</div>
<div class="paragraph">
<p>Optionally, you can provide multipath portals and the Challenge Handshake
Authentication Protocol (CHAP) configuration.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Persistent Volume Object Definition</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolume
metadata:
  name: iscsi-pv
spec:
  capacity:
    storage: 1Gi
  accessModes:
    - ReadWriteOnce
  iscsi:
     targetPortal: 10.16.154.81:3260
     portals: ['10.16.154.82:3260', '10.16.154.83:3260']
     iqn: iqn.2014-12.example.server:storage.target00
     lun: 0
     fsType: 'ext4'
     readOnly: false
     chapAuthDiscovery: true
     chapAuthSession: true
     secretRef:
       name: chap-secret</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="enforcing-disk-quotas-iscsi-persistent-storage-iscsi">Enforcing Disk Quotas</h4>
<div class="paragraph">
<p>Use LUN partitions to enforce disk quotas and size constraints. Each LUN
is one persistent volume. Kubernetes enforces unique names for persistent
volumes.</p>
</div>
<div class="paragraph">
<p>Enforcing quotas in this way allows the end user to request persistent
storage by a specific amount (e.g, 10Gi) and be matched with a
corresponding volume of equal or greater capacity.</p>
</div>
</div>
<div class="sect3">
<h4 id="volume-security-iscsi-persistent-storage-iscsi">iSCSI Volume Security</h4>
<div class="paragraph">
<p>Users request storage with a <code>PersistentVolumeClaim</code>. This claim only
lives in the user&#8217;s namespace and can only be referenced by a pod within
that same namespace. Any attempt to access a persistent volume across a
namespace causes the pod to fail.</p>
</div>
<div class="paragraph">
<p>Each iSCSI LUN must be accessible by all nodes in the cluster.</p>
</div>
</div>
<div class="sect3">
<h4 id="iscsi-multipath-persistent-storage-iscsi">iSCSI Multipathing</h4>
<div class="paragraph">
<p>For iSCSI-based storage, you can configure multiple paths by using the
same IQN for more than one target portal IP address. Multipathing ensures
access to the persistent volume when one or more of the components in a
path fail.</p>
</div>
<div class="paragraph">
<p>To specify multi-paths in the pod specification use the <code>portals</code> field.
For example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolume
metadata:
  name: iscsi_pv
spec:
  capacity:
    storage: 1Gi
  accessModes:
    - ReadWriteOnce
  iscsi:
    targetPortal: 10.0.0.1:3260
    portals: ['10.0.2.16:3260', '10.0.2.17:3260', '10.0.2.18:3260'] <b class="conum">(1)</b>
    iqn: iqn.2016-04.test.com:storage.target00
    lun: 0
    fsType: ext4
    readOnly: false</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add additional target portals using the <code>portals</code> field.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="iscsi-custom-iqn-persistent-storage-iscsi">iSCSI Custom Initiator IQN</h4>
<div class="paragraph">
<p>Configure the custom initiator iSCSI Qualified Name (IQN) if the iSCSI
targets are restricted to certain IQNs, but the nodes that the iSCSI PVs
are attached to are not guaranteed to have these IQNs.</p>
</div>
<div class="paragraph">
<p>To specify a custom initiator IQN, use <code>initiatorName</code> field.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolume
metadata:
  name: iscsi_pv
spec:
  capacity:
    storage: 1Gi
  accessModes:
    - ReadWriteOnce
  iscsi:
    targetPortal: 10.0.0.1:3260
    portals: ['10.0.2.16:3260', '10.0.2.17:3260', '10.0.2.18:3260']
    iqn: iqn.2016-04.test.com:storage.target00
    lun: 0
    initiatorName: iqn.2016-04.test.com:custom.iqn <b class="conum">(1)</b>
    fsType: ext4
    readOnly: false</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the name of the initiator.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="persistent-storage-using-container-storage-interface-csi">Persistent storage using the Container Storage Interface (CSI)</h3>
<div class="paragraph">
<p>The Container Storage Interface (CSI) allows OpenShift Enterprise to consume
storage from  storage backends that implement the
<a href="https://github.com/container-storage-interface/spec">CSI interface</a>
as persistent storage.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Container Storage Interface is a Technology Preview release only. Technology Preview releases
are not supported with Red Hat production service-level agreements (SLAs) and
might not be functionally complete, and Red Hat does not recommend using them
for production. These features provide early access to upcoming product
features, enabling customers to test functionality and provide feedback during
the development process. For more information see
<a href="https://access.redhat.com/support/offerings/techpreview/">Red Hat Technology
Preview Features Support Scope</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>OpenShift Enterprise does not ship with any CSI drivers. It is recommended to
use the CSI drivers provided by
<a href="https://kubernetes-csi.github.io/docs/Drivers.html">community or storage vendors</a>.</p>
</div>
<div class="paragraph">
<p>OpenShift Enterprise 4.0 supports version 0.4.0 of the
<a href="https://github.com/container-storage-interface/spec">CSI specification</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="persistent-storage-csi-architecture-persistent-storage-csi">CSI Architecture</h4>
<div class="paragraph">
<p>CSI drivers are typically shipped as container images. These containers
are not aware of OpenShift Enterprise where they run. To use CSI-compatible
storage backend in OpenShift Enterprise, the cluster administrator must deploy
several components that serve as a bridge between OpenShift Enterprise and the
storage driver.</p>
</div>
<div class="paragraph">
<p>The following diagram provides a high-level overview about the components
running in pods in the OpenShift Enterprise cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/csi-arch.png" alt="Architecture of CSI components">
</div>
</div>
<div class="paragraph">
<p>It is possible to run multiple CSI drivers for different storage backends.
Each driver needs its own external controllers' deployment and DaemonSet
with the driver and CSI registrar.</p>
</div>
<div class="sect4">
<h5 id="external-csi-contollers-persistent-storage-csi">External CSI controllers</h5>
<div class="paragraph">
<p>External CSI Controllers is a deployment that deploys one or more pods
with three containers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An external CSI attacher container translates <code>attach</code> and <code>detach</code>
calls from OpenShift Enterprise to respective <code>ControllerPublish</code> and
<code>ControllerUnpublish</code> calls to the CSI driver.</p>
</li>
<li>
<p>An external CSI provisioner container that translates <code>provision</code> and
<code>delete</code> calls from OpenShift Enterprise to respective <code>CreateVolume</code> and
<code>DeleteVolume</code> calls to the CSI driver.</p>
</li>
<li>
<p>A CSI driver container</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The CSI attacher and CSI provisioner containers communicate with the CSI
driver container using UNIX Domain Sockets, ensuring that no CSI
communication leaves the pod. The CSI driver is not accessible from
outside of the pod.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>attach</code>, <code>detach</code>, <code>provision</code>, and <code>delete</code> operations typically require
the CSI driver to use credentials to the storage backend. Run the CSI
controller pods on infrastructure nodes so the credentials are never leaked
to user processes, even in the event of a catastrophic security breach
on a compute node.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The external attacher must also run for CSI drivers that do not support
third-party <code>attach</code> or <code>detach</code> operations. The external attacher will
not issue any <code>ControllerPublish</code> or <code>ControllerUnpublish</code> operations to
the CSI driver. However, it still must run to implement the necessary
OpenShift Enterprise attachment API.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="csi-driver-daemonset-persistent-storage-csi">CSI Driver DaemonSet</h5>
<div class="paragraph">
<p>The CSI driver DaemonSet runs a pod on every node that allows
OpenShift Enterprise to mount storage provided by the CSI driver to the node
and use it in user workloads (pods) as persistent volumes (PVs). The pod
with the CSI driver installed contains the following containers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A CSI driver registrar, which registers the CSI driver into the
<code>openshift-node</code> service running on the node. The <code>openshift-node</code> process
running on the node then directly connects with the CSI driver using the
UNIX Domain Socket available on the node.</p>
</li>
<li>
<p>A CSI driver.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The CSI driver deployed on the node should have as few credentials to the
storage backend as possible. OpenShift Enterprise will only use the node plug-in
set of CSI calls such as <code>NodePublish</code>/<code>NodeUnpublish</code> and
<code>NodeStage</code>/<code>NodeUnstage</code>, if these calls are implemented.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="csi-example-deployment-persistent-storage-csi">Example CSI deployment</h4>
<div class="paragraph">
<p>Since OpenShift Enterprise does not ship with any CSI driver installed, this
example shows how to deploy a community driver for OpenStack Cinder in
OpenShift Enterprise.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a new project where the CSI components will run, and then create
a new service account to run the components. An explicit node selector is
used to run the Daemonset with the CSI driver also on master nodes.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc adm new-project csi --node-selector=""
Now using project "csi" on server "https://example.com:8443".

# oc create serviceaccount cinder-csi
serviceaccount "cinder-csi" created

# oc adm policy add-scc-to-user privileged system:serviceaccount:csi:cinder-csi
scc "privileged" added to: ["system:serviceaccount:csi:cinder-csi"]</pre>
</div>
</div>
</li>
<li>
<p>Apply this YAML file to create the deployment with the external CSI
attacher and provisioner and DaemonSet with the CSI driver.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml"># This YAML file contains all API objects that are necessary to run Cinder CSI
# driver.
#
# In production, this needs to be in separate files, e.g. service account and
# role and role binding needs to be created once.
#
# It server as an example how to use external attacher and external provisioner
# images shipped with {product-title} with a community CSI driver.

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: cinder-csi-role
rules:
  - apiGroups: [""]
    resources: ["persistentvolumes"]
    verbs: ["create", "delete", "get", "list", "watch", "update", "patch"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["create", "get", "list", "watch", "update", "patch"]
  - apiGroups: [""]
    resources: ["persistentvolumeclaims"]
    verbs: ["get", "list", "watch", "update", "patch"]
  - apiGroups: [""]
    resources: ["nodes"]
    verbs: ["get", "list", "watch", "update", "patch"]
  - apiGroups: ["storage.k8s.io"]
    resources: ["storageclasses"]
    verbs: ["get", "list", "watch"]
  - apiGroups: ["storage.k8s.io"]
    resources: ["volumeattachments"]
    verbs: ["get", "list", "watch", "update", "patch"]
  - apiGroups: [""]
    resources: ["configmaps"]
    verbs: ["get", "list", "watch", "create", "update", "patch"]

---

kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: cinder-csi-role
subjects:
  - kind: ServiceAccount
    name: cinder-csi
    namespace: csi
roleRef:
  kind: ClusterRole
  name: cinder-csi-role
  apiGroup: rbac.authorization.k8s.io

---
apiVersion: v1
data:
  cloud.conf: W0dsb2JhbF0KYXV0aC11cmwgPSBodHRwczovL2V4YW1wbGUuY29tOjEzMDAwL3YyLjAvCnVzZXJuYW1lID0gYWxhZGRpbgpwYXNzd29yZCA9IG9wZW5zZXNhbWUKdGVuYW50LWlkID0gZTBmYTg1YjZhMDY0NDM5NTlkMmQzYjQ5NzE3NGJlZDYKcmVnaW9uID0gcmVnaW9uT25lCg== <b class="conum">(1)</b>
kind: Secret
metadata:
  creationTimestamp: null
  name: cloudconfig
---
kind: Deployment
apiVersion: apps/v1
metadata:
  name: cinder-csi-controller
spec:
  replicas: 2
  selector:
    matchLabels:
      app: cinder-csi-controllers
  template:
    metadata:
      labels:
        app: cinder-csi-controllers
    spec:
      serviceAccount: cinder-csi
      containers:
        - name: csi-attacher
          image: registry.redhat.io/openshift/csi-attacher:v4.0
          args:
            - "--v=5"
            - "--csi-address=$(ADDRESS)"
            - "--leader-election"
            - "--leader-election-namespace=$(MY_NAMESPACE)"
            - "--leader-election-identity=$(MY_NAME)"
          env:
            - name: MY_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: MY_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: ADDRESS
              value: /csi/csi.sock
          volumeMounts:
            - name: socket-dir
              mountPath: /csi
        - name: csi-provisioner
          image: registry.redhat.io/openshift/csi-provisioner:v4.0
          args:
            - "--v=5"
            - "--provisioner=csi-cinderplugin"
            - "--csi-address=$(ADDRESS)"
          env:
            - name: ADDRESS
              value: /csi/csi.sock
          volumeMounts:
            - name: socket-dir
              mountPath: /csi
        - name: cinder-driver
          image: k8scloudprovider/cinder-csi-plugin:v0.3.0
          command: [ "/bin/cinder-csi-plugin" ]
          args:
            - "--nodeid=$(NODEID)"
            - "--endpoint=unix://$(ADDRESS)"
            - "--cloud-config=/etc/cloudconfig/cloud.conf"
          env:
            - name: NODEID
              valueFrom:
                fieldRef:
                  fieldPath: spec.nodeName
            - name: ADDRESS
              value: /csi/csi.sock
          volumeMounts:
            - name: socket-dir
              mountPath: /csi
            - name: cloudconfig
              mountPath: /etc/cloudconfig
      volumes:
        - name: socket-dir
          emptyDir:
        - name: cloudconfig
          secret:
            secretName: cloudconfig

---

kind: DaemonSet
apiVersion: apps/v1
metadata:
  name: cinder-csi-ds
spec:
  selector:
    matchLabels:
      app: cinder-csi-driver
  template:
    metadata:
      labels:
        app: cinder-csi-driver
    spec:
      <b class="conum">(2)</b>
      serviceAccount: cinder-csi
      containers:
        - name: csi-driver-registrar
          image: registry.redhat.io/openshift/csi-driver-registrar:v4.0
          securityContext:
            privileged: true
          args:
            - "--v=5"
            - "--csi-address=$(ADDRESS)"
          env:
            - name: ADDRESS
              value: /csi/csi.sock
            - name: KUBE_NODE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: spec.nodeName
          volumeMounts:
            - name: socket-dir
              mountPath: /csi
        - name: cinder-driver
          securityContext:
            privileged: true
            capabilities:
              add: ["SYS_ADMIN"]
            allowPrivilegeEscalation: true
          image: k8scloudprovider/cinder-csi-plugin:v0.3.0
          command: [ "/bin/cinder-csi-plugin" ]
          args:
            - "--nodeid=$(NODEID)"
            - "--endpoint=unix://$(ADDRESS)"
            - "--cloud-config=/etc/cloudconfig/cloud.conf"
          env:
            - name: NODEID
              valueFrom:
                fieldRef:
                  fieldPath: spec.nodeName
            - name: ADDRESS
              value: /csi/csi.sock
          volumeMounts:
            - name: socket-dir
              mountPath: /csi
            - name: cloudconfig
              mountPath: /etc/cloudconfig
            - name: mountpoint-dir
              mountPath: /var/lib/origin/openshift.local.volumes/pods/
              mountPropagation: "Bidirectional"
            - name: cloud-metadata
              mountPath: /var/lib/cloud/data/
            - name: dev
              mountPath: /dev
      volumes:
        - name: cloud-metadata
          hostPath:
            path: /var/lib/cloud/data/
        - name: socket-dir
          hostPath:
            path: /var/lib/kubelet/plugins/csi-cinderplugin
            type: DirectoryOrCreate
        - name: mountpoint-dir
          hostPath:
            path: /var/lib/origin/openshift.local.volumes/pods/
            type: Directory
        - name: cloudconfig
          secret:
            secretName: cloudconfig
        - name: dev
          hostPath:
            path: /dev</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Replace with <code>cloud.conf</code> for your OpenStack deployment.
For example, the Secret can be generated using the <code>oc create secret
generic cloudconfig --from-file cloud.conf --dry-run -o yaml</code>.</p>
</li>
<li>
<p>Optionally, add <code>nodeSelector</code> to the CSI driver pod template to
configure the nodes on which the CSI driver starts. Only nodes matching
the selector run pods that use volumes that are served by the CSI driver.
Without <code>nodeSelector</code>, the driver runs on all nodes in the cluster.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="csi-dynamic-provisioning-persistent-storage-csi">Dynamic Provisioning</h4>
<div class="paragraph">
<p>Dynamic provisioning of persistent storage depends on the capabilities of
the CSI driver and underlying storage backend. The provider of the CSI
driver should document how to create a StorageClass in OpenShift Enterprise and
the parameters available for configuration.</p>
</div>
<div class="paragraph">
<p>As seen in the OpenStack Cinder example, you can deploy this StorageClass
to enable dynamic provisioning.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Create a default storage class that ensures all PVCs that do not require
any special storage class are provisioned by the installed CSI driver.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-shell" data-lang="shell"># oc create -f - &lt;&lt; EOF
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: cinder
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
provisioner: csi-cinderplugin
parameters:
EOF</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="csi-example-usage-persistent-storage-csi">Example using the CSI driver</h4>
<div class="paragraph">
<p>The following example installs a default MySQL template without any
changes to the template.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The CSI driver has been deployed.</p>
</li>
<li>
<p>A StorageClass has been created for dynamic provisioning.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Create the MySQL template:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc new-app mysql-persistent
--&gt; Deploying template "openshift/mysql-persistent" to project default
...

# oc get pvc
NAME              STATUS    VOLUME                                   CAPACITY
ACCESS MODES   STORAGECLASS   AGE
mysql             Bound     kubernetes-dynamic-pv-3271ffcb4e1811e8   1Gi
RWO            cinder         3s</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="persistent-storage-using-openstack-manila">Persistent storage using OpenStack Manila</h3>
<div class="paragraph">
<p>OpenShift Enterprise is capable of provisioning PVs using the
<a href="https://wiki.openstack.org/wiki/Manila">OpenStack Manila</a> shared
file system service.</p>
</div>
<div class="paragraph">
<p>It is assumed the OpenStack Manila service has been correctly set up and is
accessible from the OpenShift Enterprise cluster. Only the NFS share type can be
provisioned.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>OpenStack Manila persistent storage is a Technology Preview release only. Technology Preview releases
are not supported with Red Hat production service-level agreements (SLAs) and
might not be functionally complete, and Red Hat does not recommend using them
for production. These features provide early access to upcoming product
features, enabling customers to test functionality and provide feedback during
the development process. For more information see
<a href="https://access.redhat.com/support/offerings/techpreview/">Red Hat Technology
Preview Features Support Scope</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/">Persistent volumes (PV)</a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims">Persistent volume claims (PVCs)</a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/dynamic-provisioning/">Dynamic provisioning</a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/admin/authorization/rbac/">RBAC authorization</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="persistent-storage-manila-install-persistent-storage-manila">Installing the external provisioner</h4>
<div class="paragraph">
<p>To use OpenStack Manila persistent storage you must install
and configure an external provisioner in the OpenShift Enterprise
cluster.</p>
</div>
<div class="paragraph">
<p>The external provisioner is distributed as a container image
and can be run in the OpenShift Enterprise cluster as usual.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a service account:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: manila-provisioner-runner</code></pre>
</div>
</div>
</li>
<li>
<p>Create a ClusterRole:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: manila-provisioner-role
rules:
  - apiGroups: [""]
    resources: ["persistentvolumes", "endpoints"]
    verbs: ["get", "list", "watch", "create", "delete", "update"]
  - apiGroups: [""]
    resources: ["persistentvolumeclaims"]
    verbs: ["get", "list", "watch", "update"]
  - apiGroups: ["storage.k8s.io"]
    resources: ["storageclasses"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["events"]
    verbs: ["list", "watch", "create", "update", "patch"]
  - apiGroups: ["v1"]
    resources: ["secrets"]
    verbs: ["get", "list"]</code></pre>
</div>
</div>
</li>
<li>
<p>Bind the rules via ClusterRoleBinding:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: manila-provisioner
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: manila-provisioner-role
subjects:
- kind: ServiceAccount
  name: manila-provisioner-runner
  namespace: default</code></pre>
</div>
</div>
</li>
<li>
<p>Create a new secret:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Secret
metadata:
  name: manila-secret <b class="conum">(1)</b>
  namespace: default <b class="conum">(2)</b>
data:
  os-authURL: &lt;base64 encoded OpenStack Keystone URL&gt;
  os-userName: &lt;base64 encoded Manila username&gt;
  os-password: &lt;base64 encoded password&gt;
  os-projectName: &lt;base64 encoded OpenStack project (tenant) name&gt;
  os-domainName: &lt;base64 encoded OpenStack Manila service domain&gt;
  os-region: &lt;base64 encoded OpenStack region&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The secret name will be referenced by the Manila volume&#8217;s
StorageClass.</p>
</li>
<li>
<p>The secret namespace will be referenced by the Manila
volume&#8217;s StorageClass.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a new StorageClass:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "manila-share"
provisioner: "externalstorage.k8s.io/manila"
parameters:
  type: "default" <b class="conum">(1)</b>
  zones: "nova" <b class="conum">(2)</b>
  protocol: "NFS" <b class="conum">(3)</b>
  backend: "nfs" <b class="conum">(4)</b>
  osSecretName: "manila-secret" <b class="conum">(5)</b>
  osSecretNamespace: "default" <b class="conum">(6)</b>
  nfs-share-client: "0.0.0.0" <b class="conum">(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <a href="https://docs.openstack.org/manila/latest/admin/shared-file-systems-share-types.html">Manila share type</a>
the provisioner will create for the volume. This field is optional,
and defaults to <code>default</code>.</p>
</li>
<li>
<p>Set of Manila availability zones that the volume might be created
in. This field is optional, and defaults to <code>nova</code>.</p>
</li>
<li>
<p>Protocol used when provisioning a share. Valid options are
<code>NFS</code> and <code>CEPHFS</code>. This field is required.</p>
</li>
<li>
<p>Backend share used for granting access and creating the
<code>PersistentVolumeSource</code>. Valid options are <code>nfs</code> and <code>cephfs</code>.
This field is required.</p>
</li>
<li>
<p>Name of the secret object containing OpenStack credentials.
This field is required.</p>
</li>
<li>
<p>Namespace of the OpenStack credentials secret object. This field
is optional, and defaults to <code>default</code>.</p>
</li>
<li>
<p>Default NFS client for the share exported. This field is optional,
and is only used for the <code>NFS</code> protocol. Defaults to <code>0.0.0.0</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Start the provisioner itself. The following example uses a Deployment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: Deployment
apiVersion: apps/v1
metadata:
  name: manila-provisioner
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: manila-provisioner
    spec:
      serviceAccountName: manila-provisioner-runner
      containers:
        - image: "registry.redhat.io/openshift/manila-provisioner:latest"
          imagePullPolicy: "IfNotPresent"
          name: manila-provisioner</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="persistent-storage-manila-usage-persistent-storage-manila">Provisioning an OpenStack Manila persistent volume</h4>
<div class="paragraph">
<p>OpenStack Manila shares are dynamically provisioned as needed. When the
PersistentVolumeClaim is deleted the provisioner will automatically
delete and unexport the OpenStack Manila share.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The OpenStack Manila external provisioner must be installed.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Create a PersistentVolumeClaim using the corresponding
StorageClass.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: manila-nfs-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 2G
  storageClassName: manila-share</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dynamic-provisioning">Dynamic provisioning</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="about-dynamic-provisioning">About dynamic provisioning</h3>
<div class="paragraph">
<p>The StorageClass resource object describes and classifies storage that can
be requested, as well as provides a means for passing parameters for
dynamically provisioned storage on demand. StorageClass objects can also
serve as a management mechanism for controlling different levels of
storage and access to the storage. Cluster Administrators (<code>cluster-admin</code>)
 or Storage Administrators (<code>storage-admin</code>) define and create the
StorageClass objects that users can request without needing any intimate
knowledge about the underlying storage volume sources.</p>
</div>
<div class="paragraph">
<p>The OpenShift Enterprise persistent volume framework enables this functionality
and allows administrators to provision a cluster with persistent storage.
The framework also gives users a way to request those resources without
having any knowledge of the underlying infrastructure.</p>
</div>
<div class="paragraph">
<p>Many storage types are available for use as persistent volumes in
OpenShift Enterprise. While all of them can be statically provisioned by an
administrator, some types of storage are created dynamically using the
built-in provider and plug-in APIs.</p>
</div>
</div>
<div class="sect2">
<h3 id="available-plug-ins-dynamic-provisioning">Available dynamic provisioning plug-ins</h3>
<div class="paragraph">
<p>OpenShift Enterprise provides the following provisioner plug-ins, which have
generic implementations for dynamic provisioning that use the cluster&#8217;s
configured provider&#8217;s API to create new storage resources:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Storage type</th>
<th class="tableblock halign-left valign-top">Provisioner plug-in name</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AWS Elastic Block Store (EBS)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.io/aws-ebs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For dynamic provisioning when using multiple clusters in different zones,
tag each node with <code>Key=kubernetes.io/cluster/&lt;cluster_name&gt;,Value=&lt;cluster_id&gt;</code>
where <code>&lt;cluster_name&gt;</code> and <code>&lt;cluster_id&gt;</code> are unique per cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceph RBD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.io/rbd</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Any chosen provisioner plug-in also requires configuration for the relevant
cloud, host, or third-party provider as per the relevant documentation.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="defining-storage-classes-dynamic-provisioning">Defining a StorageClass</h3>
<div class="paragraph">
<p>StorageClass objects are currently a globally scoped object and need to be
created by <code>cluster-admin</code> or <code>storage-admin</code> users.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>For GCE and AWS, a default StorageClass is created during OpenShift Enterprise
installation. You can change the default StorageClass or delete it.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sections describe the basic object definition for a
StorageClass and specific examples for each of the supported plug-in types.</p>
</div>
<div class="sect3">
<h4 id="basic-storage-class-definition-dynamic-provisioning">Basic StorageClass object definition</h4>
<div class="paragraph">
<p>The following resource shows the parameters and default values that you
use to configure a StorageClass. This example uses the AWS
ElasticBlockStore (EBS) object definition.</p>
</div>
<div class="listingblock">
<div class="title">Sample StorageClass definition</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: StorageClass <b class="conum">(1)</b>
apiVersion: storage.k8s.io/v1 <b class="conum">(2)</b>
metadata:
  name: gp2 <b class="conum">(3)</b>
  annotations: <b class="conum">(4)</b>
    storageclass.kubernetes.io/is-default-class: 'true'
    ...
provisioner: kubernetes.io/aws-ebs <b class="conum">(5)</b>
parameters: <b class="conum">(6)</b>
  type: gp2
...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>(required) The API object type.</p>
</li>
<li>
<p>(required) The current apiVersion.</p>
</li>
<li>
<p>(required) The name of the StorageClass.</p>
</li>
<li>
<p>(optional) Annotations for the StorageClass</p>
</li>
<li>
<p>(required) The type of provisioner associated with this storage class.</p>
</li>
<li>
<p>(optional) The parameters required for the specific provisioner, this
will change from plug-in to plug-in.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="storage-class-annotations-dynamic-provisioning">StorageClass annotations</h4>
<div class="paragraph">
<p>To set a StorageClass as the cluster-wide default, add
the following annotation to your StorageClass&#8217;s metadata:</p>
</div>
<div class="listingblock yaml">
<div class="content">
<pre class="highlight nowrap"><code>storageclass.kubernetes.io/is-default-class: "true"</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock yaml">
<div class="content">
<pre class="highlight nowrap"><code>apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This enables any Persistent Volume Claim (PVC) that does not specify a
specific volume to automatically be provisioned through the
default StorageClass.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The beta annotation <code>storageclass.beta.kubernetes.io/is-default-class</code> is
still working; however, it will be removed in a future release.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To set a StorageClass description, add the following annotation
to your StorageClass&#8217;s metadata:</p>
</div>
<div class="listingblock yaml">
<div class="content">
<pre class="highlight nowrap"><code>kubernetes.io/description: My StorageClass Description</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock yaml">
<div class="content">
<pre class="highlight nowrap"><code>apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  annotations:
    kubernetes.io/description: My StorageClass Description
...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="aws-definition-dynamic-provisioning">AWS Elastic Block Store (EBS) object definition</h4>
<div class="listingblock">
<div class="title">aws-ebs-storageclass.yaml</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
  name: slow
provisioner: kubernetes.io/aws-ebs
parameters:
  type: io1 <b class="conum">(1)</b>
  zone: us-east-1d <b class="conum">(2)</b>
  iopsPerGB: "10" <b class="conum">(3)</b>
  encrypted: "true" <b class="conum">(4)</b>
  kmsKeyId: keyvalue <b class="conum">(5)</b>
  fsType: ext4 <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>(required) Select from <code>io1</code>, <code>gp2</code>, <code>sc1</code>, <code>st1</code>. The default is <code>gp2</code>.
See the
<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html">AWS documentation</a>
for valid Amazon Resource Name (ARN) values.</p>
</li>
<li>
<p>(optional) The AWS zone. If no zone is specified, volumes are generally
round-robined across all active zones where the OpenShift Enterprise cluster
has a node. The <code>zone</code> and <code>zones</code> parameters must not be used at the
same time.</p>
</li>
<li>
<p>(optional) Only for <strong>io1</strong> volumes. I/O operations per second per GiB.
The AWS volume plug-in multiplies this with the size of the requested
volume to compute IOPS of the volume. The value cap is 20,000 IOPS, which
is the maximum supported by AWS. See the
<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html">AWS documentation</a>
for further details.</p>
</li>
<li>
<p>(optional) Denotes whether to encrypt the EBS volume. Valid values
are <code>true</code> or <code>false</code>.</p>
</li>
<li>
<p>(optional) The full ARN of the key to use when encrypting the volume.
If none is supplied, but <code>encypted</code> is set to <code>true</code>, then AWS generates a
key. See the
<a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html">AWS documentation</a>
for a valid ARN value.</p>
</li>
<li>
<p>(optional) File system that is created on dynamically provisioned
volumes. This value is copied to the <code>fsType</code> field of dynamically
provisioned persistent volumes and the file system is created when the
volume is mounted for the first time. The default value is <code>ext4</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="ceph-rbd-definition-dynamic-provisioning">Ceph RBD object definition</h4>
<div class="listingblock">
<div class="title">ceph-storageclass.yaml</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: cephfs
provisioner: kubernetes.io/rbd
parameters:
  monitors: 10.16.153.105:6789  <b class="conum">(1)</b>
  adminId: admin  <b class="conum">(2)</b>
  adminSecretName: ceph-secret  <b class="conum">(3)</b>
  adminSecretNamespace: kube-system  <b class="conum">(4)</b>
  pool: kube  <b class="conum">(5)</b>
  userId: kube  <b class="conum">(6)</b>
  userSecretName: ceph-secret-user  <b class="conum">(7)</b>
  fsType: ext4 <b class="conum">(8)</b>
  imageFormat: "2" <b class="conum">(9)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>(required) A comma-delimited list of Ceph monitors.</p>
</li>
<li>
<p>(optional) Ceph client ID that is capable of creating images in the
pool. Default is <code>admin</code>.</p>
</li>
<li>
<p>(required) Secret Name for <code>adminId</code>. The provided secret must have
type <code>kubernetes.io/rbd</code>.</p>
</li>
<li>
<p>(optional) The namespace for <code>adminSecret</code>. Default is <code>default</code>.</p>
</li>
<li>
<p>(optional) Ceph RBD pool. Default is <code>rbd</code>.</p>
</li>
<li>
<p>(optional) Ceph client ID that is used to map the Ceph RBD image.
Default is the same as <code>adminId</code>.</p>
</li>
<li>
<p>(required) The name of Ceph Secret for <code>userId</code> to map Ceph RBD image.
It must exist in the same namespace as PVCs.</p>
</li>
<li>
<p>(optional) File system that is created on dynamically provisioned
volumes. This value is copied to the <code>fsType</code> field of dynamically
provisioned persistent volumes and the file system is created when the
volume is mounted for the first time. The default value is <code>ext4</code>.</p>
</li>
<li>
<p>(optional) Ceph RBD image format. The default value is <code>2</code>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="change-default-storage-class-dynamic-provisioning">Changing the default StorageClass</h3>
<div class="paragraph">
<p>If you are using GCE and AWS, use the following process to change the
default StorageClass. This process assumes you have two StorageClasses
defined, <code>gp2</code> and <code>standard</code>, and you want to change the default
StorageClass from <code>gp2</code> to <code>standard</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>List the StorageClass:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get storageclass

NAME                 TYPE
gp2 (default)        kubernetes.io/aws-ebs <b class="conum">(1)</b>
standard             kubernetes.io/gce-pd</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>(default)</code> denotes the default StorageClass.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Change the value of the annotation
<code>storageclass.kubernetes.io/is-default-class</code> to <code>false</code> for the default
StorageClass:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc patch storageclass gp2 -p '{"metadata": {"annotations": {"storageclass.kubernetes.io/is-default-class": "false"}}}'</pre>
</div>
</div>
</li>
<li>
<p>Make another StorageClass the default by adding or modifying the
annotation as <code>storageclass.kubernetes.io/is-default-class=true</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc patch storageclass standard -p '{"metadata": {"annotations": {"storageclass.kubernetes.io/is-default-class": "true"}}}'</pre>
</div>
</div>
</li>
<li>
<p>Verify the changes:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get storageclass

NAME                 TYPE
gp2                  kubernetes.io/aws-ebs
standard (default)   kubernetes.io/gce-pd</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-04-12 23:56:12 UTC
</div>
</div>
</body>
</html>